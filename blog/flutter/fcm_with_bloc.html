<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>ì›…ë©ì´</title><link rel="canonical" href="https://wjlee611.github.io/blog/flutter/fcm_with_bloc"/><meta name="next-head-count" content="4"/><link rel="icon" href="/images/icon_circle.png"/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" rel="stylesheet"/><meta name="description" content="ì›…ë©ì´"/><meta name="apple-mobile-web-app-title" content="ì›…ë©ì´"/><meta name="application-name" content="ì›…ë©ì´"/><meta name="theme-color" content="#009c39"/><meta name="google-site-verification" content="vhQ9DaDdUJcSBHKI_U6tAtE61zwz2i2pLQXyZ62GRLk"/><meta name="naver-site-verification" content="07764cc1a8eda55b4bdf78cf846d6811d042b9ee"/><link rel="preload" href="/_next/static/media/a37cf3809adb2c63-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/dd50543ba70be8e9-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/c372a630cbda84f2-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/c244cd6be2a69a75.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c244cd6be2a69a75.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-401a9806b070f31a.js" defer=""></script><script src="/_next/static/chunks/main-6b74302918225334.js" defer=""></script><script src="/_next/static/chunks/pages/_app-01dc60c7ef7ccbd8.js" defer=""></script><script src="/_next/static/chunks/95b64a6e-5c1c80ce1af5e491.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slugs%5D-d30256c1e19801d0.js" defer=""></script><script src="/_next/static/mSip3wpvRTnWXKuxxjBQ7/_buildManifest.js" defer=""></script><script src="/_next/static/mSip3wpvRTnWXKuxxjBQ7/_ssgManifest.js" defer=""></script></head><body class="text-primary transition-[background] bg-white dark:bg-[#1A1C23]"><script>
            const theme = localStorage.getItem("theme");
            const getUserTheme = () => {
             if(theme){
              return theme
             } 
             return window.matchMedia('(prefers-color-scheme: dark)').matches
             ? 'dark'
             : 'light'
          }
          document.body.dataset.theme = getUserTheme();
          </script><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="__className_e7b8b0 text-center transition-all "><header class="fixed top-0 left-0 right-0 mx-anuo w-screen h-12 md:h-16 flex justify-between items-center px-2 md:px-10 backdrop-blur bg-blue-200 bg-opacity-20 z-50"><div class="h-full flex items-center"><a class="h-full aspect-square flex justify-center items-center text-3xl select-none cursor-pointer" href="/">ğŸ«§</a><nav class="h-full hidden md:flex space-x-8 overflow-hidden ml-10"><li class="h-full flex items-center list-none relative select-none"><a class="h-full w-full md:w-auto flex items-center transition-colors py-2 md:my-0 font-bold text-black dark:text-white " href="/">Portfolio</a></li><li class="h-full flex items-center list-none relative select-none"><a class="h-full w-full md:w-auto flex items-center transition-colors py-2 md:my-0 font-bold text-blue-500 " href="/blog">Blog</a><div class="hidden md:flex w-full h-[2px] bg-blue-500 absolute bottom-0 left-0 blur-[2px]"></div></li><li class="h-full flex items-center list-none relative select-none"><a class="h-full w-full md:w-auto flex items-center transition-colors py-2 md:my-0 font-bold text-black dark:text-white " href="/arkhive">Arkhive</a></li></nav></div><div class="flex items-center h-full"><button aria-label="Toggle Dark Mode" type="button" class="flex h-9 w-9 items-center justify-center rounded-lg transition-all text-secondary hover:bg-secondary "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-6 w-6 text-yellow-400 drop-shadow-base"></svg></button><button class="flex md:hidden items-center justify-center w-16 h-full text-2xl text-black dark:text-white"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.5 11.5A.5.5 0 0 1 5 11h10a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 1 3h10a.5.5 0 0 1 0 1H1a.5.5 0 0 1-.5-.5z"></path></svg></button></div></header><main class="inline-block w-full relative pt-16 px-8 max-w-5xl 2xl:max-w-7xl" style="opacity:1;transform:none"><div class="flex flex-col items-start pb-16"><header class="flex w-full flex-col items-center my-10"><h1 class="bg-gradient-to-br from-blue-600 to-blue-400 bg-clip-text text-transparent text-3xl font-bold mb-5 drop-shadow">FCM, BLoCìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°</h1><span class="text-blue-500 text-lg">FCM ì‘ë‹µì„ BLoCì„ ì´ìš©í•´ì„œ ìƒíƒœê´€ë¦¬ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.</span><span class="space-x-10 mt-5 text-blue-400 text-sm">ì½ëŠ”ë°<span class="text-blue-500 text-xl font-semibold"> <!-- -->9</span>ë¶„ ì •ë„ ê±¸ë ¤ìš”.</span></header><section class="w-full flex justify-between space-x-5"><div class="w-full flex flex-col items-start prose dark:prose-dark max-w-full lg:max-w-2xl 2xl:max-w-4xl"><p>FCMì„ êµ¬í˜„í•˜ëŠ”ë° ìˆì–´, FCM ì„¸íŒ…ì´ë‚˜ ìˆ˜ì‹ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê¸€ì€ ë§ì´ ë´¤ëŠ”ë°,<br/>
<!-- -->ì´ë¥¼ ìƒíƒœê´€ë¦¬ì™€ ì—®ì–´ì„œ ì†Œê°œí•˜ëŠ” ê¸€ì€ ëª»ë´¤ë˜ê±° ê°™ìŠµë‹ˆë‹¤.</p>
<p>ì œ ê²½ìš°ì—ëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼ì„ í†µì¼í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê¸° ë•Œë¬¸ì—, FCM ì—­ì‹œ ìƒíƒœê´€ë¦¬ë¥¼ ì´ìš©í•´ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.</p>
<p>ë˜í•œ, ì €ëŠ” Blocì„ ì• ìš©í•˜ê¸° ë•Œë¬¸ì—, ì´ë²ˆì—ëŠ” FCMì´ ìˆ˜ì‹ ë˜ë©´ Blocì„ í†µí•´ í•´ë‹¹ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.<br/>
<!-- -->(ì •í™•íˆëŠ” Cubitì„ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤)</p>
<notice><p>í•´ë‹¹ ë°©ì‹ì€ ë¶€ì¡±í•œ ì œ ì§€ì‹ìœ¼ë¡œ ìì²´ êµ¬í˜„í•œ ë°©ë²•ì´ê¸° ë•Œë¬¸ì— ë‹¤ì†Œ ì–´ì„¤í”„ê²Œ ë³´ì¼ ìˆ˜ ìˆìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p></notice>
<h2 id="firebasemessaging"><a class="anchor" href="#firebasemessaging"><span class="icon icon-link"></span></a>FirebaseMessaging</h2>
<p>ìš°ì„  FCMì„ ì‚¬ìš©í•˜ê¸° ì•ì„œ, FirebaseMessaging ê°ì²´ë¥¼ ì¡°ê¸ˆë§Œ ì‚´í´ë´…ì‹œë‹¤.</p>
<p>ì•±ì˜ ìƒíƒœ(fore/background, terminate)ì— ë”°ë¼ FCM ìˆ˜ì‹  ë°©ë²•ì´ ë‹¬ë¼ì§€ëŠ”ë°, ê° ìƒíƒœì— ë”°ë¥¸ ìˆ˜ì‹  ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li>
<p><strong>foreground</strong></p>
<p>ì•±ì´ í™”ë©´ìœ„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ê²½ìš°ì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="rehype-code-title">.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line">  <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span>onMessage<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>listenFCM<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">void</span> <span class="token function">listenFCM</span><span class="token punctuation">(</span><span class="token class-name">RemoteMessage</span><span class="token operator">?</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</span></code></pre>
</li>
<li>
<p><strong>background</strong></p>
<p>ì•±ì´ ì£½ì§€ëŠ” ì•Šì•˜ì§€ë§Œ í™”ë©´ìœ„ì— ì—†ëŠ” ê²½ìš°.<br/>
<!-- -->ì¦‰, íƒœìŠ¤í¬ë§¤ë‹ˆì ¸ ìƒì—ë§Œ ì¡´ì¬í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="rehype-code-title">.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line">  <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span>onMessageOpenedApp<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>listenFCM<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">void</span> <span class="token function">listenFCM</span><span class="token punctuation">(</span><span class="token class-name">RemoteMessage</span><span class="token operator">?</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</span></code></pre>
</li>
<li>
<p><strong>terminate</strong></p>
<p>ì•±ì´ ì™„ì „íˆ ì¢…ë£Œëœ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="rehype-code-title">.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line">  <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span><span class="token function">onBackgroundMessage</span><span class="token punctuation">(</span>onBackgroundMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">onBackgroundMessage</span><span class="token punctuation">(</span><span class="token class-name">RemoteMessage</span> message<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</span></code></pre>
<notice><p>fore/background ì™€ ë‹¤ë¥´ê²Œ, terminateì˜ ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ëŠ” static í˜•ì‹, ë˜ëŠ” ì „ì—­ìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</p></notice>
</li>
</ul>
<tip><p>fore/backgroundì˜ ê²½ìš°ì—ëŠ” onBlah getterë¥¼ ì´ìš©í•´ì„œ streamì„ ë°˜í™˜í•˜ê³ , streamì˜ listenì„ ì´ìš©í•´ì„œ streamì„ êµ¬ë…í•©ë‹ˆë‹¤.<br/>
<!-- -->ì¦‰, ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”í•œ, ìŠ¤íŠ¸ë¦¼ í˜•ì‹ìœ¼ë¡œ ì§€ì†í•´ì„œ FCMê³¼ ê°™ì€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><br/><p>ë°˜ë©´ì— terminateì˜ ê²½ìš°ì—ëŠ” ì•±ì´ ì£½ì€ ìƒíƒœì—ì„œì˜ FCM ìˆ˜ì‹ ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì—, stream í˜•ì‹ìœ¼ë¡œ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì‹ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</p></tip>
<hr/>
<h2 id="êµ¬í˜„"><a class="anchor" href="#êµ¬í˜„"><span class="icon icon-link"></span></a>êµ¬í˜„</h2>
<h3 id="state"><a class="anchor" href="#state"><span class="icon icon-link"></span></a>State</h3>
<p>Cubitì—ì„œ ê´€ë¦¬í•  ìƒíƒœ í´ë˜ìŠ¤ë¥¼ ìš°ì„  ì •ì˜í•©ë‹ˆë‹¤.</p>
<div class="rehype-code-title">fcm_cubit.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">FCMState</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">final</span> <span class="token class-name">FCMEvent</span> state<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token operator">?</span> body<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">final</span> <span class="token class-name">FCMDataModel</span><span class="token operator">?</span> data<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token class-name">FCMState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token class-name">FCMEvent</span><span class="token punctuation">.</span>none<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">factory</span> <span class="token class-name">FCMState</span><span class="token punctuation">.</span><span class="token function">fromBgMessage</span><span class="token punctuation">(</span><span class="token class-name">RemoteMessage</span><span class="token operator">?</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span>notification <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token class-name">FCMState</span><span class="token punctuation">(</span>
</span><span class="code-line">          state<span class="token punctuation">:</span> <span class="token class-name">FCMEvent</span><span class="token punctuation">.</span>message<span class="token punctuation">,</span>
</span><span class="code-line">          body<span class="token punctuation">:</span> message<span class="token punctuation">.</span>notification<span class="token operator">!</span><span class="token punctuation">.</span>body<span class="token punctuation">,</span>
</span><span class="code-line">          data<span class="token punctuation">:</span> <span class="token class-name">FCMDataModel</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">const</span> <span class="token class-name">FCMState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token metadata function">@override</span>
</span><span class="code-line">  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
</span><span class="code-line">        state<span class="token punctuation">,</span>
</span><span class="code-line">        body<span class="token punctuation">,</span>
</span><span class="code-line">        data<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p><code>FCMEvent</code>ëŠ” ìì²´ ì •ì˜í•œ í•´ë‹¹ fcmì˜ íƒ€ì…ì„ ê´€ë¦¬í•˜ëŠ” enum íƒ€ì…ì…ë‹ˆë‹¤. (option)</p>
<p><code>body</code>ëŠ” ì•±ì˜ í‘¸ì‰¬ ì•Œë¦¼ì—ì„œ ë³´ì—¬ì§€ëŠ” ë¬¸ìì—´ì„ ë³´ê´€í•˜ëŠ” ë©¤ë²„ ë³€ìˆ˜ì…ë‹ˆë‹¤.</p>
<tip><p>ê¸°ë³¸ firebase_messaging ì—ì„œ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œ, í‘¸ì‰¬ì•Œë¦¼ì€ background, terminate ìƒíƒœì—ì„œë§Œ í‘œì‹œë˜ê³ , foreground ìƒíƒœì—ì„œëŠ” í‘¸ì‰¬ì•Œë¦¼ì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (FCM ìì²´ëŠ” ìˆ˜ì‹ ë¨).</p><br/><p>ë”°ë¼ì„œ, bodyì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³ , ìƒíƒœê°€ ë³€í™”í–ˆì„ ë•Œ Snackbar ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></tip>
<p><code>FCMDataModel</code>ì€ FCMì˜ data ê°ì²´ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ìì²´ ëª¨ë¸ì…ë‹ˆë‹¤.<br/>
<!-- -->ì´ ëª¨ë¸ì€ int <code>code</code>, String <code>data</code>ì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.<br/>
<code>code</code>ëŠ” ì¼ì¢…ì˜ ì‘ë‹µì½”ë“œë¡œ, codeì— ë”°ë¼ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œì˜ ì•±ì˜ ë™ì‘ì´ ë‹¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.<br/>
<code>data</code>ëŠ” ì§ë ¬í™”ëœ ê°ì²´ì˜ json ë¬¸ìì—´ìœ¼ë¡œ, codeì— ë”°ë¼ íŒŒì‹± ë°©ë²•ì´ ë‹¬ë¼ì§€ë©°, í•„ìš”í•œ ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.</p>
<p>ëª¨ë“  FCM ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” <code>RemoteMessage</code> ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ë°›ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ê°ì²´ë¥¼ ì´ìš©í•œ ìƒì„±ìë¥¼ êµ¬í˜„í•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.</p>
<h3 id="cubit"><a class="anchor" href="#cubit"><span class="icon icon-link"></span></a>Cubit</h3>
<p>ë‹¤ìŒìœ¼ë¡œ ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ fore/backgroundëŠ” Cubit ìƒì„±ìì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ êµ¬ë…ë°›ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.</p>
<div class="rehype-code-title">fcm_cubit.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">FCMCubit</span> <span class="token keyword">extends</span> <span class="token class-name">Cubit</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FCMState</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">final</span> <span class="token class-name">String</span> _fcmToken<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token class-name">FCMCubit</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>_fcmToken<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token class-name">RemoteMessage</span><span class="token operator">?</span> bgMessage<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">FCMState</span><span class="token punctuation">.</span><span class="token function">fromBgMessage</span><span class="token punctuation">(</span>bgMessage<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// fcm listening</span>
</span><span class="code-line">    <span class="token comment">// at foground</span>
</span><span class="code-line">    <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span>onMessage<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>listenFCM<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// at background</span>
</span><span class="code-line">    <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span>onMessageOpenedApp<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>listenFCM<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// token getter</span>
</span><span class="code-line">  <span class="token class-name">String</span> <span class="token keyword">get</span> token <span class="token operator">=</span><span class="token operator">&gt;</span> _fcmToken<span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">void</span> <span class="token function">listenFCM</span><span class="token punctuation">(</span><span class="token class-name">RemoteMessage</span><span class="token operator">?</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token class-name">FCMState</span><span class="token punctuation">(</span>
</span><span class="code-line">        state<span class="token punctuation">:</span> <span class="token class-name">FCMEvent</span><span class="token punctuation">.</span>message<span class="token punctuation">,</span>
</span><span class="code-line">        body<span class="token punctuation">:</span> message<span class="token punctuation">.</span>notification<span class="token operator">?</span><span class="token punctuation">.</span>body<span class="token punctuation">,</span>
</span><span class="code-line">        data<span class="token punctuation">:</span> <span class="token class-name">FCMDataModel</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">FCMState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ fore/background ì—ì„œ FCMì´ ìˆ˜ì‹ ë  ë•Œ ë§ˆë‹¤ listenFCM ë¦¬ìŠ¤ë„ˆê°€ ì‹¤í–‰ì´ ë˜ê³ ,<br/>
<!-- -->í•´ë‹¹ ë¦¬ìŠ¤ë„ˆ ì•ˆì—ì„œ emitì„ 2íšŒ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì²« ë²ˆì§¸ emitì—ì„œëŠ” ìœ„ì—ì„œ ì •ì˜í•œ, RemoteMessageì˜ ë°ì´í„°ë¥¼ í™œìš©í•´ ì´ˆê¸°í™”ëœ FCMState ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ë˜ê³ ,<br/>
<!-- -->ë‘ ë²ˆì§¸ emitì—ì„œëŠ” init ìƒíƒœì˜ FCMState ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.</p>
<p>ë‘ ë²ˆì§¸ emitì´ í•„ìš”í•œ ì´ìœ ëŠ”, ë™ì¼í•œ FCMì´ 2ë²ˆ ì—°ì† ìˆ˜ì‹ ë˜ëŠ” ì¼ë„ ì¡´ì¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ì´ˆê¸°í™” ì‹œì¼œ 2ë²ˆ ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì‹ ì‹œì¼œ ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.</p>
<h3 id="main"><a class="anchor" href="#main"><span class="icon icon-link"></span></a>main</h3>
<p>ì´ì œ mainì—ì„œ FCM Tokenê³¼ ê¶Œí•œ ìš”ì²­, terminateì˜ ë™ì‘ì„ ì •ì˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>
<div class="rehype-code-title">main.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line"><span class="token class-name">RemoteMessage</span><span class="token operator">?</span> bgMessage<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// flutter ensure initialized</span>
</span><span class="code-line">  <span class="token class-name">WidgetsFlutterBinding</span><span class="token punctuation">.</span><span class="token function">ensureInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// request FCM permission</span>
</span><span class="code-line">  <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span>
</span><span class="code-line">    badge<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    alert<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    sound<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// listening fcm from background</span>
</span><span class="code-line">  <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span><span class="token function">onBackgroundMessage</span><span class="token punctuation">(</span>_onBackgroundMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// get fcm token</span>
</span><span class="code-line">  <span class="token class-name">String</span><span class="token operator">?</span> fcmToken <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">FirebaseMessaging</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">debugPrint</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#x27;FCM Token: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">fcmToken</span></span><span class="token string">&#x27;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">MyApp</span><span class="token punctuation">(</span>
</span><span class="code-line">    fcmToken<span class="token punctuation">:</span> fcmToken <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">&#x27;&#x27;</span></span><span class="token punctuation">,</span>
</span><span class="code-line">    bgMessage<span class="token punctuation">:</span> bgMessage<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">_onBackgroundMessage</span><span class="token punctuation">(</span><span class="token class-name">RemoteMessage</span> message<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
</span><span class="code-line">  bgMessage <span class="token operator">=</span> message<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ì œê°€ êµ¬í˜„í–ˆì„ ë•ŒëŠ”, terminate ì—ì„œì˜ FCM ìˆ˜ì‹ ì€ ì•±ì˜ ìµœì´ˆ í™”ë©´ì„ ì œì–´í•˜ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ë”°ë¼ì„œ, bgMessageì— ì„ì‹œ ë³´ê´€í•˜ì—¬ runAppìœ¼ë¡œ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.<br/>
<!-- -->ì´í›„ì— ë³„ë„ ì²˜ë¦¬ë¥¼ í†µí•´ go_routerì˜ initialRouteë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<h3 id="blocprovider"><a class="anchor" href="#blocprovider"><span class="icon icon-link"></span></a>BlocProvider</h3>
<p>ì´ì œ FCMCubitì„ BuildContextì— ë“±ë¡ì„ ì‹œí‚µì‹œë‹¤.</p>
<div class="rehype-code-title">main.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">final</span> <span class="token class-name">String</span> fcmToken<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">final</span> <span class="token class-name">RemoteMessage</span><span class="token operator">?</span> bgMessage<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span>
</span><span class="code-line">    required <span class="token keyword">this</span><span class="token punctuation">.</span>fcmToken<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>bgMessage<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token metadata function">@override</span>
</span><span class="code-line">  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token class-name">MultiRepositoryProvider</span><span class="token punctuation">(</span>
</span><span class="code-line">      providers<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      child<span class="token punctuation">:</span> <span class="token class-name">MultiBlocProvider</span><span class="token punctuation">(</span>
</span><span class="code-line">        providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token class-name">BlocProvider</span><span class="token punctuation">(</span>
</span><span class="code-line">            create<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">FCMCubit</span><span class="token punctuation">(</span>
</span><span class="code-line">              fcmToken<span class="token punctuation">,</span>
</span><span class="code-line">              bgMessage<span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">            lazy<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">        child<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>ì´ë ‡ê²Œ í•˜ë©´ Blocì„ í†µí•´ FCMì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•  ì¤€ë¹„ê°€ ëª¨ë‘ ëë‚©ë‹ˆë‹¤.</p>
<h3 id="ê²°ê³¼ë¬¼"><a class="anchor" href="#ê²°ê³¼ë¬¼"><span class="icon icon-link"></span></a>ê²°ê³¼ë¬¼</h3>
<div class="rehype-code-title">.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line highlight-line"><span class="token class-name">BlocListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FCMCubit</span><span class="token punctuation">,</span> <span class="token class-name">FCMState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
</span><span class="code-line">  listener<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>data<span class="token operator">?</span><span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot;10000&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// action for res code 10000</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>data<span class="token operator">?</span><span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&#x27;10001&#x27;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// action for res code 10001</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>data<span class="token operator">?</span><span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&#x27;10002&#x27;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// action for res code 10002</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span></code></pre>
<p>FCMì´ ìˆ˜ì‹ ë  ê²½ìš°, <code>BlocListener&lt;FCMCubit, FCMState&gt;</code>ë¥¼ í†µí•´ FCMì— ì˜í•œ stateì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ ,</p>
<div class="rehype-code-title">.dart</div><pre class="language-dart"><code class="language-dart code-highlight"><span class="code-line"><span class="token class-name">BlocProvider</span><span class="token punctuation">(</span>
</span><span class="code-line">  create<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">SignalStateBloc</span><span class="token punctuation">(</span>
</span><span class="code-line">    homeSignalBoxRepository<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HomeSignalBoxRepository</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    myIdx<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserCubit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token operator">!</span><span class="token punctuation">.</span>userIdx<span class="token operator">!</span><span class="token punctuation">,</span>
</span><span class="code-line">    jwt<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserCubit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token operator">!</span><span class="token punctuation">.</span>jwt<span class="token operator">!</span><span class="token punctuation">,</span>
</span><span class="code-line highlight-line">    fcmToken<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FCMCubit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>token<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span></code></pre>
<p>ì„œë²„ì—ì„œ FCM Tokenì´ í•„ìš”í•œ ê²½ìš° <code>FCMCubit.token</code>ì„ í†µí•´ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì˜ FCM Tokenì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Blocìœ¼ë¡œ FCMê¹Œì§€ ê´€ë¦¬ ì™„ë£Œ!</p></div><div class="w-72 hidden h-fit max-h-[calc(100vh-10rem)] lg:flex flex-col overflow-x-hidden overflow-y-scroll scrollbar-hide rounded-xl transition-all sticky top-32 bg-gradient-to-br from-blue-400 to-blue-950"><div class=""><p id="toc-header" class="py-3 font-extrabold leading-6 bg-black bg-opacity-20 text-white">ğŸ«§ í•œ ëˆˆì— ë³´ê¸°</p><ul id="toc-content" class="px-4 pb-2 mt-2 flex flex-col items-start justify-start text-sm text-start"><li><a href="#firebasemessaging" class="group block py-1  text-white hover:text-blue-200 hover:drop-shadow-base-bold">FirebaseMessaging</a></li><li><a href="#êµ¬í˜„" class="group block py-1  text-white hover:text-blue-200 hover:drop-shadow-base-bold">êµ¬í˜„</a></li><li class="ml-4"><a href="#state" class="group flex items-start py-[2px] text-white hover:text-blue-200 hover:drop-shadow-base"><svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible text-white"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>State</a></li><li class="ml-4"><a href="#cubit" class="group flex items-start py-[2px] text-white hover:text-blue-200 hover:drop-shadow-base"><svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible text-white"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>Cubit</a></li><li class="ml-4"><a href="#main" class="group flex items-start py-[2px] text-white hover:text-blue-200 hover:drop-shadow-base"><svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible text-white"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>main</a></li><li class="ml-4"><a href="#blocprovider" class="group flex items-start py-[2px] text-white hover:text-blue-200 hover:drop-shadow-base"><svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible text-white"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>BlocProvider</a></li><li class="ml-4"><a href="#ê²°ê³¼ë¬¼" class="group flex items-start py-[2px] text-white hover:text-blue-200 hover:drop-shadow-base"><svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible text-white"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>ê²°ê³¼ë¬¼</a></li></ul></div></div></section><footer class="w-full flex flex-col mt-10"><span class="text-blue-400 italic text-start">2024-01-21 / 22:41<!-- --> ì— ì‘ì„±ì„ ì‹œì‘í–ˆì–´ìš”.</span><div class="w-full flex items-start mt-5 mb-10 space-x-5"><span>Tag</span><ul class="w-full flex list-none m-0 flex-wrap gap-1"><li class="bg-gradient-to-br from-blue-500 to-blue-400 px-3 text-white rounded-md shadow-md whitespace-nowrap"># <!-- -->Firebase Cloud Message</li><li class="bg-gradient-to-br from-blue-500 to-blue-400 px-3 text-white rounded-md shadow-md whitespace-nowrap"># <!-- -->FCM</li><li class="bg-gradient-to-br from-blue-500 to-blue-400 px-3 text-white rounded-md shadow-md whitespace-nowrap"># <!-- -->BLoC</li><li class="bg-gradient-to-br from-blue-500 to-blue-400 px-3 text-white rounded-md shadow-md whitespace-nowrap"># <!-- -->Cubit</li></ul></div><div class="flex flex-col items-center mb-5"><div class="w-full bg-gradient-to-br from-blue-400 to-blue-950 mt-5 rounded-md overflow-hidden"><h3 class="bg-black bg-opacity-50 px-1 py-3"><span class="bg-gradient-to-br from-blue-600 to-blue-400 bg-clip-text text-transparent font-bold drop-shadow">Flutter &amp; Dart</span><span class="text-white">ì˜ ë‹¤ë¥¸ ê¸€</span></h3><ol class="w-full p-1 space-y-1"><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/ticker">Ticker</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/generic_freezed">Freezedì—ì„œ ì œë„¤ë¦­ ì‚¬ìš©í•˜ê¸°</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/bloc_outof_context">BLoC, context ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ê¸°</a></li><li class="w-full bg-black bg-opacity-20 rounded-md"><a class="w-full flex justify-center text-white before:content-[&#x27;ğŸ«§&#x27;] before:mr-2 after:content-[&#x27;ğŸ«§&#x27;] after:ml-2" href="/blog/flutter/fcm_with_bloc">FCM, BLoCìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/valuenotifier">ValueNotifier</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/005_dart_expert">Dart ì–¸ì–´ ë§ˆìŠ¤í„°</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/004_dart_advanced">Dart ì–¸ì–´ ì‹¬í™”</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/003_dart_basic">Dart ì–¸ì–´ ê¸°ì´ˆ</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/002_project_initalize">í”ŒëŸ¬í„° í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°</a></li><li class="w-full "><a class="w-full flex justify-center text-white " href="/blog/flutter/001_installation">í”ŒëŸ¬í„° ì‹œì‘í•˜ê¸°</a></li></ol></div></div><section class="w-full self-center"></section></footer></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"FCM, BLoCìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°","description":"FCM ì‘ë‹µì„ BLoCì„ ì´ìš©í•´ì„œ ìƒíƒœê´€ë¦¬ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.","icon":"","image":"","tags":["Firebase Cloud Message","FCM","BLoC","Cubit"],"draft":false,"date":"2024-01-21 / 22:41","content":"\nFCMì„ êµ¬í˜„í•˜ëŠ”ë° ìˆì–´, FCM ì„¸íŒ…ì´ë‚˜ ìˆ˜ì‹ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê¸€ì€ ë§ì´ ë´¤ëŠ”ë°,\nì´ë¥¼ ìƒíƒœê´€ë¦¬ì™€ ì—®ì–´ì„œ ì†Œê°œí•˜ëŠ” ê¸€ì€ ëª»ë´¤ë˜ê±° ê°™ìŠµë‹ˆë‹¤.\n\nì œ ê²½ìš°ì—ëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼ì„ í†µì¼í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê¸° ë•Œë¬¸ì—, FCM ì—­ì‹œ ìƒíƒœê´€ë¦¬ë¥¼ ì´ìš©í•´ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.\n\në˜í•œ, ì €ëŠ” Blocì„ ì• ìš©í•˜ê¸° ë•Œë¬¸ì—, ì´ë²ˆì—ëŠ” FCMì´ ìˆ˜ì‹ ë˜ë©´ Blocì„ í†µí•´ í•´ë‹¹ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.\n(ì •í™•íˆëŠ” Cubitì„ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤)\n\n\u003cnotice\u003e\n  í•´ë‹¹ ë°©ì‹ì€ ë¶€ì¡±í•œ ì œ ì§€ì‹ìœ¼ë¡œ ìì²´ êµ¬í˜„í•œ ë°©ë²•ì´ê¸° ë•Œë¬¸ì— ë‹¤ì†Œ ì–´ì„¤í”„ê²Œ ë³´ì¼ ìˆ˜ ìˆìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n\u003c/notice\u003e\n\n## FirebaseMessaging\n\nìš°ì„  FCMì„ ì‚¬ìš©í•˜ê¸° ì•ì„œ, FirebaseMessaging ê°ì²´ë¥¼ ì¡°ê¸ˆë§Œ ì‚´í´ë´…ì‹œë‹¤.\n\nì•±ì˜ ìƒíƒœ(fore/background, terminate)ì— ë”°ë¼ FCM ìˆ˜ì‹  ë°©ë²•ì´ ë‹¬ë¼ì§€ëŠ”ë°, ê° ìƒíƒœì— ë”°ë¥¸ ìˆ˜ì‹  ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\n\n- **foreground**\n\n    ì•±ì´ í™”ë©´ìœ„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ê²½ìš°ì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n    ```dart:.dart\n      FirebaseMessaging.onMessage.listen(listenFCM);\n\n      void listenFCM(RemoteMessage? message) { ... }\n    ```\n\n- **background**\n\n    ì•±ì´ ì£½ì§€ëŠ” ì•Šì•˜ì§€ë§Œ í™”ë©´ìœ„ì— ì—†ëŠ” ê²½ìš°. \n    ì¦‰, íƒœìŠ¤í¬ë§¤ë‹ˆì ¸ ìƒì—ë§Œ ì¡´ì¬í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n    ```dart:.dart\n      FirebaseMessaging.onMessageOpenedApp.listen(listenFCM);\n\n      void listenFCM(RemoteMessage? message) { ... }\n    ```\n\n- **terminate**\n\n    ì•±ì´ ì™„ì „íˆ ì¢…ë£Œëœ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n    ```dart:.dart\n      FirebaseMessaging.onBackgroundMessage(onBackgroundMessage);\n      ...\n      Future\u003cvoid\u003e onBackgroundMessage(RemoteMessage message) async { ... }\n    ```\n\n    \u003cnotice\u003e\n      fore/background ì™€ ë‹¤ë¥´ê²Œ, terminateì˜ ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ëŠ” static í˜•ì‹, ë˜ëŠ” ì „ì—­ìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.\n    \u003c/notice\u003e\n\n\u003ctip\u003e\n  fore/backgroundì˜ ê²½ìš°ì—ëŠ” onBlah getterë¥¼ ì´ìš©í•´ì„œ streamì„ ë°˜í™˜í•˜ê³ , streamì˜ listenì„ ì´ìš©í•´ì„œ streamì„ êµ¬ë…í•©ë‹ˆë‹¤.\n  ì¦‰, ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”í•œ, ìŠ¤íŠ¸ë¦¼ í˜•ì‹ìœ¼ë¡œ ì§€ì†í•´ì„œ FCMê³¼ ê°™ì€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n  \u003cbr /\u003e\n  ë°˜ë©´ì— terminateì˜ ê²½ìš°ì—ëŠ” ì•±ì´ ì£½ì€ ìƒíƒœì—ì„œì˜ FCM ìˆ˜ì‹ ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì—, stream í˜•ì‹ìœ¼ë¡œ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì‹ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n\u003c/tip\u003e\n\n---\n\n## êµ¬í˜„\n\n### State\n\nCubitì—ì„œ ê´€ë¦¬í•  ìƒíƒœ í´ë˜ìŠ¤ë¥¼ ìš°ì„  ì •ì˜í•©ë‹ˆë‹¤.\n\n```dart:fcm_cubit.dart\nclass FCMState extends Equatable {\n  final FCMEvent state;\n  final String? body;\n  final FCMDataModel? data;\n\n  const FCMState({\n    this.state = FCMEvent.none,\n    this.body,\n    this.data,\n  });\n\n  factory FCMState.fromBgMessage(RemoteMessage? message) {\n    if (message != null) {\n      if (message.notification != null) {\n        return FCMState(\n          state: FCMEvent.message,\n          body: message.notification!.body,\n          data: FCMDataModel.fromJson(message.data),\n        );\n      }\n    }\n    return const FCMState();\n  }\n\n  @override\n  List\u003cObject?\u003e get props =\u003e [\n        state,\n        body,\n        data,\n      ];\n}\n```\n\n`FCMEvent`ëŠ” ìì²´ ì •ì˜í•œ í•´ë‹¹ fcmì˜ íƒ€ì…ì„ ê´€ë¦¬í•˜ëŠ” enum íƒ€ì…ì…ë‹ˆë‹¤. (option)\n\n`body`ëŠ” ì•±ì˜ í‘¸ì‰¬ ì•Œë¦¼ì—ì„œ ë³´ì—¬ì§€ëŠ” ë¬¸ìì—´ì„ ë³´ê´€í•˜ëŠ” ë©¤ë²„ ë³€ìˆ˜ì…ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  ê¸°ë³¸ firebase_messaging ì—ì„œ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œ, í‘¸ì‰¬ì•Œë¦¼ì€ background, terminate ìƒíƒœì—ì„œë§Œ í‘œì‹œë˜ê³ , foreground ìƒíƒœì—ì„œëŠ” í‘¸ì‰¬ì•Œë¦¼ì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (FCM ìì²´ëŠ” ìˆ˜ì‹ ë¨).\n  \u003cbr /\u003e\n  ë”°ë¼ì„œ, bodyì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³ , ìƒíƒœê°€ ë³€í™”í–ˆì„ ë•Œ Snackbar ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\u003c/tip\u003e\n\n`FCMDataModel`ì€ FCMì˜ data ê°ì²´ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ìì²´ ëª¨ë¸ì…ë‹ˆë‹¤.\nì´ ëª¨ë¸ì€ int `code`, String `data`ì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.\n`code`ëŠ” ì¼ì¢…ì˜ ì‘ë‹µì½”ë“œë¡œ, codeì— ë”°ë¼ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œì˜ ì•±ì˜ ë™ì‘ì´ ë‹¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.\n`data`ëŠ” ì§ë ¬í™”ëœ ê°ì²´ì˜ json ë¬¸ìì—´ìœ¼ë¡œ, codeì— ë”°ë¼ íŒŒì‹± ë°©ë²•ì´ ë‹¬ë¼ì§€ë©°, í•„ìš”í•œ ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.\n\nëª¨ë“  FCM ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” `RemoteMessage` ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ë°›ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ê°ì²´ë¥¼ ì´ìš©í•œ ìƒì„±ìë¥¼ êµ¬í˜„í•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.\n\n### Cubit\n\në‹¤ìŒìœ¼ë¡œ ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ fore/backgroundëŠ” Cubit ìƒì„±ìì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ êµ¬ë…ë°›ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n```dart:fcm_cubit.dart\nclass FCMCubit extends Cubit\u003cFCMState\u003e {\n  final String _fcmToken;\n\n  FCMCubit(\n    this._fcmToken,\n    RemoteMessage? bgMessage,\n  ) : super(FCMState.fromBgMessage(bgMessage)) {\n    // fcm listening\n    // at foground\n    FirebaseMessaging.onMessage.listen(listenFCM);\n    // at background\n    FirebaseMessaging.onMessageOpenedApp.listen(listenFCM);\n  }\n\n  // token getter\n  String get token =\u003e _fcmToken;\n  \n  void listenFCM(RemoteMessage? message) {\n    if (message != null) {\n      emit(FCMState(\n        state: FCMEvent.message,\n        body: message.notification?.body,\n        data: FCMDataModel.fromJson(message.data),\n      ));\n    }\n    emit(const FCMState());\n  }\n}\n```\n\nì´ë ‡ê²Œ í•˜ë©´ fore/background ì—ì„œ FCMì´ ìˆ˜ì‹ ë  ë•Œ ë§ˆë‹¤ listenFCM ë¦¬ìŠ¤ë„ˆê°€ ì‹¤í–‰ì´ ë˜ê³ ,\ní•´ë‹¹ ë¦¬ìŠ¤ë„ˆ ì•ˆì—ì„œ emitì„ 2íšŒ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.\n\nì²« ë²ˆì§¸ emitì—ì„œëŠ” ìœ„ì—ì„œ ì •ì˜í•œ, RemoteMessageì˜ ë°ì´í„°ë¥¼ í™œìš©í•´ ì´ˆê¸°í™”ëœ FCMState ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ë˜ê³ ,\në‘ ë²ˆì§¸ emitì—ì„œëŠ” init ìƒíƒœì˜ FCMState ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.\n\në‘ ë²ˆì§¸ emitì´ í•„ìš”í•œ ì´ìœ ëŠ”, ë™ì¼í•œ FCMì´ 2ë²ˆ ì—°ì† ìˆ˜ì‹ ë˜ëŠ” ì¼ë„ ì¡´ì¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ì´ˆê¸°í™” ì‹œì¼œ 2ë²ˆ ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì‹ ì‹œì¼œ ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.\n\n### main\n\nì´ì œ mainì—ì„œ FCM Tokenê³¼ ê¶Œí•œ ìš”ì²­, terminateì˜ ë™ì‘ì„ ì •ì˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.\n\n```dart:main.dart\nRemoteMessage? bgMessage;\n\nvoid main() async {\n  // flutter ensure initialized\n  WidgetsFlutterBinding.ensureInitialized();\n\n  // request FCM permission\n  FirebaseMessaging.instance.requestPermission(\n    badge: true,\n    alert: true,\n    sound: true,\n  );\n\n  // listening fcm from background\n  FirebaseMessaging.onBackgroundMessage(_onBackgroundMessage);\n\n  // get fcm token\n  String? fcmToken = await FirebaseMessaging.instance.getToken();\n  debugPrint('FCM Token: $fcmToken');\n\n  runApp(MyApp(\n    fcmToken: fcmToken ?? '',\n    bgMessage: bgMessage,\n  ));\n}\n\nFuture\u003cvoid\u003e _onBackgroundMessage(RemoteMessage message) async {\n  bgMessage = message;\n}\n```\n\nì œê°€ êµ¬í˜„í–ˆì„ ë•ŒëŠ”, terminate ì—ì„œì˜ FCM ìˆ˜ì‹ ì€ ì•±ì˜ ìµœì´ˆ í™”ë©´ì„ ì œì–´í•˜ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, bgMessageì— ì„ì‹œ ë³´ê´€í•˜ì—¬ runAppìœ¼ë¡œ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.\nì´í›„ì— ë³„ë„ ì²˜ë¦¬ë¥¼ í†µí•´ go_routerì˜ initialRouteë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### BlocProvider\n\nì´ì œ FCMCubitì„ BuildContextì— ë“±ë¡ì„ ì‹œí‚µì‹œë‹¤.\n\n```dart:main.dart\nclass MyApp extends StatelessWidget {\n  final String fcmToken;\n  final RemoteMessage? bgMessage;\n\n  const MyApp({\n    super.key,\n    required this.fcmToken,\n    this.bgMessage,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiRepositoryProvider(\n      providers: [ ... ],\n      child: MultiBlocProvider(\n        providers: [\n          BlocProvider(\n            create: (context) =\u003e FCMCubit(\n              fcmToken,\n              bgMessage,\n            ),\n            lazy: false,\n          ),\n          ...\n        ],\n        child: const App(),\n      ),\n    );\n  }\n}\n```\n\nì´ë ‡ê²Œ í•˜ë©´ Blocì„ í†µí•´ FCMì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•  ì¤€ë¹„ê°€ ëª¨ë‘ ëë‚©ë‹ˆë‹¤.\n\n### ê²°ê³¼ë¬¼\n\n```dart:.dart {1}\nBlocListener\u003cFCMCubit, FCMState\u003e(\n  listener: (context, state) {\n    if (state.data?.code == \"10000\") {\n      // action for res code 10000\n    }\n    if (state.data?.code == '10001') {\n      // action for res code 10001\n    }\n    if (state.data?.code == '10002') {\n      // action for res code 10002\n    }\n  },\n  ...\n),\n```\nFCMì´ ìˆ˜ì‹ ë  ê²½ìš°, `BlocListener\u003cFCMCubit, FCMState\u003e`ë¥¼ í†µí•´ FCMì— ì˜í•œ stateì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ ,\n\n```dart:.dart {6}\nBlocProvider(\n  create: (context) =\u003e SignalStateBloc(\n    homeSignalBoxRepository: context.read\u003cHomeSignalBoxRepository\u003e(),\n    myIdx: context.read\u003cUserCubit\u003e().state.user!.userIdx!,\n    jwt: context.read\u003cUserCubit\u003e().state.user!.jwt!,\n    fcmToken: context.read\u003cFCMCubit\u003e().token,\n  ),\n),\n```\n\nì„œë²„ì—ì„œ FCM Tokenì´ í•„ìš”í•œ ê²½ìš° `FCMCubit.token`ì„ í†µí•´ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì˜ FCM Tokenì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nBlocìœ¼ë¡œ FCMê¹Œì§€ ê´€ë¦¬ ì™„ë£Œ!","slug":"flutter/fcm_with_bloc","readingMinutes":9,"wordCount":819},"posts":[{"title":"Ticker","description":"Tickerì™€ TickerProvider mixinì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.","icon":"","image":"","tags":["Ticker","TickerProvider","Controller"],"draft":false,"date":"2024-02-02 / 15:14","content":"\nFlutterë¡œ ê°œë°œí•˜ë‹¤ë³´ë©´ TabController, AnimationControllerì™€ ê°™ì€ Controllerì— `vsync: this` ë¥¼ ë°˜ë“œì‹œ ì¢…ì†ì„± ì£¼ì…í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\nì´ëŸ´ ë•Œ ë§ˆë‹¤ TickerProviderStateMixin ì„ ìƒì†ë°›ì•„ ì‚¬ìš©í•´ì„œ thisë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ëŠ”ë°, ì´ê²Œ í•­ìƒ ê¶ê¸ˆí–ˆì—ˆì£ ...\n\nê·¸ëŸ¬ë‹¤, Flutter ì• ë‹ˆë©”ì´ì…˜ì„ ê³µë¶€í•˜ë‹¤ ê·¸ ì´ìœ ë¥¼ ì•Œê²Œë˜ì—ˆê³ , ê·¸ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤.\n\n## Ticker\n\nìš°ì„  Tickerì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.\n\nTickerëŠ” ë§¤ í”„ë ˆì„ë§ˆë‹¤ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ”ë°, ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤.\n\n```dart:stateful_widget.dart {7}\nlate final Ticker _ticker;\n\n@override\nvoid initState() {\n  super.initState();\n  _ticker = Ticker(\n    (elapsed) =\u003e print(elapsed);\n  );\n  _ticker.start();\n}\n\n@override\nvoid dispose() {\n  _ticker.dispose();\n  super.dispose();\n}\n```\n\nì´ë ‡ê²Œ í•˜ë©´, ì´ ìœ„ì ¯ì´ ìœ„ì ¯íŠ¸ë¦¬ì— ì˜¬ë¼ê°€ì„œ ìƒíƒœê°€ ì»¨í…ìŠ¤íŠ¸ì— ë“±ë¡ë˜ëŠ” ìˆœê°„ë¶€í„° ë§¤ í”„ë ˆì„ë§ˆë‹¤ elapsedê°€ ì°íˆê²Œ ë©ë‹ˆë‹¤. (ëŒ€ëµ 60fps)\në§Œì•½, `_ticker.dispose()` ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ìœ„ì ¯íŠ¸ë¦¬ì—ì„œ ë‚´ë ¤ê°€ë„ Tickerê°€ ê³„ì† í•¨ìˆ˜ë¥¼ ë§¤ í”„ë ˆì„ë§ˆë‹¤ í˜¸ì¶œí•˜ê²Œ ë  ê²ë‹ˆë‹¤.\n\nì •ë¦¬í•˜ìë©´, ë§¤ í”„ë ˆì„ë§ˆë‹¤ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ í•´ì£¼ëŠ” í´ë˜ìŠ¤ê°€ Ticker ì…ë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ì™œ Tickerë¥¼ ì‚¬ìš©í•˜ëŠ” ê±¸ê¹Œìš”?\n\në°”ë¡œ **ë¶€ë“œëŸ¬ìš´ í™”ë©´ ëª¨ì…˜** ë•Œë¬¸ì…ë‹ˆë‹¤.\në§¤ í”„ë ˆì„ë§ˆë‹¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤ëŠ” ê²ƒì€, ë§¤ í”„ë ˆì„ë§ˆë‹¤ í™”ë©´ì„ ì—…ë°ì´íŠ¸ ì‹œí‚¬ ìˆ˜ë„ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.\nìì›ì„ ë§ì´ ì¡ì•„ë¨¹ê¸´ í•˜ê² ì§€ë§Œ, ìµœì í™”ë§Œ ì˜ í•œë‹¤ë©´, ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆê² ì£ !\n\n### TickerProvider\n\nì´ì œ, Tickerê°€ ë­”ì§€, ì™œ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ ì•Œì•˜ìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ê°€ì§„ ë§Œí¼, ì·¨ê¸‰ì— ì£¼ì˜í•´ì•¼ í•˜ê² ì£ ...\nìƒì„±í•˜ê³ , í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ê³ , ë°˜ë“œì‹œ dispose í•´ì•¼í•˜ëŠ”...\n\nì´ëŸ° ê³¼ì •ì„ ê°œë°œìì—ê²Œ ë§¡ê²¼ë‹¤ê°„ ë°˜ë“œì‹œ ì‹¤ìˆ˜ê°€ ë°œìƒí•  ê²ƒì…ë‹ˆë‹¤.\në”°ë¼ì„œ Tickerì˜ ì‚¬ìš©ì„ ì€ë‹‰í™” í•˜ê¸°ìœ„í•´ ìš°ì„  Tickerì„ ìƒì„±í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤(ì •í™•íˆëŠ” abstract class)ê°€ ì œê³µë˜ëŠ”ë°, ì´ê²Œ ë°”ë¡œ TickerProvider ì…ë‹ˆë‹¤.\n\n```dart:ticker.dart\nabstract class TickerProvider {\n  /// Abstract const constructor. This constructor enables subclasses to provide\n  /// const constructors so that they can be used in const expressions.\n  const TickerProvider();\n\n  /// Creates a ticker with the given callback.\n  ///\n  /// The kind of ticker provided depends on the kind of ticker provider.\n  @factory\n  Ticker createTicker(TickerCallback onTick);\n}\n\n```\n\nì´ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ createTicker êµ¬í˜„í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ë©°, ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ ì´ í•¨ìˆ˜ëŠ” Tickerë¥¼ ë°˜í™˜í•˜ê²Œ ë©ë‹ˆë‹¤.\n\nì˜ˆë¡œ ë“¤ì–´, TickerProviderì˜ êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ì¸ SingleTickerProviderStateMixinì˜ ë‚´ë¶€ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n```dart:ticker_provider.dart {5}\nmixin SingleTickerProviderStateMixin\u003cT extends StatefulWidget\u003e on State\u003cT\u003e implements TickerProvider {\n  Ticker? _ticker;\n\n  @override\n  Ticker createTicker(TickerCallback onTick) {\n    _ticker = Ticker(onTick, debugLabel: kDebugMode ? 'created by ${describeIdentity(this)}' : null);\n    _updateTickerModeNotifier();\n    _updateTicker(); // Sets _ticker.mute correctly.\n    return _ticker!;\n  }\n\n  @override\n  void dispose() {\n    _tickerModeNotifier?.removeListener(_updateTicker);\n    _tickerModeNotifier = null;\n    super.dispose();\n  }\n}\n```\n\nê°„ë‹¨í•˜ê²Œë§Œ ë³´ë©´ í•´ë‹¹ mixinì—ì„œ Ticker ìƒì„±ê³¼ ì‚­ì œì— í•„ìš”í•œ ëª¨ë“  ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003ctip\u003e\n  í•„ìš”í•œ ëª¨ë“  ê¸°ëŠ¥ ì¤‘, ê°€ì¥ ì¤‘ìš”í•œ ê¸°ëŠ¥ì€ `ìì› ê´€ë¦¬` ë¼ê³  ìƒê°ë©ë‹ˆë‹¤.\n  ì‹¤ì œë¡œ ì„¤ëª…ì˜ ìµœìƒë‹¨ì—ë„ ì–¸ê¸‰ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n  \u003e Provides a single [Ticker] that is configured to only tick while the current tree is enabled, as defined by [TickerMode].\n\n  ì¦‰, ì‚¬ìš©ì„ ê°•ì œí•˜ëŠ” ì£¼ëœ ì´ìœ ëŠ” ìœ„ì ¯ì´ ìœ„ì ¯ íŠ¸ë¦¬ì— ë“±ë¡ëœ ìƒíƒœì—ì„œë§Œ Tickerë¥¼ ì œê³µí•¨ìœ¼ë¡œì„œ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‹¤ìˆ˜ ì—†ì´ ê´€ë¦¬í•˜ê¸° ìœ„í•¨ì´ë¼ê³  ìƒê°ë©ë‹ˆë‹¤.\n\u003c/tip\u003e\n\n### Controller\n\nìƒì„±í–ˆìœ¼ë©´ ì´ë¥¼ ì‚¬ìš©í•´ì•¼ê² ì£ ?\nì´ ë•Œ, vsync ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n```dart:animation_controller.dart {12, 15}\nclass AnimationController extends Animation\u003cdouble\u003e\n  with AnimationEagerListenerMixin, AnimationLocalListenersMixin, AnimationLocalStatusListenersMixin {\n\n  AnimationController({\n    double? value,\n    this.duration,\n    this.reverseDuration,\n    this.debugLabel,\n    this.lowerBound = 0.0,\n    this.upperBound = 1.0,\n    this.animationBehavior = AnimationBehavior.normal,\n    required  TickerProvider vsync,\n  }) : assert(upperBound \u003e= lowerBound),\n       _direction = _AnimationDirection.forward {\n    _ticker = vsync.createTicker(_tick);\n    _internalSetValue(value ?? lowerBound);\n  }\n}\n```\n\nvsyncëŠ” TickerProviderë¥¼ ì¸ìë¡œ ë°›ê²Œ ë˜ëŠ”ë°, TickerProviderStateMixinì„ ìƒì†ë°›ì€ í´ë˜ìŠ¤(ìœ„ì ¯)ì—ì„œ `vsync: this` ë¥¼ ë‹¤í˜•ì„±ì˜ ì›ë¦¬ì— ì˜í•´ ì¢…ì†ì„± ì£¼ì…í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤(ìœ„ì ¯)ì˜ createTicker í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì¦‰, ControllerëŠ” ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•´ Tickerë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°, ê°œë°œìì—ê²Œ ì´ë¥¼ ë§¡ê²¼ë‹¤ê°„ ì‹¤ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ë„ ìˆê³ , ê¸°íƒ€ ì—¬ëŸ¬ ì´ìœ  ë•Œë¬¸ì— TickerProvider ë¡œë¶€í„° tickerë¥¼ ë°›ë„ë¡ êµ¬í˜„ë˜ì—ˆê³ , ê·¸ ê³¼ì •ì—ì„œ vsyncë¡œ ì¢…ì†ì„±ì„ ì£¼ì…ë°›ê²Œ ë˜ì—ˆë‹¤ê³  ì •ë¦¬í•´ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n---\n\n## Animation ì—¿ë³´ê¸°\n\nì •ë¦¬í•˜ëŠ” ì°¨ì›ì—ì„œ `_animationController.forward()` ì˜ ê³¼ì •ì„ ì¶”ì í•´ë´…ì‹œë‹¤.\n\n```dart:animation_controller.dart\nTickerFuture forward({ double? from }) {\n  _direction = _AnimationDirection.forward;\n  if (from != null) {\n    value = from;\n  }\n  return _animateToInternal(upperBound);\n}\n```\n\nì• ë‹ˆë©”ì´ì…˜ì˜ ë°©í–¥(_direction)ì„ ì„¤ì •í•˜ê³  `_animateToInternal` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n\n```dart:animation_controller.dart\nTickerFuture _animateToInternal(double target, { Duration? duration, Curve curve = Curves.linear }) {\n  double scale = 1.0;\n  if (SemanticsBinding.instance.disableAnimations) {\n    switch (animationBehavior) {\n      case AnimationBehavior.normal:\n        scale = 0.05;\n      case AnimationBehavior.preserve:\n        break;\n    }\n  }\n  Duration? simulationDuration = duration;\n  if (simulationDuration == null) {\n    final double range = upperBound - lowerBound;\n    final double remainingFraction = range.isFinite ? (target - _value).abs() / range : 1.0;\n    final Duration directionDuration =\n      (_direction == _AnimationDirection.reverse \u0026\u0026 reverseDuration != null)\n      ? reverseDuration!\n      : this.duration!;\n    simulationDuration = directionDuration * remainingFraction;\n  } else if (target == value) {\n    simulationDuration = Duration.zero;\n  }\n  stop();\n  if (simulationDuration == Duration.zero) {\n    if (value != target) {\n      _value = clampDouble(target, lowerBound, upperBound);\n      notifyListeners();\n    }\n    _status = (_direction == _AnimationDirection.forward) ?\n      AnimationStatus.completed :\n      AnimationStatus.dismissed;\n    _checkStatusChanged();\n    return TickerFuture.complete();\n  }\n  return _startSimulation(_InterpolationSimulation(_value, target, simulationDuration, curve, scale));\n}\n```\n\n`_startSimulation` ì‹¤í–‰ì— í•„ìš”í•œ ê°’ë“¤ì„ ì—°ì‚°í•˜ê³ , ê¸°ì¡´ì— ì‹¤í–‰ ì¤‘ì´ë˜ ì• ë‹ˆë©”ì´ì…˜ì„ stop í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.\nì´ í›„, `_startSimulation` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n\n```dart:animation_controller.dart {5}\nTickerFuture _startSimulation(Simulation simulation) {\n  _simulation = simulation;\n  _lastElapsedDuration = Duration.zero;\n  _value = clampDouble(simulation.x(0.0), lowerBound, upperBound);\n  final TickerFuture result = _ticker!.start();\n  _status = (_direction == _AnimationDirection.forward) ?\n    AnimationStatus.forward :\n    AnimationStatus.reverse;\n  _checkStatusChanged();\n  return result;\n}\n```\n\nì´ˆê¸° ê°’ì„ ì„¤ì •í•˜ê³  _tickerë¥¼ ì‹œì‘í•˜ëŠ” ëª¨ìŠµì…ë‹ˆë‹¤.\nì°¸ê³ ë¡œ ìœ„ ì½”ë“œë¥¼ ë³´ë©´ ì•„ì‹œê² ì§€ë§Œ, _tickerëŠ” `_tick` í•¨ìˆ˜ë¥¼ ë§¤ í”„ë ˆì„ë§ˆë‹¤ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.\në”°ë¼ì„œ `_tick` í•¨ìˆ˜ë„ ì‚´í´ë´…ì‹œë‹¤.\n\n```dart:animation_controller.dart\nvoid _tick(Duration elapsed) {\n  _lastElapsedDuration = elapsed;\n  final double elapsedInSeconds = elapsed.inMicroseconds.toDouble() / Duration.microsecondsPerSecond;\n  _value = clampDouble(_simulation!.x(elapsedInSeconds), lowerBound, upperBound);\n  if (_simulation!.isDone(elapsedInSeconds)) {\n    _status = (_direction == _AnimationDirection.forward) ?\n      AnimationStatus.completed :\n      AnimationStatus.dismissed;\n    stop(canceled: false);\n  }\n  notifyListeners();\n  _checkStatusChanged();\n}\n```\n\në§¤ í”„ë ˆì„ë§ˆë‹¤ _valueê°’ì´ ì—…ë°ì´íŠ¸ ë˜ê³ , notifyListenersë¥¼ í†µí•´ í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ëª¨ì–‘ìƒˆì…ë‹ˆë‹¤.","slug":"flutter/ticker","readingMinutes":8,"wordCount":828},{"title":"Freezedì—ì„œ ì œë„¤ë¦­ ì‚¬ìš©í•˜ê¸°","description":"API ì‘ë‹µ ëª¨ë¸ë§ì—ì„œ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ Freezed ì œë„¤ë¦­ í…Œí¬ë‹‰ì— ëŒ€í•´ ì†Œê°œí•©ë‹ˆë‹¤.","icon":"","image":"","tags":["Freezed","Generic"],"draft":false,"date":"2024-01-24 / 22:20","content":"\nê¸°ì¡´ JsonSerializableë¡œ ì•„ë˜ì™€ ê°™ì€ ì‘ë‹µì„ ëª¨ë¸ë§ í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n```json:json\n{\n  'code': 1000,\n  'message': 'ì„±ê³µ',\n  'data': { ... }\n}\n```\n\nì´ëŸ° ì‹ìœ¼ë¡œ, code, message(ì„ íƒ) ê°€ ë°˜ë“œì‹œ í¬í•¨ëœ ì‘ë‹µì´ ì˜¤ëŠ” ìƒí™©ì´ì–´ì„œ\ncode, messageë¥¼ ê°–ê³ ìˆëŠ” ResModel,\nê·¸ë¦¬ê³  ResModelì„ ìƒì†ë°›ì•„ ë§Œë“  DataModel ì´ëŸ°ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, JsonSerializableë¡œ êµ¬í˜„í–ˆë˜ ëª¨ë¸ë“¤ì„ Freezedë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\në°”ë¡œ, FreezedëŠ” ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì ..!\n\nê·¸ë˜ì„œ í•´ê²°ì±…ì„ ëª°ìƒ‰í•˜ë˜ ì¤‘ ResModelì— ì œë„¤ë¦­ íƒ€ì…ì˜ data ë©¤ë²„ë¥¼ ì¶”ê°€í•˜ë©´ ì–´ë–¤ê°€ í•˜ëŠ” ì¡°ì–¸ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.\n\nì¢‹ì€ í•´ê²°ì±…ì¸ê±° ê°™ê¸°ë„ í•˜ê³ , ë§ˆì¹¨ Freezedì— ëŒ€í•´ ë”¥í•˜ê²Œ ì•Œì•„ë³´ê³  ê³µë¶€í•  ê²¸ ì´ í•´ê²°ì±…ì„ ì ìš©í•´ë³´ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n## êµ¬í˜„\n\n### DataModel\n\nìš°ì„  Dataì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ëª¨ë¸ë§ í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n```dart:diary_model.dart\npart 'diary_model.freezed.dart';\npart 'diary_model.g.dart';\n\n@freezed\nclass DiaryModel with _$DiaryModel {\n  factory DiaryModel({\n    @JsonKey(name: 'diaryid') int? id,\n    @JsonKey(name: 'dcontent') String? content,\n    @JsonKey(name: 'dtime') DateTime? time,\n    @JsonKey(name: 'dtag') EEmotion? emotion,\n    @JsonKey(name: 'userid') int? userId,\n    @JsonKey(\n      name: 'openable',\n      fromJson: openableFromJson,\n      toJson: openableToJson,\n    )\n    bool? isOpen,\n  }) = _DiaryModel;\n\n  factory DiaryModel.fromJson(Map\u003cString, dynamic\u003e json) =\u003e\n      _$DiaryModelFromJson(json);\n}\n```\n\n`@JsonKey` ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ APIì—ì„œ ì „ë‹¬í•˜ëŠ” keyì™€ ëª¨ë¸ë§ì˜ ë³€ìˆ˜ëª…ì„ ë³€í™˜í–ˆìŠµë‹ˆë‹¤.\në˜í•œ, openable keyì˜ valueê°€ 0 or 1 ë¡œ í‘œí˜„í•˜ëŠ” bool í˜•ì‹ì´ë¼\n0 \u0026rarr; false, 1 \u0026rarr; true ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜(openableFromJson/ToJson)ë¥¼ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### ResModel\n\nê·¸ ë‹¤ìŒ ê³µí†µ ì‘ë‹µ ëª¨ë¸ì„ ë§¡ì„ ResModelì„ ì œë„¤ë¦­ìœ¼ë¡œ ëª¨ë¸ë§í•©ë‹ˆë‹¤.\n\n```dart:res_model.dart\npart 'res_model.freezed.dart';\npart 'res_model.g.dart';\n\n@Freezed(genericArgumentFactories: true)\nclass ResModel\u003cT\u003e with _$ResModel\u003cT\u003e {\n  factory ResModel({\n    required int code,\n    String? message,\n    T? data,\n  }) = _ResModel;\n\n  factory ResModel.fromJson(\n    Map\u003cString, dynamic\u003e json,\n    T Function(dynamic json) fromJsonT,\n  ) =\u003e\n      _$ResModelFromJson\u003cT\u003e(json, fromJsonT);\n}\n```\n\nì—¬ê¸°ì„œ ëˆˆì—¬ê²¨ ë´ì•¼ í•  ì ì€ fromJsonì˜ ì¸ìë¡œ fromJsonT í•¨ìˆ˜ë¥¼ ì „ë‹¬í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në³´í†µì€ fromJsonì— json ë§Œ ì¸ìë¡œ ë„˜ê¸°ëŠ”ë°, ì œë„¤ë¦­ì„ í¬í•¨í•˜ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.\në°”ë¡œ ì œë„¤ë¦­ì— í•´ë‹¹í•˜ëŠ” ê°ì²´ì˜ ì§ë ¬í™”, ì—­ì§ë ¬í™” ë¡œì§ì„ í”„ë¡œê·¸ë¨ì€ ëª¨ë¥¸ë‹¤ëŠ” ê²ƒì´ì£ .\n\në”°ë¼ì„œ í•´ë‹¹ ë¡œì§ì„ ëŒ€ì‹  ìˆ˜í–‰í•  fromJsonT í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ì¶”ê°€ë¡œ ë°›ëŠ” ê²ƒì…ë‹ˆë‹¤.\n(toJsonTëŠ” freezedì— ì˜í•´ ìë™ ìƒì„±ë˜ë©°, ë§ˆì°¬ê°€ì§€ë¡œ toJsonTë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤.)\n\nì´ë¥¼ build_runnerê°€ ì•Œë„ë¡ í•˜ê¸° ìœ„í•´ **@freezed** ì–´ë…¸í…Œì´ì…˜ ëŒ€ì‹  **@Freezed** ë¥¼ ì‚¬ìš©í•˜ë©°,\n`genericArgumentFactories`ì„ trueë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n### fromJson / toJson\n\nì´ì œ ì‹¤ì œë¡œ ì‚¬ìš©ë„ í•´ë´ì•¼ê² ì£ ?\n\n```dart:diray_repository.dart\nvar resModel = ResModel\u003cDiaryModel\u003e.fromJson(\n  res.data,\n  (json) =\u003e DiaryModel.fromJson(json),\n);\n```\n\nì²« ë²ˆì§¸ ì¸ìë¡œ APIì˜ ì‘ë‹µìœ¼ë¡œ ì˜¨ json ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.\në‘ ë²ˆì§¸ ì¸ìë¡œëŠ” ì œë„¤ë¦­ íƒ€ì…ì˜ ì—­ì§ë ¬í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ê°€ ë“¤ì–´ê°€ëŠ”ë°, ì œë„¤ë¦­ì´ DiaryModel ì´ë¯€ë¡œ, DiaryModel.fromJsonë¥¼ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.\n(ì°¸ê³ ë¡œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” json ì¸ìì—ëŠ” dataì˜ valueê°€ ì „ë‹¬ë©ë‹ˆë‹¤.)\n\ntoJsonë„ ì‚´í´ë´…ì‹œë‹¤.\n\n```dart:diray_repository.dart\nvar reqJson = resModel.toJson(\n  (model) =\u003e DiaryModel.fromJson(model),\n);\n```\n\nì¸ìë¡œëŠ” ì œë„¤ë¦­ íƒ€ì…ì˜ ì§ë ¬í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ê°€ ë“¤ì–´ê°€ëŠ”ë°, ì œë„¤ë¦­ì´ DiaryModel ì´ë¯€ë¡œ, DiaryModel.toJsonë¥¼ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.\n(ì°¸ê³ ë¡œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” model ì¸ìì—ëŠ” diaryModelì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì „ë‹¬ë©ë‹ˆë‹¤.)\n\n### ê²°ê³¼ë¬¼\n\ndataê°€ ì—†ëŠ” ê²½ìš°, ë˜ëŠ” í•„ìš” ì—†ëŠ” ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ fromJsonì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```dart:auth_interceptor.dart\nvar res = ResModel.fromJson(response.data, (json) =\u003e null);\nif (res.code == 2000) {\n  AuthBlocSingleton.bloc.add(AuthSignoutEvent());\n}\n...\n```\n\në˜í•œ, dataê°€ ìˆëŠ” ê²½ìš°, ë˜ëŠ” í•„ìš”í•œ ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ fromJsonì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```dart:diray_repository.dart\nDio dio = Dio();\ndio.interceptors.add(AuthInterceptor());\nvar res = await dio.get(\n  '/diary',\n  queryParameters: {\n    'emotion': emotion.key,\n  },\n  data: {\n    'page': page,\n  },\n);\n\nvar resModel = ResModel\u003cDiaryModel\u003e.fromJson(\n  res.data,\n  (json) =\u003e DiaryModel.fromJson(json),\n);\n```\n\nì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì„ ìµœëŒ€ë¡œ í•˜ê³ , ë¡œì§ê°„ì˜ ì˜ì¡´ì„±ì„ ìµœì†Œí™” í•˜ë„ë¡ êµ¬í˜„í•´ë³¸ ìœ ìµí•œ ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤ ã…ã….","slug":"flutter/generic_freezed","readingMinutes":5,"wordCount":469},{"title":"BLoC, context ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ê¸°","description":"BuildContext ì—†ì´ BLoCì— ì ‘ê·¼í•˜ê³ , listen í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤.","icon":"","image":"","tags":["BLoC","Singleton Pattern"],"draft":false,"date":"2024-01-24 / 19:15","content":"\në³´í†µ Blocì€ BlocProviderë¡œ context(ìœ„ì ¯íŠ¸ë¦¬)ì—ì„œ ê´€ë¦¬í•˜ê³ , `context.read\u003cBloc\u003e()` í˜•íƒœë¡œ ì½ì–´ì˜¤ì£ ?\ní•˜ì§€ë§Œ, ì´ ê²½ìš° ë¬¸ì œê°€, context ë°–ì—ì„œëŠ” Blocì— ì ‘ê·¼í•  ë°©ë²•ì´ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì œ ê²½ìš°ì—ëŠ”, dio interceptorì—ì„œ Blocì— ì ‘ê·¼í•˜ê³  ì‹¶ì€ ìƒí™©ì´ì—ˆì£ ..\n\nì´ëŸ° ìƒí™©, í˜¹ì€ ì•± ì‹¤í–‰ì‹œê°„ë™ì•ˆ ê³„ì† í•„ìš”í•œ Blocì˜ ê²½ìš° Singleton Patternì„ ì´ìš©í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ìœ ìš©í•œ ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•˜ë ¤ í•©ë‹ˆë‹¤.\n\n## BlocBuilder\n\nìš°ì„  BlocBuilder, Listernì˜ bloc íŒŒë¼ë¯¸í„°ë¥¼ ë¨¼ì € ì‚´í´ë´…ì‹œë‹¤.\në³´í†µì€ bloc íŒŒë¼ë¯¸í„°ë¥¼ nullê°’ìœ¼ë¡œ ë†”ë‘ê³  ì‚¬ìš©í•©ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ì•„ë˜ì˜ bloc ì†ŒìŠ¤ ì½”ë“œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n```dart:bloc_builder.dart {9}\nclass _BlocBuilderBaseState\u003cB extends StateStreamable\u003cS\u003e, S\u003e\n    extends State\u003cBlocBuilderBase\u003cB, S\u003e\u003e {\n  late B _bloc;\n  late S _state;\n\n  @override\n  void initState() {\n    super.initState();\n    _bloc = widget.bloc ?? context.read\u003cB\u003e();\n    _state = _bloc.state;\n  }\n  ...\n}\n```\n\në³´ì´ëŠ” ë°”ì™€ ê°™ì´, blocì´ nullê°’ì´ë©´ contextì—ì„œ, notnullì´ë©´ bloc ì—ì„œ blocì„ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.\n\nì¦‰, contextì—ì„œ blocì— ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” bloc íŒŒë¼ë¯¸í„°ì— blocì„ ì§ì ‘ ì£¼ì…ì‹œí‚¤ë©´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\nì´ë¥¼ ì‘ìš©í•´ì„œ ì½”ë“œ ì–´ë””ì—ì„œë‚˜ Singleton Patternì„ í†µí•´ì„œ blocì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n## êµ¬í˜„\n\n### Singleton\n\nìš°ì„ , context ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•  Blocì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³´ê´€í•  Singleton ê°ì²´ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.\n\n```dart\nclass AuthBlocSingleton {\n  AuthBlocSingleton._constructor();\n  static final AuthBlocSingleton _signleton = AuthBlocSingleton._constructor();\n  static AuthBlocSingleton get instance =\u003e _signleton;\n\n  static late final AuthBloc _bloc;\n  static AuthBloc get bloc =\u003e _bloc;\n\n  static initializer({required AuthenticationRepository repository}) {\n    _bloc = AuthBloc(authenticationRepository: repository);\n  }\n}\n```\n\nì´ë ‡ê²Œí•˜ë©´, AuthBlocSingleton.bloc ìœ¼ë¡œ ì½”ë“œ ì „ì—­ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n(ë¬¼ë¡  ì‚¬ìš©í•˜ê¸° ì „ì— initializer ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ë§Œ í•©ë‹ˆë‹¤)\n\n### Initialized\n\nê·¸ë¦¬ê³ , blocì— ì¢…ì†ì„±ì„ ì£¼ì…í•´ì•¼ í•˜ëŠ” ê²½ìš°, ì‚¬ìš©í•˜ê¸° ì „ì— ì£¼ì…í•˜ë„ë¡ í•©ì‹œë‹¤.\n\n```dart:app_routes.dart\n\nclass _AppRoutesState extends State\u003cAppRoutes\u003e {\n  late GoRouter _routerConfig;\n\n  @override\n  void initState() {\n    super.initState();\n\n    // Initialize AuthBloc\n    AuthBlocSingleton.initializer(\n      repository: context.read\u003cAuthenticationRepository\u003e(),\n    );\n    ...\n  }\n  ...\n}\n```\n\nì œ ê²½ìš°ì—ëŠ” repositoryë¥¼ contextì— ì£¼ì…í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, contextì— ì ‘ê·¼ ê°€ëŠ¥í•œ ìµœìƒìœ„ ìœ„ì ¯ì—ì„œ blocì— ì£¼ì…ì‹œì¼œ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### ê²°ê³¼ë¬¼\n\nì´ì œ BlocBuilder, ListenerëŠ” ì•„ë˜ì™€ ê°™ì´ ì½”ë“œ í•œ ì¤„ë§Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.\n\n```dart {2}\nBlocBuilder\u003cAuthBloc, AuthState\u003e(\n  bloc: AuthBlocSingleton.bloc,\n  builder: (context, state) {\n  ...\n```\n\nì´ë ‡ê²Œ í•˜ë©´, BlocProviderë¡œ Blocì„ ìƒì„±í•˜ì§€ ì•Šê³ ë„ Blocì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì•„ë˜ì™€ ê°™ì€ ì¥ì ë„ ì±™ê¸¸ ìˆ˜ ìˆì£ !\n1. ìœ„ì ¯íŠ¸ë¦¬ê°€ ê°€ë²¼ì›Œì§„ë‹¤.\n2. ì‹±ê¸€í†¤ìœ¼ë¡œ ì½”ë“œ ì–´ë””ì„œë‚˜ Blocì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. (state, add() ëª¨ë‘ ê°€ëŠ¥)\n\në”°ë¼ì„œ dioì˜ interceptor í´ë˜ìŠ¤ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¡œ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.\n\n```dart:auth_interceptor.dart {17}\nclass AuthInterceptor extends Interceptor {\n  ...\n  @override\n  void onResponse(\n    Response response,\n    ResponseInterceptorHandler handler,\n  ) async {\n    // Logging\n    debugPrint(\n      '[RES] [${response.requestOptions.method}] ${response.requestOptions.uri}',\n    );\n\n    // Error handling\n    var res = ResModel.fromJson(response.data, (json) =\u003e null);\n    if (res.code != 1000) {\n      if (res.code == 2000) {\n        AuthBlocSingleton.bloc.add(AuthSignoutEvent());\n      }\n      handler.reject(\n        DioException.connectionError(\n          requestOptions: response.requestOptions,\n          reason: res.message ?? Strings.unknownFail,\n          error: res,\n        ),\n      );\n      return;\n    }\n\n    handler.next(response);\n  }\n  ...\n}\n```\n\napi ì‘ë‹µ ì¤‘ jwtê´€ë ¨ ì¸ì¦ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš°, ìë™ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒ í•˜ëŠ” ë¡œì§ë„ ì´ëŸ°ì‹ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","slug":"flutter/bloc_outof_context","readingMinutes":5,"wordCount":412},{"title":"FCM, BLoCìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°","description":"FCM ì‘ë‹µì„ BLoCì„ ì´ìš©í•´ì„œ ìƒíƒœê´€ë¦¬ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.","icon":"","image":"","tags":["Firebase Cloud Message","FCM","BLoC","Cubit"],"draft":false,"date":"2024-01-21 / 22:41","content":"\nFCMì„ êµ¬í˜„í•˜ëŠ”ë° ìˆì–´, FCM ì„¸íŒ…ì´ë‚˜ ìˆ˜ì‹ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê¸€ì€ ë§ì´ ë´¤ëŠ”ë°,\nì´ë¥¼ ìƒíƒœê´€ë¦¬ì™€ ì—®ì–´ì„œ ì†Œê°œí•˜ëŠ” ê¸€ì€ ëª»ë´¤ë˜ê±° ê°™ìŠµë‹ˆë‹¤.\n\nì œ ê²½ìš°ì—ëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼ì„ í†µì¼í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê¸° ë•Œë¬¸ì—, FCM ì—­ì‹œ ìƒíƒœê´€ë¦¬ë¥¼ ì´ìš©í•´ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.\n\në˜í•œ, ì €ëŠ” Blocì„ ì• ìš©í•˜ê¸° ë•Œë¬¸ì—, ì´ë²ˆì—ëŠ” FCMì´ ìˆ˜ì‹ ë˜ë©´ Blocì„ í†µí•´ í•´ë‹¹ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.\n(ì •í™•íˆëŠ” Cubitì„ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤)\n\n\u003cnotice\u003e\n  í•´ë‹¹ ë°©ì‹ì€ ë¶€ì¡±í•œ ì œ ì§€ì‹ìœ¼ë¡œ ìì²´ êµ¬í˜„í•œ ë°©ë²•ì´ê¸° ë•Œë¬¸ì— ë‹¤ì†Œ ì–´ì„¤í”„ê²Œ ë³´ì¼ ìˆ˜ ìˆìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n\u003c/notice\u003e\n\n## FirebaseMessaging\n\nìš°ì„  FCMì„ ì‚¬ìš©í•˜ê¸° ì•ì„œ, FirebaseMessaging ê°ì²´ë¥¼ ì¡°ê¸ˆë§Œ ì‚´í´ë´…ì‹œë‹¤.\n\nì•±ì˜ ìƒíƒœ(fore/background, terminate)ì— ë”°ë¼ FCM ìˆ˜ì‹  ë°©ë²•ì´ ë‹¬ë¼ì§€ëŠ”ë°, ê° ìƒíƒœì— ë”°ë¥¸ ìˆ˜ì‹  ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\n\n- **foreground**\n\n    ì•±ì´ í™”ë©´ìœ„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ê²½ìš°ì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n    ```dart:.dart\n      FirebaseMessaging.onMessage.listen(listenFCM);\n\n      void listenFCM(RemoteMessage? message) { ... }\n    ```\n\n- **background**\n\n    ì•±ì´ ì£½ì§€ëŠ” ì•Šì•˜ì§€ë§Œ í™”ë©´ìœ„ì— ì—†ëŠ” ê²½ìš°. \n    ì¦‰, íƒœìŠ¤í¬ë§¤ë‹ˆì ¸ ìƒì—ë§Œ ì¡´ì¬í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n    ```dart:.dart\n      FirebaseMessaging.onMessageOpenedApp.listen(listenFCM);\n\n      void listenFCM(RemoteMessage? message) { ... }\n    ```\n\n- **terminate**\n\n    ì•±ì´ ì™„ì „íˆ ì¢…ë£Œëœ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n    ```dart:.dart\n      FirebaseMessaging.onBackgroundMessage(onBackgroundMessage);\n      ...\n      Future\u003cvoid\u003e onBackgroundMessage(RemoteMessage message) async { ... }\n    ```\n\n    \u003cnotice\u003e\n      fore/background ì™€ ë‹¤ë¥´ê²Œ, terminateì˜ ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ëŠ” static í˜•ì‹, ë˜ëŠ” ì „ì—­ìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.\n    \u003c/notice\u003e\n\n\u003ctip\u003e\n  fore/backgroundì˜ ê²½ìš°ì—ëŠ” onBlah getterë¥¼ ì´ìš©í•´ì„œ streamì„ ë°˜í™˜í•˜ê³ , streamì˜ listenì„ ì´ìš©í•´ì„œ streamì„ êµ¬ë…í•©ë‹ˆë‹¤.\n  ì¦‰, ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”í•œ, ìŠ¤íŠ¸ë¦¼ í˜•ì‹ìœ¼ë¡œ ì§€ì†í•´ì„œ FCMê³¼ ê°™ì€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n  \u003cbr /\u003e\n  ë°˜ë©´ì— terminateì˜ ê²½ìš°ì—ëŠ” ì•±ì´ ì£½ì€ ìƒíƒœì—ì„œì˜ FCM ìˆ˜ì‹ ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì—, stream í˜•ì‹ìœ¼ë¡œ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì‹ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\n\u003c/tip\u003e\n\n---\n\n## êµ¬í˜„\n\n### State\n\nCubitì—ì„œ ê´€ë¦¬í•  ìƒíƒœ í´ë˜ìŠ¤ë¥¼ ìš°ì„  ì •ì˜í•©ë‹ˆë‹¤.\n\n```dart:fcm_cubit.dart\nclass FCMState extends Equatable {\n  final FCMEvent state;\n  final String? body;\n  final FCMDataModel? data;\n\n  const FCMState({\n    this.state = FCMEvent.none,\n    this.body,\n    this.data,\n  });\n\n  factory FCMState.fromBgMessage(RemoteMessage? message) {\n    if (message != null) {\n      if (message.notification != null) {\n        return FCMState(\n          state: FCMEvent.message,\n          body: message.notification!.body,\n          data: FCMDataModel.fromJson(message.data),\n        );\n      }\n    }\n    return const FCMState();\n  }\n\n  @override\n  List\u003cObject?\u003e get props =\u003e [\n        state,\n        body,\n        data,\n      ];\n}\n```\n\n`FCMEvent`ëŠ” ìì²´ ì •ì˜í•œ í•´ë‹¹ fcmì˜ íƒ€ì…ì„ ê´€ë¦¬í•˜ëŠ” enum íƒ€ì…ì…ë‹ˆë‹¤. (option)\n\n`body`ëŠ” ì•±ì˜ í‘¸ì‰¬ ì•Œë¦¼ì—ì„œ ë³´ì—¬ì§€ëŠ” ë¬¸ìì—´ì„ ë³´ê´€í•˜ëŠ” ë©¤ë²„ ë³€ìˆ˜ì…ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  ê¸°ë³¸ firebase_messaging ì—ì„œ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œ, í‘¸ì‰¬ì•Œë¦¼ì€ background, terminate ìƒíƒœì—ì„œë§Œ í‘œì‹œë˜ê³ , foreground ìƒíƒœì—ì„œëŠ” í‘¸ì‰¬ì•Œë¦¼ì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (FCM ìì²´ëŠ” ìˆ˜ì‹ ë¨).\n  \u003cbr /\u003e\n  ë”°ë¼ì„œ, bodyì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³ , ìƒíƒœê°€ ë³€í™”í–ˆì„ ë•Œ Snackbar ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\u003c/tip\u003e\n\n`FCMDataModel`ì€ FCMì˜ data ê°ì²´ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ìì²´ ëª¨ë¸ì…ë‹ˆë‹¤.\nì´ ëª¨ë¸ì€ int `code`, String `data`ì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.\n`code`ëŠ” ì¼ì¢…ì˜ ì‘ë‹µì½”ë“œë¡œ, codeì— ë”°ë¼ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œì˜ ì•±ì˜ ë™ì‘ì´ ë‹¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.\n`data`ëŠ” ì§ë ¬í™”ëœ ê°ì²´ì˜ json ë¬¸ìì—´ìœ¼ë¡œ, codeì— ë”°ë¼ íŒŒì‹± ë°©ë²•ì´ ë‹¬ë¼ì§€ë©°, í•„ìš”í•œ ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.\n\nëª¨ë“  FCM ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” `RemoteMessage` ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ë°›ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ê°ì²´ë¥¼ ì´ìš©í•œ ìƒì„±ìë¥¼ êµ¬í˜„í•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.\n\n### Cubit\n\në‹¤ìŒìœ¼ë¡œ ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ fore/backgroundëŠ” Cubit ìƒì„±ìì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ êµ¬ë…ë°›ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n```dart:fcm_cubit.dart\nclass FCMCubit extends Cubit\u003cFCMState\u003e {\n  final String _fcmToken;\n\n  FCMCubit(\n    this._fcmToken,\n    RemoteMessage? bgMessage,\n  ) : super(FCMState.fromBgMessage(bgMessage)) {\n    // fcm listening\n    // at foground\n    FirebaseMessaging.onMessage.listen(listenFCM);\n    // at background\n    FirebaseMessaging.onMessageOpenedApp.listen(listenFCM);\n  }\n\n  // token getter\n  String get token =\u003e _fcmToken;\n  \n  void listenFCM(RemoteMessage? message) {\n    if (message != null) {\n      emit(FCMState(\n        state: FCMEvent.message,\n        body: message.notification?.body,\n        data: FCMDataModel.fromJson(message.data),\n      ));\n    }\n    emit(const FCMState());\n  }\n}\n```\n\nì´ë ‡ê²Œ í•˜ë©´ fore/background ì—ì„œ FCMì´ ìˆ˜ì‹ ë  ë•Œ ë§ˆë‹¤ listenFCM ë¦¬ìŠ¤ë„ˆê°€ ì‹¤í–‰ì´ ë˜ê³ ,\ní•´ë‹¹ ë¦¬ìŠ¤ë„ˆ ì•ˆì—ì„œ emitì„ 2íšŒ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.\n\nì²« ë²ˆì§¸ emitì—ì„œëŠ” ìœ„ì—ì„œ ì •ì˜í•œ, RemoteMessageì˜ ë°ì´í„°ë¥¼ í™œìš©í•´ ì´ˆê¸°í™”ëœ FCMState ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ë˜ê³ ,\në‘ ë²ˆì§¸ emitì—ì„œëŠ” init ìƒíƒœì˜ FCMState ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.\n\në‘ ë²ˆì§¸ emitì´ í•„ìš”í•œ ì´ìœ ëŠ”, ë™ì¼í•œ FCMì´ 2ë²ˆ ì—°ì† ìˆ˜ì‹ ë˜ëŠ” ì¼ë„ ì¡´ì¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ì´ˆê¸°í™” ì‹œì¼œ 2ë²ˆ ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì‹ ì‹œì¼œ ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.\n\n### main\n\nì´ì œ mainì—ì„œ FCM Tokenê³¼ ê¶Œí•œ ìš”ì²­, terminateì˜ ë™ì‘ì„ ì •ì˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.\n\n```dart:main.dart\nRemoteMessage? bgMessage;\n\nvoid main() async {\n  // flutter ensure initialized\n  WidgetsFlutterBinding.ensureInitialized();\n\n  // request FCM permission\n  FirebaseMessaging.instance.requestPermission(\n    badge: true,\n    alert: true,\n    sound: true,\n  );\n\n  // listening fcm from background\n  FirebaseMessaging.onBackgroundMessage(_onBackgroundMessage);\n\n  // get fcm token\n  String? fcmToken = await FirebaseMessaging.instance.getToken();\n  debugPrint('FCM Token: $fcmToken');\n\n  runApp(MyApp(\n    fcmToken: fcmToken ?? '',\n    bgMessage: bgMessage,\n  ));\n}\n\nFuture\u003cvoid\u003e _onBackgroundMessage(RemoteMessage message) async {\n  bgMessage = message;\n}\n```\n\nì œê°€ êµ¬í˜„í–ˆì„ ë•ŒëŠ”, terminate ì—ì„œì˜ FCM ìˆ˜ì‹ ì€ ì•±ì˜ ìµœì´ˆ í™”ë©´ì„ ì œì–´í•˜ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, bgMessageì— ì„ì‹œ ë³´ê´€í•˜ì—¬ runAppìœ¼ë¡œ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.\nì´í›„ì— ë³„ë„ ì²˜ë¦¬ë¥¼ í†µí•´ go_routerì˜ initialRouteë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### BlocProvider\n\nì´ì œ FCMCubitì„ BuildContextì— ë“±ë¡ì„ ì‹œí‚µì‹œë‹¤.\n\n```dart:main.dart\nclass MyApp extends StatelessWidget {\n  final String fcmToken;\n  final RemoteMessage? bgMessage;\n\n  const MyApp({\n    super.key,\n    required this.fcmToken,\n    this.bgMessage,\n  });\n\n  @override\n  Widget build(BuildContext context) {\n    return MultiRepositoryProvider(\n      providers: [ ... ],\n      child: MultiBlocProvider(\n        providers: [\n          BlocProvider(\n            create: (context) =\u003e FCMCubit(\n              fcmToken,\n              bgMessage,\n            ),\n            lazy: false,\n          ),\n          ...\n        ],\n        child: const App(),\n      ),\n    );\n  }\n}\n```\n\nì´ë ‡ê²Œ í•˜ë©´ Blocì„ í†µí•´ FCMì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•  ì¤€ë¹„ê°€ ëª¨ë‘ ëë‚©ë‹ˆë‹¤.\n\n### ê²°ê³¼ë¬¼\n\n```dart:.dart {1}\nBlocListener\u003cFCMCubit, FCMState\u003e(\n  listener: (context, state) {\n    if (state.data?.code == \"10000\") {\n      // action for res code 10000\n    }\n    if (state.data?.code == '10001') {\n      // action for res code 10001\n    }\n    if (state.data?.code == '10002') {\n      // action for res code 10002\n    }\n  },\n  ...\n),\n```\nFCMì´ ìˆ˜ì‹ ë  ê²½ìš°, `BlocListener\u003cFCMCubit, FCMState\u003e`ë¥¼ í†µí•´ FCMì— ì˜í•œ stateì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ ,\n\n```dart:.dart {6}\nBlocProvider(\n  create: (context) =\u003e SignalStateBloc(\n    homeSignalBoxRepository: context.read\u003cHomeSignalBoxRepository\u003e(),\n    myIdx: context.read\u003cUserCubit\u003e().state.user!.userIdx!,\n    jwt: context.read\u003cUserCubit\u003e().state.user!.jwt!,\n    fcmToken: context.read\u003cFCMCubit\u003e().token,\n  ),\n),\n```\n\nì„œë²„ì—ì„œ FCM Tokenì´ í•„ìš”í•œ ê²½ìš° `FCMCubit.token`ì„ í†µí•´ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì˜ FCM Tokenì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nBlocìœ¼ë¡œ FCMê¹Œì§€ ê´€ë¦¬ ì™„ë£Œ!","slug":"flutter/fcm_with_bloc","readingMinutes":9,"wordCount":819},{"title":"ValueNotifier","description":"setState ì—†ì´ ì¼ë¶€ë¶„ë§Œ ë¦¬ëœë”ë§ í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ValueNotifier, ValueListenableBuilder ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.","icon":"","image":"","tags":["ValueNotifier","ValueListenableBuilder"],"draft":false,"date":"2024-01-17 / 15:08","content":"\nì €ëŠ” ê²Œì„ì´ë‚˜, ê¹ƒí—ˆë¸Œ(ê¹ƒí—ˆë¸Œ ì„œë¹„ìŠ¤ ê·¸ ìì²´)ì—ì„œ ì˜ê°ì„ ë§ì´ ì–»ëŠ” í¸ì…ë‹ˆë‹¤.\nê·¸ ì¤‘ì— ê¹ƒí—ˆë¸Œ ì•±ì—ì„œ ê¼­ ë”°ë¼í•´ë³´ê³  ì‹¶ì€ UIê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n![github_app](/posts/valuenotifier/github_app.gif)\n\në°”ë¡œ AppBarê°€ ìŠ¤í¬ë¡¤í•¨ì— ë”°ë¼ ì›€ì§ì´ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ì£ !\n\nê·¸ë˜ì„œ êµ¬ê¸€ë§ í•´ë³´ë‹ˆê¹Œ ScrollControllerì™€ `ValueNotifier` ë§Œ ìˆìœ¼ë©´ ì‰½ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í–ˆê¸°ì— ì˜¤ëŠ˜ì€ ì´ ë°©ë²•ì— ëŒ€í•´ ì ì–´ë³´ë ¤ í•©ë‹ˆë‹¤.\n\n## ValueNotifier\n\n[ê³µì‹ë¬¸ì„œ](https://api.flutter.dev/flutter/foundation/ValueNotifier-class.html) ì˜ ë‚´ìš©ì„ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n\u003e ChangeNotifierë¥¼ ìƒì† ë°›ì•˜ìœ¼ë©°, ë‹¨ì¼ valueë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤.\n\u003e oldValueì™€ newValueë¥¼ == ì—°ì‚°ìë¥¼ í†µí•´ ë¹„êµí•˜ë©°,\n\u003e ê·¸ ê°’ì´ ë‹¤ë¥¼ ê²½ìš° listener ì—ê²Œ notify í•˜ê²Œ ë©ë‹ˆë‹¤. (notifyListenersë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹)\n\në”°ë¼ì„œ ValueNotifierëŠ” ì¼ì¢…ì˜ observer patternìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆê¸° ë–„ë¬¸ì— stateful widgetì˜ ìƒíƒœì£¼ê¸°ì— ì˜í•´ ì œì–´ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n### ValueListenableBuilder\n\nì´ ìœ„ì ¯ì€ í•„ìˆ˜ë¡œ valueListenable ì¸ìë¥¼ ë°›ê²Œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.\nì´ ì¸ìë¡œëŠ” ë°˜ë“œì‹œ Listenable ì„ ìƒì†ë°›ì€ `ValueListenable` ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ ë•Œ, ValueNotifierëŠ” **ValueListenableì˜ êµ¬í˜„ì²´**ì´ê¸° ë•Œë¬¸ì— ValueNotifierë¥¼ ì¸ìë¡œ ë„˜ê²¨ì£¼ë©´ ì´ ë¹Œë” ìœ„ì ¯ì´ ValueNotifier ìƒíƒœê°€ ë³€í™”í•˜ë©´ ì•Œì•„ì„œ ì´ ë¶€ë¶„ë§Œ ì¬ëœë”ë§ í•˜ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n```dart:value_listenable_builder.dart\n@override\nvoid didUpdateWidget(ValueListenableBuilder\u003cT\u003e oldWidget) {\n  super.didUpdateWidget(oldWidget);\n  if (oldWidget.valueListenable != widget.valueListenable) {\n    oldWidget.valueListenable.removeListener(_valueChanged);\n    value = widget.valueListenable.value;\n    widget.valueListenable.addListener(_valueChanged);\n  }\n}\n\nvoid _valueChanged() {\n  setState(() { value = widget.valueListenable.value; });\n}\n```\n\nì‹¤ì œë¡œ ìœ„ì ¯ì„ ê¹Œ(?)ë³´ë©´ valueListenableì´ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ stateful ìœ„ì ¯ì´ ì¬ëœë”ë§ ë¨ì„ ë³¼ ìˆ˜ ìˆì—ˆë„¤ìš”!\n\n---\n\n## êµ¬í˜„\n\nì´ì œ ì´ë¡ ì ì¸ ë‚´ìš©ì€ ë‹¤ë¤„ë´¤ìœ¼ë‹ˆ ì‹¤ì œë¡œ êµ¬í˜„ì„ í•´ë´…ì‹œë‹¤.\n\n### ì»¨íŠ¸ë¡¤ëŸ¬\n\n```dart:myinfo_screen.dart {4, 5}\nclass _MyinfoScreenState extends State\u003cMyinfoScreen\u003e {\n  static const double _expandedHeight = 250;\n  static const double _appbarHeight = Sizes.size52;\n  late ScrollController _scrollController;\n  final ValueNotifier\u003cdouble\u003e _titleBottomPadding = ValueNotifier(0);\n\n  @override\n  void initState() {\n    super.initState();\n    _scrollController = ScrollController();\n    _scrollController.addListener(_scrollListener);\n  }\n```\n\nìš°ì„  ScrollControllerì™€ ValueNotifierë¥¼ ìƒì„± ë° ì´ˆê¸°í™” í•´ì¤ë‹ˆë‹¤.\ndisposeë„ ìŠì§€ ë§ˆì„¸ìš”!\n\n### ìœ„ì ¯\n\n```dart:myinfo_screen.dart {6, 19}\noverride\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: ValueListenableBuilder(\n          valueListenable: _titleBottomPadding,\n          builder: (context, value, child) =\u003e AnimatedContainer(\n            duration: const Duration(milliseconds: 1),\n            margin: EdgeInsets.only(\n              bottom: value * 2,\n              top: _appbarHeight,\n            ),\n            child: child,\n          ),\n          child: ... \n        ),\n      ),\n      body: CustomScrollView(\n        controller: _scrollController,\n      ...\n```\n\nê·¸ë¦¬ê³ , ìŠ¤í¬ë¡¤ì´ ë˜ëŠ” ìœ„ì ¯ì—ëŠ” ScrollController ê°ì²´ë¥¼ ë„£ì–´ì£¼ê³ ,\nìŠ¤í¬ë¡¤ì— ë”°ë¼ ì• ë‹ˆë©”ì´ì…˜ ë˜ì–´ì•¼ í•  ë¶€ë¶„ì€ ValueListenableBuilder ìœ„ì ¯ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.\nì´ ë–„, valueListenableì˜ ì¸ìë¡œ ValueNotifier ê°ì²´ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  ì—¬ê¸°ì„œ ValueListenableBuilderì˜ builder í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¤ëŠ” valueë¡œ\n  ValueNotifierì— ë³´ê´€ë˜ì–´ìˆëŠ” valueì˜ ê°’ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\u003c/tip\u003e\n\n### ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\n\n```dart:myinfo_screen.dart\nvoid _scrollListener() {\n  const ratio = 0.3;\n  if (_expandedHeight - _appbarHeight * ratio \u003e _scrollController.offset) {\n    _titleBottomPadding.value = 0;\n  }\n  if (_expandedHeight - _appbarHeight * ratio \u003c= _scrollController.offset \u0026\u0026\n      _expandedHeight + _appbarHeight * (1 - ratio) \u003e=\n          _scrollController.offset) {\n    _titleBottomPadding.value =\n        _scrollController.offset - _expandedHeight + _appbarHeight * ratio;\n  }\n  if (_expandedHeight + _appbarHeight * (1 - ratio) \u003c\n      _scrollController.offset) {\n    _titleBottomPadding.value = _appbarHeight;\n  }\n}\n```\n\në§ˆì§€ë§‰ìœ¼ë¡œ ScrollControllerì˜ listener í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ë©´ ê¹ƒí—ˆë¸Œ ì•± AppBar êµ¬í˜„ ì™„ë£Œ!\n\n### ê²°ê³¼ë¬¼\n\n![my_app](/posts/valuenotifier/my_app.gif)\n\në¼ì´ë¸ŒëŸ¬ë¦¬ ì•ˆì“°ê³  ì§ì ‘ êµ¬í˜„í•˜ê³ , ì½”ë“œ ë¶„ì„í•´ë³´ëŠ”...\nì¡°ê¸ˆì€ ì„±ì¥í•˜ëŠ” ë§›ì´ ìˆëŠ” ì‹œê°„ì´ì—ˆìŠµë‹ˆë‹¤ ã…ã…","slug":"flutter/valuenotifier","readingMinutes":4,"wordCount":425},{"title":"Dart ì–¸ì–´ ë§ˆìŠ¤í„°","description":"Dart ì–¸ì–´ì— ëŒ€í•œ ë³´ë‹¤ ì‹¬í™”ëœ ë‚´ìš©ì„ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤.","icon":"","image":"","tags":["Dart","factory","get","set","stream","async*","yield","mixin","with"],"draft":false,"date":"2023-09-25 / 14:55","content":"\n## factory constructor\n\n`factory` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ê³  ê³µì‹ë¬¸ì„œì— ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤.\n\n1. ì¸ìŠ¤í„´ìŠ¤ë¥¼ `ìºì‹œì—ì„œ ë°˜í™˜`í•˜ì—¬ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•œ ë²ˆë§Œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. (ì¼ì¢…ì˜ Singleton íŒ¨í„´ êµ¬í˜„ë²•)\n2. ìƒì„±ìì—ì„œ `ì„œë¸Œ í´ë˜ìŠ¤`(ìƒì† ë°›ì€ í´ë˜ìŠ¤)ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në‘˜ ë‹¤ ì‹ ê¸°í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. (ë‹¤ë§Œ ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì ì¬ì ì†Œì¸ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë„¤ìš”..)\n1ë²ˆë¶€í„° ì•Œì•„ë´…ì‹œë‹¤.\n\n### caching\n\n```dart:.dart\nclass Singleton {\n  static final Singleton _instance = Singleton._internal();\n\n  Singleton._internal() {}\n\n  factory Singleton() {\n    return _instance;\n  }\n\n  void getHash() {\n    print(this.hashCode);\n  }\n}\n\nvoid main() {\n  Singleton s1 = new Singleton();\n  Singleton s2 = new Singleton();\n\n  s1.getHash(); // 302000605\n  s2.getHash(); // 302000605\n}\n```\n\nìœ„ì™€ ê°™ì´ êµ¬í˜„í•œë‹¤ë©´, Singleton í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” `ë‹¨ í•œê°œ`ë§Œ ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤.\ní´ë˜ìŠ¤ ë¡œë“œ ì‹œì ì— staticìœ¼ë¡œ ì´ë¯¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì´ì£ .\ní•˜ì§€ë§Œ ì´ëŸ° ì‚¬ìš©ìš©ë²•ì€ ì˜ë¯¸ê°€ ì—†ì–´ë³´ì…ë‹ˆë‹¤.\nì°¨ë¼ë¦¬ ì•„ë˜ì˜ ì˜ˆì‹œê°€ ë” ì˜ë¯¸ ìˆì–´ë³´ì…ë‹ˆë‹¤.\n\n```dart:.dart\nclass SingletonLog {\n  final String value;\n\n  static final Map\u003cString, SingletonLog\u003e _cache = {};\n\n  SingletonLog._internal(this.value);\n\n  factory SingletonLog(String value) {\n    return _cache.putIfAbsent(value, () =\u003e SingletonLog._internal(value));\n  }\n\n  void getHash() {\n    print(this.hashCode);\n  }\n\n  String getValue() {\n    return value;\n  }\n\n  Map\u003cString, String\u003e getLogs() {\n    Map\u003cString, String\u003e result = {};\n    _cache.forEach((key, value) {\n      result[key] = value.value;\n    });\n    return result;\n  }\n}\n\nvoid main() {\n  SingletonLog s1 = new SingletonLog('log1');\n  SingletonLog s2 = new SingletonLog('log2');\n\n  s1.getHash();        // 888013580\n  s2.getHash();        // 870182876\n\n  print(s1.value);     // log1\n  print(s2.value);     // log2\n\n  print(s1.getLogs()); // {log1: log1, log2: log2}\n  print(s2.getLogs()); // {log1: log1, log2: log2}\n}\n```\n\nì´ë ‡ê²Œ í•˜ë©´ s1, s2ê°€ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜ë°›ê¸° ë•Œë¬¸ì—, ì–´ë””ì—ì„œ ë¡œê·¸ë¥¼ ì¶”ê°€í•´ë„ ëª¨ë“  ê°ì²´ê°€ ê°™ì€ ë¡œê·¸ê¸°ë¡ì„ ë³´ê´€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003ctip\u003e\n  ê·¸ëŸ¼ ì´ëŸ° ì˜ë¬¸ì´ ë“­ë‹ˆë‹¤.\n  hashCodeê°€ ë‹¤ë¥´ê²Œ ë‚˜ì˜¤ëŠ”ë°, ê·¸ëŸ¼ ë‹¤ë¥¸ ê°ì²´ ì•„ë‹Œê°€ìš”?\n  \u003cbr /\u003e\n  ì‹¤ì œë¡œ s1 == s2ì˜ ê°’ì€ `false`ì…ë‹ˆë‹¤. ë”°ë¼ì„œ `ë‹¤ë¥¸ ê°ì²´`ê°€ ë§ìŠµë‹ˆë‹¤.\n  í•˜ì§€ë§Œ **ì•½ê°„ ë³€í˜•**ì´ ì´ë£¨ì–´ì§€ê¸´ í–ˆìœ¼ë‚˜, `ì‹±ê¸€í†¤ íŒ¨í„´` ì—­ì‹œ ë§ìŠµë‹ˆë‹¤.\n  \u003cbr /\u003e\n  ì™œëƒí•˜ë©´, ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±ì„ **í´ë˜ìŠ¤ ë‚´ë¶€**ì—ì„œ `_internal`ë¡œ ìƒì„±í•˜ê³ , ìƒì„±ìë¥¼ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•˜ì§€ ëª»í•©ë‹ˆë‹¤.\n  ë˜í•œ, staticìœ¼ë¡œ ì„ ì–¸ëœ `_cache` ë‚´ë¶€ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³´ê´€í•˜ê¸° ë•Œë¬¸ì— _cacheë¥¼ í†µí•´ì„œ **ì „ì—­ì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ **í•˜ê²Œ ë©ë‹ˆë‹¤.\n  \u003cbr /\u003e\n  ê·¸ë ‡ë‹¤ê³  í•­ìƒ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.\n  ì‹¤ì œë¡œ, s2ë¥¼ ìƒì„±í•  ë•Œ, s1ê³¼ ë™ì¼í•˜ê²Œ `'log1'`ì„ ì£¼ì…ì‹œí‚¤ë©´ s1, s2 ë™ì¼í•œ hashCodeë¥¼ ê°–ê²Œ ë©ë‹ˆë‹¤.\n  ì™œëƒí•˜ë©´, factory ìƒì„±ìëŠ” ì¼ë‹¨ ìºì‹œë˜ì–´ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì—,\n  _cache ë‚´ë¶€ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•˜ê³  ìˆê³ , s1, s2 ëª¨ë‘ ê°™ì€ ë°ì´í„°ë¥¼ ê°–ê³  ìˆê¸°ì— ë©”ëª¨ë¦¬ì£¼ì†Œ ì—­ì‹œ ê°™ì•„ì§‘ë‹ˆë‹¤.\n\u003c/tip\u003e\n\n### return subclass constructor\n\nê·¸ëŸ¼ 2ë²ˆë„ ì•Œì•„ë´ì•¼ê² ì£ ?\n\n```dart:.dart\nclass Human {\n  final String name;\n\n  Human(this.name);\n\n  factory Human.create(String name, {required bool isMan}) {\n    if (isMan) {\n      return Male(name);\n    }\n    return Female(name);\n  }\n}\n\nclass Male extends Human {\n  Male(String name) : super(name);\n}\n\nclass Female extends Human {\n  Female(String name) : super(name);\n}\n\nvoid main() {\n  Human man = new Human.create('h1', isMan: true);\n  Human woman = new Human.create('h2', isMan: false);\n\n  print(man.name);   // h1\n  print(woman.name); // h2\n}\n```\n\nì´ ë°©ì‹ì€ ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ ë‹¤í˜•ì„±ì˜ ì›ë¦¬ë¥¼ ì¶©ì¡±ì‹œí‚¤ê¸°ì— ì¢‹ì€ ë¬¸ë²•ì…ë‹ˆë‹¤.\n\nì‹ ê¸°í•œ ì ì€ ë¶€ëª¨ í´ë˜ìŠ¤ ìƒì„±ìì—ì„œ ìì‹ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ ë°˜í™˜í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.\nì´ë ‡ê²Œí•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œì ì— ì¡°ê±´ì„ ë‹¬ì•„ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.\n_(ìƒíƒœë‚˜ ì´ë²¤íŠ¸ë¥¼ í´ë˜ìŠ¤ë¡œ ê´€ë¦¬í•  ë•Œ ìœ ìš©í•´ ë³´ì´ë„¤ìš”!)_\n\n### constructor body\n\nì‚¬ì‹¤ ê³µì‹ë¬¸ì„œì—ëŠ” ìì„¸íˆ ì„¤ëª…í•˜ì§„ ì•Šì§€ë§Œ, factory ìƒì„±ìì˜ ê°€ì¥ í° ì´ì ì€ `final variable`ì„ ìƒì„±ìì—ì„œ `initialize list`ë¡œ **ì´ˆê¸°í™”í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ** ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\nì •í™•íˆ ë§í•˜ìë©´, ìƒì„±ìë¥¼ ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•¨ìœ¼ë¡œì„œ ìƒì„±ì í˜¸ì¶œ ì „, `ì „ì²˜ë¦¬`ë¥¼ í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ì´ì ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\n\nì˜ˆì‹œë¥¼ ë´ì•¼ê² ì£ ?\n\n```dart:.dart {7-10}\nclass Human {\n  final String name;\n\n  Human(this.name);\n\n  // Human.withSir(String name) : this.name = 'Sir - ' + name;\n  factory Human.withSir(String name) {\n    String newName = 'Sir - ' + name;\n    return Human(newName);\n  }\n}\n\nvoid main() {\n  Human man = new Human.withSir('h1');\n\n  print(man.name);\n}\n```\n\nìœ„ ì½”ë“œì—ì„œ ì£¼ì„ì²˜ë¦¬ ëœ ë¶€ë¶„ê³¼ í•˜ì´ë¼ì´íŠ¸ ëœ ë¶€ë¶„ ëª¨ë‘ ë™ì¼í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\nì§€ê¸ˆì€ ê°„ë‹¨í•˜ê²Œ ë¬¸ìì—´ ì•ì— `Sir - `ì„ ë¶™ì´ë„ë¡ í–ˆì§€ë§Œ, ë§Œì•½ ë°°ì—´ì„ ì§ë ¬í™” í•´ì•¼í•˜ëŠ” ìƒí™©ì´ë¼ë©´?\ní•œ ì¤„ë¡œ ì²˜ë¦¬í•˜ê¸° ë³µì¡í•œ ê¸°ëŠ¥ì€ ë¶„ëª… ì¼ë°˜ ìƒì„±ìì˜ initialize listë¡œ ì²˜ë¦¬í•˜ëŠ”ë´ í•œê³„ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  í•œ ì¤„ë¡œ ì²˜ë¦¬í•˜ê¸° ë³µì¡í•œ ì½”ë“œëŠ” ì˜ˆë¡œë“¤ì–´ `json serialize` ë¶€ë¶„ì´ ìˆê² ì£ ?\n  \u003cbr /\u003e\n  ê·¸ë˜ì„œ ìš°ë¦¬ê°€ ë¬´ì˜ì‹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë˜ factoryê°€ ì‚¬ì‹¤ì€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ í¸-ì•ˆí•˜ê²Œ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í–ˆë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤!\n\u003c/tip\u003e\n\n---\n\n## get, set\n\ngetter, setter ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ê°ì²´ì˜ ê°€ìƒ ë©¤ë²„ë³€ìˆ˜(`property`)ë¥¼ ì½ê³  ì“°ëŠ”ê²Œ ê°€ëŠ¥í•´ì§„ë‹¤ëŠ” ê±´ ë‹¤ë¥¸ ê°ì²´ì§€í–¥ ì–¸ì–´ì—ë„ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.\ndartì—ì„  ì´ë¥¼ ê°€ëŠ¥ì¼€ í•˜ëŠ” í‚¤ì›Œë“œê°€ `get`, `set` ì…ë‹ˆë‹¤.\n\nê³µì‹ë¬¸ì„œì— ìˆëŠ” ì½”ë“œë¥¼ ë¶„ì„í•´ë´…ì‹œë‹¤.\n\n```dart:.dart\nclass Rectangle {\n  double left, top, width, height;\n\n  Rectangle(this.left, this.top, this.width, this.height);\n\n  // right, bottom ì´ë¼ëŠ” ë‘ ê°œì˜ ê³„ì‚°ëœ í”„ë¡œí¼í‹° ì •ì˜.\n  double get right =\u003e left + width;\n  set right(double value) =\u003e left = value - width;\n  double get bottom =\u003e top + height;\n  set bottom(double value) =\u003e top = value - height;\n}\n\nvoid main() {\n  var rect = Rectangle(3, 4, 20, 15);\n\n  print(rect.right); // 23.0\n  print(rect.left);  // 3.0\n  rect.right = 20;\n  print(rect.right); // 20.0\n  print(rect.left);  // 0.0\n}\n```\n\nì œ ê°œì¸ì ì¸ ìƒê°ì—ëŠ” getì€ ê°€ìƒì˜ ë©¤ë²„ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì´ë¥¼ ì‚¬ìš©í•˜ê²Œ í•´ì£¼ê³ ,\nsetì€ ì´ ê°€ìƒì˜ ë©¤ë²„ë³€ìˆ˜ë¥¼ ìœ„í•´ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì„ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë³„ë„ë¡œ ì²˜ë¦¬í•˜ê²Œ í•´ì¤€ë‹¤ê°€ ì£¼ëœ ì‚¬ìš©ë²•ì¸ê±° ê°™ìŠµë‹ˆë‹¤.\n\n\u003cnotice\u003e\n  ì œê°€ `ê°€ìƒ`ì˜ ë©¤ë²„ë³€ìˆ˜ë¼ê³  í‘œí˜„í•œ ì´ìœ ëŠ”, getìœ¼ë¡œ ì •ì˜ëœ ë³€ìˆ˜ëŠ” ê·¸ ìì²´ê°€ íŠ¹ì • ê°’ì„ ì €ì¥í•  ìˆ˜ ì—†ê³ , ë³„ë„ë¡œ ì •ì˜ëœ ë©¤ë²„ë³€ìˆ˜ì— ì˜ì¡´í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\u003c/notice\u003e\n\n### interface\n\nê·¸ë ‡ë‹¤ë©´ get, setì„ ì–¸ì œ ì‚¬ìš©í•´ì•¼ ì˜ ì‚¬ìš©í•œê±¸ê¹Œìš”?\në³´í†µì€ ë©¤ë²„ë³€ìˆ˜ë¥¼ `ì€ë‹‰í™”`í•˜ê³  ì´ë¥¼ `ì ‘ê·¼ì œì–´`ë¥¼ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ëŒ€ë¶€ë¶„ì¼ ê²ƒì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ê°œì¸ì ìœ¼ë¡œ `ì¸í„°í˜ì´ìŠ¤`ë¥¼ êµ¬í˜„í•  ë•Œ ì—­ì‹œ getì˜ ì ì ˆí•œ ì‚¬ìš©ì²˜ë¼ê³  ê°œì¸ì ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ë´…ì‹œë‹¤.\n\n```dart:.dart {2}\nabstract class IColor {\n  String get color;\n}\n\nclass Car implements IColor {\n  final String name;\n  @override\n  final String color;\n\n  Car(this.name, this.color);\n}\n\nclass Boat implements IColor {\n  final String name;\n  @override\n  final String color;\n\n  Boat(this.name, this.color);\n}\n\nvoid main() {\n  Car car = Car('car1', 'red');\n  Boat boat = Boat('boat1', 'red');\n\n  print(car.color == boat.color); // true\n}\n```\n\n\u003ctip\u003e\n  dartì—ì„  abstract classë¡œ êµ¬í˜„í•´ë„ ë  ì •ë„ë¡œ interfaceì˜ ì˜ë¯¸ê°€ ì•½í•©ë‹ˆë‹¤.\n  ìµœê·¼ì—ëŠ” interface í‚¤ì›Œë“œê°€ ì¶”ê°€ë˜ì—ˆìœ¼ë‚˜, implements í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ extends í•´ë„ ì—ëŸ¬ê°€ ì•ˆ ë‚ ì •ë„ë¡œ ì¤‘ìš”í•˜ì§„ ì•Šì€ ê±° ê°™ìŠµë‹ˆë‹¤.\n  abstract interfaceì™€ ê°™ì´ í‚¤ì›Œë“œë¥¼ ì¤‘ë³µí•´ì„œ ì“°ëŠ” ê²½ìš°ë„ ìˆìœ¼ë¯€ë¡œ ìì„¸í•œ ë‚´ìš©ì€ [**`ê³µì‹ë¬¸ì„œ`**](https://dart.dev/language/class-modifiers#interface)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\u003c/tip\u003e\n\në‘ í´ë˜ìŠ¤ê°„ `í•„ìš”ì— ë”°ë¼` ê³µí†µì†ì„±ì„ ê°–ê³ ì‹¶ê²Œ í•  ë•Œ interfaceë¥¼ ì‚¬ìš©í•˜ê³¤ í•˜ëŠ”ë°ìš”,\ndartëŠ” `null-safety` ì–¸ì–´ì´ê¸° ë–„ë¬¸ì—, get í‚¤ì›Œë“œê°€ ì—†ë‹¤ë©´ **abstract classë¼ í•˜ë”ë¼ë„ ë©¤ë²„ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”** í•´ì¤˜ì•¼ë§Œ í•©ë‹ˆë‹¤.\nê·¸ëŸ¬ë©´ ì½”ë“œê°€ ì•„ë˜ì²˜ëŸ¼ ë³µì¡í•´ì§€ê² ì£ .\n\n```diff-dart:.dart {2}\n  abstract class IColor {\n    String color;\n\n+   IColor(this.color);\n  }\n\n  class Car implements IColor {\n    final String name;\n    @override\n    final String color;\n\n    Car(this.name, this.color);\n\n+   @override\n+   set color(String _color) {\n+     color = _color;\n+   }\n  }\n```\n\n## stream\n\në¹„ë™ê¸°ì˜ 4ë²ˆíƒ€ì, `future`ëŠ” ì™„ë£Œë˜ì§€ ì•Šì€ ì—°ì‚°ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\në¹„ë™ê¸° í•¨ìˆ˜ê°€ returnì„ í•´ì•¼ë§Œ futureì€ ì—°ì‚°ì´ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤ë‹ˆë‹¤.\n\nê·¸ì— ë°˜ë©´, `stream`ì€ **ì¼ë ¨, iterable**í•œ ë¹„ë™ê¸° ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.\në”°ë¼ì„œ iterableê³¼ ê°™ì´ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤ë§Œ, ê·¸ ê³¼ì •ì´ ë¹„ë™ê¸°ì¸ ê²ƒì´ì£ .\n\nì¦‰, futureì€ ìš”ì²­ì‹œ ë‹¤ìŒì— ì˜¬ ì´ë²¤íŠ¸ë¥¼ ë°›ëŠ” ë°©ì‹ì´ë¼ë©´,\nstreamì€ ì¤€ë¹„ê°€ ëœ í›„ ì´ë²¤íŠ¸ê°€ ìˆìŒì„ ì•Œë ¤ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n### async* / yield\n\n`async*`ëŠ” asyncì™€ ë§ˆì°¬ê°€ì¹˜ë¡œ ì´ í•¨ìˆ˜ê°€ ë¹„ë™ê¸° í•¨ìˆ˜ë¼ëŠ” ê²ƒì„ì„ ì„ ì–¸í•˜ëŠ” í‚¤ì›Œë“œ ì…ë‹ˆë‹¤.\nì°¨ì´ì ì€ ì´ í•¨ìˆ˜ëŠ” `Stream\u003cT\u003e`ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì¼ë ¨ì˜ ë¹„ë™ê¸°ë¡œ ì—°ì‚°ëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê²Œ ë©ë‹ˆë‹¤.\nì¦‰, **ì§€ì†ì ìœ¼ë¡œ ê°’ì„ ë°˜í™˜**í•˜ê¸° ìœ„í•´ `yield` í‚¤ì›Œë“œê°€ returnì„ ëŒ€ì‹ í•˜ì—¬ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n_(return í‚¤ì›Œë“œëŠ” ì—¬ê¸°ì„œ ì‚¬ìš© ë¶ˆê°€í•©ë‹ˆë‹¤)_\n\nì˜ˆì‹œë¥¼ ì‚´í´ë´…ì‹œë‹¤.\n\n```dart:.dart\nFuture\u003cint\u003e sumStream(Stream\u003cint\u003e stream) async {\n  var sum = 0;\n  await for (final value in stream) {\n    print('get stream value $value');\n    sum += value;\n  }\n  return sum;\n}\n\nStream\u003cint\u003e countStream(int to) async* {\n  for (int i = 1; i \u003c= to; i++) {\n    await Future.delayed(Duration(milliseconds: 200));\n    print('stream $i ready');\n    yield i;\n  }\n}\n\nvoid main() async {\n  var stream = countStream(3);\n  var sum = await sumStream(stream);\n  print(sum);\n}\n```\n\n\u003e (0.2ì´ˆ ëŒ€ê¸°)\n\u003e stream 1 ready\n\u003e get stream value 1\n\u003e (0.2ì´ˆ ëŒ€ê¸°)\n\u003e stream 2 ready\n\u003e get stream value 2\n\u003e (0.2ì´ˆ ëŒ€ê¸°)\n\u003e stream 3 ready\n\u003e get stream value 3\n\u003e 6\n\nStream ì—­ì‹œ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ëŠ” **ì¼ë ¨**ì˜ ì—°ì‚°ì´ë¼ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ëŠ” ê°ì²´ì´ê¸° ë•Œë¬¸ì—,\nì‹¤ì œ ì—°ì‚° ê²°ê³¼ë¥¼ ë°›ìœ¼ë ¤ë©´ awaitì„ ì‚¬ìš©í•´ì„œ ê°’ì´ ì „ë‹¬ë°›ì„ ë•Œ ê¹Œì§€ ëŒ€ê¸°í•´ì•¼ í•©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, dartì—ì„œëŠ” `await for` í‚¤ì›Œë“œë¥¼ ì œê³µí•˜ì—¬ iterableí•œ ë¹„ë™ê¸° ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  ë™ê¸°ì ì€ `Iterable\u003cT\u003e` ê°ì²´ë¥¼ ë°˜í™˜í•˜ê³  ì‹¶ë‹¤ë©´ `sync*` / `yield` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.\n\u003c/tip\u003e\n\n\u003ctip\u003e\n  streamì€ íŒŒì¼ì½ê¸°ì™€ ê°™ì´ í•œ ë²ˆì˜ ìš”ì²­ì´ ìˆìœ¼ë©´ ì²˜ìŒë¶€í„° ëê¹Œì§€ ëŠê¹€ì—†ì´ ì§„í–‰ë˜ì–´ì•¼ í•˜ëŠ” `Single subscription streams`, \n  ë¸Œë¼ìš°ì €ì˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ì™€ ê°™ì´ Observer patternì„ ì‚¬ìš©í•˜ê¸°ì— ì–¸ì œë“ ì§€ ëˆ„êµ¬ë‚˜ streamì„ ë“¤ì„ ìˆ˜ ìˆëŠ” `Broadcast streams` ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.\n  \u003cbr /\u003e\n  ë¿ë§Œ ì•„ë‹ˆë¼, streamì€ iterableí•œ ì„±ê²©ì„ ê°–ëŠ”ë‹¤ í–ˆì—ˆëŠ”ë°, ì´ëŸ° streamì„ ì œì–´í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ë©”ì„œë“œ ë˜í•œ ì¡´ì¬í•©ë‹ˆë‹¤.\n  ë”°ë¼ì„œ ìì„¸í•œ ë‚´ìš©ì€ [**`ê³µì‹ë¬¸ì„œ`**](https://dart-ko.dev/tutorials/language/streams#working-with-streams)ë¥¼ ì°¸ê³ í•˜ì‹œëŠ”ê±¸ ì¶”ì²œ ë“œë¦½ë‹ˆë‹¤.\n\u003c/tip\u003e\n\n## mixin, with\n\nê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ class \u0026rarr; `mixin`, extends \u0026rarr; `with`ì™€ ê°™ì€ ê°œë…ì…ë‹ˆë‹¤.\në¬¼ë¡  ì´í•´ë¥¼ ë•ê¸°ìœ„í•´ ìœ„ì™€ê°™ì´ ì ì—ˆì„ ë¿, ì™„ì „íˆ ë‹¤ë¥¸ í‚¤ì›Œë“œì´ë‹ˆ í˜¼ë™í•˜ì§€ ë§ˆì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\ní´ë˜ìŠ¤ë¥¼ ìƒì†í•  ë•ŒëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ ë¯¸ë¦¬ ì •ì˜ëœ ë³€ìˆ˜ë‚˜ ë©”ì„œë“œë¥¼ ìì‹ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ê³„ì¸µêµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ **ë°˜ë“œì‹œ í•œ ê°œì˜ í´ë˜ìŠ¤ë¥¼ ìƒì†**í•´ì•¼ í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆì£ .\n\nì—¬ëŸ¬ê°œì˜ ìë£Œ êµ¬ì¡°ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ì¸í„°í˜ì´ìŠ¤ëŠ” ë§ ê·¸ëŒ€ë¡œ í‹€ë§Œ ì œê³µí•˜ê³  **êµ¬í˜„ì€ ë³„ë„ë¡œ í•´ì•¼í•œë‹¤**ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë–„, extendsì™€ implementsì˜ **ì¤‘ê°„ í¬ì§€ì…˜**ì— ìœ„ì¹˜í•œ í‚¤ì›Œë“œê°€ withì´ê³ , withì€ mixinì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```dart:.dart\nmixin SwimBehabior {\n  void swim() {\n    print('swim');\n  }\n}\n\nmixin FlyBehiabior {\n  void fly() {\n    print('fly');\n  }\n}\n\nclass Duck {\n  final String name;\n\n  Duck(this.name);\n}\n\nclass RealDuck extends Duck with SwimBehabior, FlyBehiabior {\n  RealDuck(super.name);\n}\n\nclass RubberDuck extends Duck with SwimBehabior {\n  RubberDuck(super.name);\n}\n\nvoid main() {\n  RealDuck duck = RealDuck('duck');\n\n  duck.fly();\n  duck.swim();\n}\n```\n\nì´ëŸ°ì‹ìœ¼ë¡œ implements ì²˜ëŸ¼ ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, extends ì²˜ëŸ¼ ì¬ì •ì˜í•  í•„ìš” ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ, mixinì„ ì‚¬ìš©í•  ë•ŒëŠ” í´ë˜ìŠ¤ êµ¬ì„±ìš”ì†Œê°€ `ë§¤ìš° ì„¸ë¶„í™”` ë˜ì–´ìˆëŠ”ê²Œ ì¢‹ìŠµë‹ˆë‹¤.\nì´ëŸ°ì €ëŸ° ë©”ì„œë“œë¥¼ ì”ëœ© ë§Œë“¤ì–´ë†“ìœ¼ë©´ ìƒì†í–ˆì„ ë•Œ **í•„ìš”ì—†ëŠ” ê¸°ëŠ¥ë„ ìˆ˜í–‰**í•  ìˆ˜ ìˆëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\nì´ëŸ° ìƒí™©ì´ ìƒê¸¸ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì½”ë“œëŠ” mixin ë³´ë‹¨ `Strategy pattern`ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ë” ì¢‹ìŠµë‹ˆë‹¤.\n\n```dart:.dart {18, 22-24}\nabstract class SwimBehavior {\n  void swim();\n}\n\nabstract class FlyBehavior {\n  void fly();\n}\n\nclass CanSwim implements SwimBehavior {\n  @override\n  void swim() {\n    print('swim');\n  }\n}\n\nclass Duck {\n  final String name;\n  SwimBehavior swimBehavior;\n\n  Duck(this.name, this.swimBehavior);\n\n  void performSwim() {\n    swimBehavior.swim();\n  }\n}\n\nclass RealDuck extends Duck implements FlyBehavior {\n  RealDuck(String name) : super(name, CanSwim());\n\n  @override\n  void fly() {\n    print('fly');\n  }\n}\n\nclass RubberDuck extends Duck {\n  RubberDuck(String name) : super(name, CanSwim());\n}\n\nvoid main() {\n  RealDuck real = RealDuck('duck');\n  RubberDuck rubber = RubberDuck('duck');\n\n  real.performSwim();\n  real.fly();\n  rubber.performSwim();\n}\n```\n\nì‚¬ì‹¤ mixinì„ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ classì˜ `ìƒì† depthë¥¼ ê¹Šê²Œ` í•˜ëŠ” ë°©ë²•ë„ ìˆìœ¼ë‹ˆ, ë³¸ì¸ì˜ ìƒí™©ì— ë§ê²Œ ì·¨ì‚¬ì„ íƒì„ ì˜ í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ê°œë°œìŠµê´€ì´ ë  ê²ƒì…ë‹ˆë‹¤.","slug":"flutter/005_dart_expert","readingMinutes":17,"wordCount":1610},{"title":"Dart ì–¸ì–´ ì‹¬í™”","description":"Dart ì–¸ì–´ì— ëŒ€í•œ ì‹¬í™”ëœ ë‚´ìš©ì„ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤.","icon":"","image":"","tags":["Dart","Asynchronous","Isolate","Callback"],"draft":false,"date":"2023-09-15 / 11:24","content":"\n\u003cnotice\u003e\n  ê¸°ì´ˆì ì¸ ì§€ì‹ì´ í•„ìš”í•˜ì‹  ë¶„ë“¤ì€ [**`Dart ì–¸ì–´ ê¸°ì´ˆ`**](https://wjlee611.github.io/blog/flutter/003_dart_basic) í¬ìŠ¤íŠ¸ë¥¼ ì½ì–´ë³´ì‹œê¸¸ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.\n\u003c/notice\u003e\n\n## async / await\n\n`async`, `await` í‚¤ì›Œë“œëŠ” **ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°**ì‹œ ë¹ ì§€ì§€ ì•ŠëŠ” í‚¤ì›Œë“œì…ë‹ˆë‹¤.\nì—¬ê¸°ì„œ `.then()` ë©”ì„œë“œë‚˜ Dart ì—ì„œ `Future\u003cT\u003e` ë„ í¬í•¨í•´ì„œ ì›ë¦¬ì™€ ì ì ˆí•œ ì‚¬ìš©ë²•ê¹Œì§€ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  `ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°`\n  íŠ¹ì • ì½”ë“œê°€ ì™„ë£Œë˜ê¸° ì „, ë‹¤ë¥¸ ì½”ë“œë¥¼ ìˆ˜í–‰í•¨ìœ¼ë¡œì„œ ì½”ë“œì˜ ì‹¤í–‰ ìˆœì„œê°€ ìˆœì°¨ì (ë™ê¸°ì )ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ì…ë‹ˆë‹¤.\n  ë³´í†µ ì²˜ë¦¬ì™„ë£Œê¹Œì§€ ì‹œê°„ì´ ë§ì´ ê±¸ë¦¬ëŠ” ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ë‚˜ íŒŒì¼ ì…ì¶œë ¥ ë“±ì— ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\u003c/tip\u003e\n\n\u003cnotice\u003e\n  ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” `ë‹¨ì¼ ìŠ¤ë ˆë“œ(Dartì˜ ê²½ìš° ë‹¨ì¼ Isolate) í™˜ê²½`ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\n  ë”°ë¼ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•œë‹¤ê³  í•´ë„, ë¹„ë™ê¸° í•¨ìˆ˜ê°€ `ì»´í“¨íŒ… ìì› ì‚¬ìš©ëŸ‰ì´ ë§ë‹¤`ë©´ í•´ë‹¹ ìŠ¤ë ˆë“œ(Isolate)ëŠ” `ì¼ì‹œ ì •ì§€`ë˜ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n  \u003cbr /\u003e\n  ì´ì™€ ê´€ë ¨í•œ ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ [**`Isolate`**](https://wjlee611.github.io/blog/flutter/004_dart_advanced#isolate) íŒŒíŠ¸ì—ì„œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\u003c/notice\u003e\n\n### Future\n\n`Future` ê°ì²´ëŠ” ì§€ê¸ˆ ë‹¹ì¥ì€ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ì§€ë§Œ, ë¯¸ë˜ì— ì²˜ë¦¬ê°€ ì™„ë£Œë  ë°ì´í„°ë¥¼ ì•Œë ¤ì£¼ëŠ” ê°ì²´ì…ë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ë´…ì‹œë‹¤.\n\n```dart:.dart\nFuture\u003cString\u003e futureStr() async {\n  print('do something');\n  return Future.delayed(Duration(seconds: 2), () =\u003e 'future string');\n}\n\nvoid main() {\n  print('start');\n  print(futureStr());\n}\n```\n\nìœ„ì˜ futureStr() í•¨ìˆ˜ëŠ” í˜¸ì¶œ í›„ 2ì´ˆë’¤ì— 'future string'ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.\nì‹¤í–‰ê²°ê³¼ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?\n\n\u003e start\n\u003e do something\n\u003e Instance of 'Future\\\u003cString\\\u003e'\n\u003e (2ì´ˆ í›„ ì¢…ë£Œ)\n\në‹µì€ `future ê°ì²´` ì…ë‹ˆë‹¤.\nì–´ì°Œë³´ë©´ ë‹¹ì—°í•©ë‹ˆë‹¤. `main` í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ë„ ì•„ë‹ ë¿ë”ëŸ¬ futureStrì˜ ë¦¬í„´ê°’ì€ `Future\u003cString\u003e` ì´ë¼ê³  ëª…ì‹œí•´ë‘ì—ˆìœ¼ë‹ˆ ë§ì´ì£ .\n\n![230917-211924](/posts/004_dart_advanced/230917-211924.png)\n\nfutureëŠ” `Uncompleted`, `Completed` ìƒíƒœë¥¼ ê°–ìŠµë‹ˆë‹¤.\në¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œì‹œì— futureì€ Uncompleted ìƒíƒœë¥¼ ê°–ìŠµë‹ˆë‹¤.\në”°ë¼ì„œ `Instance of 'Future\u003cString\u003e'`ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì¶œë ¥í•œ ê²ƒì´ì£ .\ní•˜ì§€ë§Œ í•¨ìˆ˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì¢…ë£Œë˜ë©´ futureì€ ë¹„ë¡œì†Œ Completed ìƒíƒœë¥¼ ê°–ìŠµë‹ˆë‹¤.\në”°ë¼ì„œ `future string`ê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.\n\nì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” Future ê°ì²´ëŠ” ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ê²ƒì€ Future ê°ì²´ê°€ ì²˜ë¦¬ë˜ê³  ë‚˜ì„œ ë°˜í™˜ë˜ëŠ” ë°ì´í„°ì¸ê±°ì£ .\në”°ë¼ì„œ, Future ê°ì²´ì˜ ì²˜ë¦¬(ë¹„ë™ê¸° í•¨ìˆ˜)ë¥¼ ì›í™œíˆ í•˜ê¸°ìœ„í•´ `async`, `await` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n### async\n\nasync í‚¤ì›Œë“œëŠ” ì´ í•¨ìˆ˜ê°€ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ì„ì„ ëª…ì‹œí•˜ëŠ” í‚¤ì›Œë“œ ì…ë‹ˆë‹¤.\në‹¤ë§Œ ìœ„ì˜ ì˜ˆì‹œì—ì„œ ë³´ë“¯, ë°˜ë“œì‹œ `Future\u003cT\u003e` ê°ì²´ ë˜ëŠ” `void`ë¥¼ ë°˜í™˜í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, main í•¨ìˆ˜ë¥¼ async í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ ì‹¤í–‰í•œë‹¤ë©´ ì œëŒ€ë¡œëœ ê²°ê³¼ê°€ ë‚˜ì˜¬ê¹Œìš”?\n\n```dart:.dart\nFuture\u003cString\u003e futureStr() async {\n  print('do something');\n  return Future.delayed(Duration(seconds: 2), () =\u003e 'future string');\n}\n\nvoid main() async {\n  print('start');\n  print(futureStr());\n}\n```\n\n\u003e start\n\u003e do something\n\u003e Instance of 'Future\\\u003cString\\\u003e'\n\u003e (2ì´ˆ í›„ ì¢…ë£Œ)\n\nê·¸ë ‡ìŠµë‹ˆë‹¤. í•¨ìˆ˜ë¥¼ ë¹„ë™ê¸° ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¡œ ì„ ì–¸í•œë‹¤ê³  í•´ì„œ í•´ê²°ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.\ní•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì§„í–‰ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•”ì‹œí•  ë¿, `ì–´ë””ì„œ` ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•´ì•¼í•˜ëŠ” ì§€ëŠ” ëª…ì‹œí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ì£ .\n\n### await\n\nawait í‚¤ì›Œë“œëŠ” **í•´ë‹¹ í‚¤ì›Œë“œê°€ ëª…ì‹œëœ ë¹„ë™ê¸° ì²˜ë¦¬**(futureStr)ê°€ ì™„ë£Œë  ë•Œ ê¹Œì§€ **ë¹„ë™ê¸° í•¨ìˆ˜**(main)ì˜ ì²˜ë¦¬ë¥¼ `ë©ˆì¶”ê² ë‹¤`ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.\nê·¸ë ‡ê¸°ì— await í‚¤ì›Œë“œëŠ” ë°˜ë“œì‹œ async í‚¤ì›Œë“œê°€ ëª…ì‹œëœ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´ futureStrì˜ í•¨ìˆ˜ ì•ì— awaitë¥¼ ëª…ì‹œí•˜ì—¬ ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ëë‚  ë•Œ ê¹Œì§€ ëŒ€ê¸°ì‹œí‚¨ë‹¤ë©´ ì–´ë–¨ê¹Œìš”?\n\n```dart:.dart\nFuture\u003cString\u003e futureStr() async {\n  print('do something');\n  // return Future.delayed(Duration(seconds: 2), () =\u003e 'future string');\n  await Future.delayed(Duration(seconds: 2));\n  return 'future string';\n}\n\n\nvoid main() async {\n  print('start');\n  print(await futureStr());\n}\n```\n\n\u003e start\n\u003e do something\n\u003e (2ì´ˆ ëŒ€ê¸°)\n\u003e future string\n\u003e (ì¦‰ì‹œ ì¢…ë£Œ)\n\në¹„ë¡œì†Œ ì›í•˜ë˜ ê²°ê³¼ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.\n\n---\n\n## Isolate\n\n`Isolate`ëŠ” Dartì—ì„œ ìŠ¤ë ˆë“œë¥¼ ë¶€ë¥´ëŠ” ìš©ì–´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\n![230917-221122](/posts/004_dart_advanced/230917-221122.png)\n\nIsolateëŠ” ìŠ¤ë ˆë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë©€í‹° ì½”ì–´ CPUì˜ ì¥ì ì„ ì‚´ë¦¬ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ìœ¼ë¡œ `ë³„ë„ì˜ ì´ë²¤íŠ¸ ë£¨í”„`ë¥¼ ê°–ëŠ” ì‹¤í–‰ íë¦„ì„ ë§Œë“¤ì–´ `ë³‘ë ¬ì ì¸ ì²˜ë¦¬`ë¥¼ ê°€ëŠ¥ì¼€ í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ìŠ¤ë ˆë“œì™€ ìš©ì–´ì—ì„œì˜ ì°¨ì´ì ì„ ë‘ëŠ” ì´ìœ ê°€ ìˆìŠµë‹ˆë‹¤.\n\në³´í†µ **ìŠ¤ë ˆë“œ**ë¼ í•˜ë©´ `ë©”ëª¨ë¦¬ ì˜ì—­ì„ ê³µìœ `í•œë‹¤ê³  ë°°ì› ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ ë•Œë¬¸ì— `race-condition`ì´ ë°œìƒí•˜ëŠ” ë¬¸ì œì ì„ ê³ ë ¤í•˜ì—¬ í”„ë¡œê·¸ë˜ë°ì„ í–ˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, **Isolate**ëŠ” ìŠ¤ë ˆë“œì™€ ë‹¤ë¥´ê²Œ `ë©”ëª¨ë¦¬ ì˜ì—­ ë˜í•œ ê³µìœ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤`.(ë¬¼ë¡  ì½”ë“œ ì˜ì—­ì€ ê³µìœ í•©ë‹ˆë‹¤) \nê·¸ë ‡ê¸°ì— mutex, lock ë“±ì„ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ëŠ” í¸ì˜ì„±ì´ ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ì™œ Isolateë¥¼ ì•Œì•„ì•¼ í•˜ê³ , ì‚¬ìš©í•´ì•¼ë§Œ í• ê¹Œìš”?\n\n### Isolate vs Async\n\nì•„ë˜ì˜ ì˜ìƒì„ í™•ì¸í•´ë´…ì‹œë‹¤.\n\n\u003cYT id='HkBaS098BrE' /\u003e\n\n`Main isolate`ë¶€ë¶„ì€ json ë°ì´í„° íŒŒì‹±ê³¼ í™”ë©´ ë¹Œë“œë¥¼ `í•˜ë‚˜ì˜ isolate`ì—ì„œ êµ¬ë™í•œ ê²°ê³¼ì…ë‹ˆë‹¤.\nì˜ìƒì—ì„œ ë³´ì‹œëŠ” ë°”ì™€ ê°™ë“¯ ì‹­ëª‡ë§Œì¤„ì˜ json íŒŒì‹±ì€ ë‹¨ì¼ isolate í™˜ê²½ì—ì„œ êµ¬ë™í•˜ê¸°ì—ëŠ” ë‹¤ì†Œ ë¬´ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.\nì•„ë¬´ë¦¬ asyncë¡œ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë’¤ë¡œ ë¯¸ë£¬ë‹¤ í• ì§€ë¼ë„ ì‹¤ì œ ë°ì´í„° íŒŒì‹±í•˜ëŠ” ë™ì‘ê³¼ í™”ë©´ì„ ê·¸ë¦¬ëŠ” ë™ì‘ ëª¨ë‘ `ë™ì¼í•œ isolate`ì—ì„œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì— `ì„±ëŠ¥ìƒ ì´ìŠˆ`ê°€ ìƒê¸¸ ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ `Worker isolate`ë¶€ë¶„ì€ json ë°ì´í„° íŒŒì‹±ì„ `ë³„ë„ì˜ worker isolate`ì—ì„œ êµ¬ë™í•œ ê²°ê³¼ì…ë‹ˆë‹¤.\nì°¨ì´ëŠ” ëª…í™•í•©ë‹ˆë‹¤. í™”ë©´ì— ê·¸ë¦¬ëŠ” ë™ì‘ê³¼ íŒŒì‹± ë™ì‘ì´ `ë³„ë„ì˜ isolate`ì—ì„œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì— í™”ë©´ì„ ê·¸ë¦¬ëŠ” ë¶€ë¶„ì—ì„œ `ë™ì´ ê±¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤`.\n\nì´ë ‡ë“¯ ë‹¨ì¼ isolateì—ì„œ ë™ì‘ì´ ë²„ë²…ì¼ ì •ë„ë¡œ ë¬´ê±°ìš´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤ë©´, í•´ë‹¹ ê¸°ëŠ¥ì€ ë³„ë„ì˜ isolateë¡œ ë¹¼ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì‚¬ìš©ìì—ê²Œ ë” ë‚˜ì€ ê²½í—˜ì„ ì œê³µí•˜ê²Œ ë©ë‹ˆë‹¤.\n\ní•´ë‹¹ ì˜ìƒì—ì„œ êµ¬ë™í•˜ëŠ” ì½”ë“œëŠ” [**`Arkhive repo`**](https://github.com/wjlee611/arkhive/blob/main/lib/bloc/enemy/enemy_data/enemy_data_bloc.dart)ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\n## function\n\n### callback function\n\nì½œë°± í•¨ìˆ˜ëŠ” í•¨ìˆ˜ì˜ ì¸ìë¡œ ë„˜ê²¨ì£¼ì–´ ë„˜ê²¨ë°›ì€ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•œ í•¨ìˆ˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\nì˜ˆì‹œë¥¼ ì‚´í´ë´…ì‹œë‹¤.\n\n```dart:.dart\nvoid main() {\n  int value = 0;\n\n  print(valueModifire(value: value, modifire: add1)); // 1\n  print(valueModifire(value: value, modifire: sub1)); // -1\n}\n\nint add1(int value) =\u003e value + 1;\nint sub1(int value) =\u003e value - 1;\n\nint valueModifire({\n  required int value,\n  required Function(int) modifire,\n}) {\n  return modifire(value);\n}\n```\n\nìœ„ ì½”ë“œì—ì„œëŠ” `valueModifire`ì˜ ì¸ìë¡œì„œ `add1`, `sub1`ì„ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.\nì´ ë•Œ, ì´ ë‘ í•¨ìˆ˜ë¥¼ `callback function`ë¼ê³  ë¶€ë¥´ê³ , ì´ í•¨ìˆ˜ëŠ” valueModifire ë‚´ë¶€ì—ì„œ `modifire`ì˜ í˜•íƒœë¡œ í˜¸ì¶œë©ë‹ˆë‹¤.\n\në³´í†µì€ ì´ëŸ°ì‹ìœ¼ë¡œ `ë™ì¼í•œ í•¨ìˆ˜` ë‚´ë¶€ì—ì„œ `ì„œë¡œ ë‹¤ë¥¸ ê¸°ëŠ¥`ì„ ìˆ˜í–‰í•´ì•¼ í•  ë•Œ ì½œë°± í•¨ìˆ˜ë¡œì„œ ì „ë‹¬í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\n\n```dart:.dart\nvoid main() async {\n  int value = 0;\n\n  print(await valueModifire(value: value, modifire: add1)); // await 1 second -\u003e 1\n  print(await valueModifire(value: value, modifire: sub1)); // await 1 second -\u003e -1\n}\n\nint add1(int value) =\u003e value + 1;\nint sub1(int value) =\u003e value - 1;\n\nFuture\u003cint\u003e valueModifire({\n  required int value,\n  required Function(int) modifire,\n}) async {\n  await Future.delayed(Duration(seconds: 1)); // something actions\n  return modifire(value);\n}\n```\n\në˜ëŠ”, `íŠ¹ì • í•¨ìˆ˜ì˜ ë™ì‘ì´ ëë‚œ í›„` ìˆ˜í–‰í•´ì•¼ í•  ê¸°ëŠ¥ì´ ìˆì„ ë•Œ ë§ì´ ì‚¬ìš©ë˜ê³¤ í•©ë‹ˆë‹¤.","slug":"flutter/004_dart_advanced","readingMinutes":10,"wordCount":836},{"title":"Dart ì–¸ì–´ ê¸°ì´ˆ","description":"Dart ì–¸ì–´ì— ëŒ€í•œ ê¸°ì´ˆì§€ì‹ì„ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤.","icon":"","image":"","tags":["Dart"],"draft":false,"date":"2023-09-14 / 17:41","content":"\n\u003cwarning\u003e\n  ì œê°€ ìƒê°í•˜ê¸°ì— **ë„ˆë¬´ ê¸°ì´ˆì§€ì‹**ì´ë‹¤ í•˜ëŠ” ë¶€ë¶„ì€ ê³¼ê°í•˜ê²Œ **ì œì™¸**í–ˆìŠµë‹ˆë‹¤.\n  ë‹¤ë§Œ, ê¸°ì´ˆì§€ì‹ì´ë‹¤ í•˜ë”ë¼ë„ `ê°œë…ì ìœ¼ë¡œ ë§¤ìš° ì¤‘ìš”`í•˜ê±°ë‚˜ `ë§ì´ë“¤ ì•Œë ¤ì£¼ì§€ ì•ŠëŠ” ë‚´ìš©`ì€ í¬í•¨í•˜ì˜€ìŠµë‹ˆë‹¤.\n\u003c/warning\u003e\n\n## variables\n\në³€ìˆ˜ ë„¤ì´ë° ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n```dart:.dart\n  \u003cì œì–´ì\u003e \u003cíƒ€ì…\u003e \u003cë³€ìˆ˜ì´ë¦„\u003e = \u003cê°’\u003e;\n```\n\níƒ€ì…ì€ int, String ê³¼ ê°™ì€ íƒ€ì…ë“¤ì´ ì˜¤ê±°ë‚˜, `var` ì™€ ê°™ì€ íƒ€ì… ì¶”ë¡  í‚¤ì›Œë“œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì œì–´ìì—ëŠ” `final`, `const`, `late`, `static` ì™€ ê°™ì€ í‚¤ì›Œë“œê°€ ì˜¤ê²Œ ë©ë‹ˆë‹¤.\n\n### var\n\ndartì—ì„  varëŠ” íƒ€ì… ì¶”ë¡  í‚¤ì›Œë“œë¡œ ì‚¬ìš©ë˜ëŠ” ì˜ˆì•½ì–´ì…ë‹ˆë‹¤.\në”°ë¼ì„œ `\u003cê°’\u003e`ì— ì–´ë–¤ ë°ì´í„°ê°€ ì˜¤ëŠ”ì§€ì— ë”°ë¼ ë³€ìˆ˜ì˜ íƒ€ì…ì´ ê²°ì •ë©ë‹ˆë‹¤.\në‹¨, ê°’ì„ ì§€ì •í•˜ì§€ ì•Šì„ ë•ŒëŠ” `dynamic` íƒ€ì…ìœ¼ë¡œ ìë™ ê²°ì •ë©ë‹ˆë‹¤.\n\n\u003ctip\u003e\n  `dynamic?`\n  íƒ€ì… ì•ˆì •ì„±ì´ ë³´ì¥ë˜ì§€ ì•Šì§€ë§Œ, ëª¨ë“  íƒ€ì…ì˜ ë°ì´í„°ë¥¼ í• ë‹¹í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.\n  ë³´í†µ json íŒŒì¼ì„ íŒŒì‹±í•  ë•Œ ì„ì‹œë¡œ ë°ì´í„° í˜•ì‹ì„ ì§€ì •í•  ë•Œ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\u003c/tip\u003e\n\n### final vs const\n\n`final`ê³¼ `const` ë‘˜ ëª¨ë‘ ë°ì´í„°ì˜ ë¶ˆë³€ì„±ì„ ë³´ì¥í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í‚¤ì›Œë“œ ë¼ëŠ” ì ì—ì„œëŠ” ê³µí†µì ì„ ê°–ìŠµë‹ˆë‹¤.\në˜í•œ, ì´ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ íƒ€ì…ì„ êµ³ì´ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ì•Œì•„ì„œ `var`ë¡œ íƒ€ì…ì„ ì§€ì •í•˜ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ë‘˜ ì‚¬ì´ì˜ ì¤‘ìš”í•œ ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤.\n\n`final`ì€ ëŸ°íƒ€ì„ì— ê°’ì´ ì§€ì •ë©ë‹ˆë‹¤.\në”°ë¼ì„œ ë©”ëª¨ë¦¬ìƒì˜ `heap ì˜ì—­`ì— ë°ì´í„°ê°€ ì €ì¥ë©ë‹ˆë‹¤.\nê·¸ë ‡ê¸°ì— ìƒëª…ì£¼ê¸°ëŠ” ìŠ¤ì½”í”„ ë‚´ë¶€ë¡œ í•œì •ë˜ê¸° ë–„ë¬¸ì— flutter ì—ì„œ **build ë©”ì„œë“œ**ê°€ í˜¸ì¶œë  ë•Œ ì´ ë¶€ë¶„ì€ `ë°˜ë³µì `ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì™”ë‹¤ ë‚´ë ¤ê°”ë‹¤ë¥¼ ë°˜ë³µí•˜ê²Œ ë©ë‹ˆë‹¤.\n\n`const`ëŠ” ì»´íŒŒì¼íƒ€ì„ì— ê°’ì´ ì§€ì •ë©ë‹ˆë‹¤.\níŠ¹ì´í•œ ì ì¸ const í‚¤ì›Œë“œë¡œ ì§€ì •ëœ ë°ì´í„°ëŠ” ë©”ëª¨ë¦¬ìƒì— ë³„ë„ë¡œ ì ì¬ë˜ì§€ ì•Šê³ , `ì»´íŒŒì¼ëœ ì½”ë“œì˜ ìƒìˆ˜ í’€(constant pool)`ìƒì— ì €ì¥ë©ë‹ˆë‹¤.\në”°ë¼ì„œ ë³„ë„ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì§€ ì•Šê³ , ìƒëª…ì£¼ê¸°ë„ í”„ë¡œê·¸ë¨ ìˆ˜ëª…ê³¼ ë™ìƒí•˜ê¸°ì— flutter ì—ì„œ **build ë©”ì„œë“œ**ê°€ í˜¸ì¶œë  ë•Œ ì´ ë¶€ë¶„ì€ `ë‹¤ì‹œ ëœë”ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤`.\n\n### late\n\ndartëŠ” **null-safety** ì–¸ì–´ì…ë‹ˆë‹¤.\në”°ë¼ì„œ `\u003cíƒ€ì…\u003e?` ì™€ ê°™ì´ `?`ë¡œ nullê°’ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ì§€ì •í•´ ì£¼ì§€ ì•ŠëŠ”í•œ ë³€ìˆ˜ ì„ ì–¸ì‹œ(í˜¹ì€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ) ë°˜ë“œì‹œ ê°’ì„ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ, `late`ì˜ ê²½ìš°ì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œì ì— nullê°’ì„ í—ˆìš©í•˜ì§€ë§Œ, ì´í›„ì— `ë‹¨ í•œë²ˆ` ê°’ì„ í• ë‹¹í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í‚¤ì›Œë“œì…ë‹ˆë‹¤.\n\në¬¼ë¡ , nullê°’ì´ ì„ì‹œ í—ˆìš©ì´ ë˜ëŠ”ë§Œí¼ ì‚¬ìš©ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n### static\n\n`static`ì€ í´ë˜ìŠ¤ê°€ ë¡œë“œë  ë•Œ ê°’ì´ ì§€ì •ë©ë‹ˆë‹¤.\në”°ë¼ì„œ heapì˜ì—­ì´ ì•„ë‹Œ `í´ë˜ìŠ¤ ìì²´ ë©”ëª¨ë¦¬ ì˜ì—­`ì— ì €ì¥ë©ë‹ˆë‹¤.\nê·¸ë ‡ê¸°ì— ì¼ë°˜ ë©”ì„œë“œì—ì„  static ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì§€ë§Œ, static ë©”ì„œë“œì—ì„  ì¼ë°˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ê·¸ë ‡ê¸°ì— í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ì§€ ì•Šì•„ë„ ë°”ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n---\n\n## function\n\ndartëŠ” ì‚¬ì‹¤ jsë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ ì–¸ì–´ë¼ê³  í•©ë‹ˆë‹¤.\nê·¸ë˜ì„œì¼ê¹Œìš”, dartì˜ ëª¨ë“  ë°ì´í„° íƒ€ì…ë„ ì‚¬ì‹¤ì€ ëª¨ë‘ `Object`ì…ë‹ˆë‹¤.\n\në¿ë§Œ ì•„ë‹ˆë¼, `ë³€ìˆ˜ì— í•¨ìˆ˜ë¥¼ í• ë‹¹`í•˜ê±°ë‚˜, `ìµëª… í•¨ìˆ˜`, `ëŒë‹¤ í•¨ìˆ˜` ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n### named parameter\n\në³´í†µ í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ê³¤ í•©ë‹ˆë‹¤.\n\n```dart:.dart\n  void myFunction(int num) {\n    ...\n  }\n  ...\n  myFunction(1);\n```\n\ní•˜ì§€ë§Œ ì…ë ¥ë°›ê³ ì í•˜ëŠ” íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ì§„ë‹¤ë©´, ì¸ìë¥¼ ë„˜ê²¨ì¤„ ë•Œ ì–´ëŠ ìë¦¬ì— ì–´ëŠ ë°ì´í„°ë¥¼ ë„˜ê²¨ì•¼ í• ì§€ ì•Œê¸°ê°€ ì–´ë µìŠµë‹ˆë‹¤.\níŠ¹íˆ flutterì—ì„œëŠ” ìœ„ì ¯ì„ ë§Œë“¤ ë•Œ ì¸ìë¥¼ ì‹­ìˆ˜ê°œì”© ë„˜ê¸°ëŠ” ê²½ìš°ê°€ ë§ì£ ...\n\nê·¸ë ‡ê¸°ì— `named parameter` ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. (ë§ˆì¹˜ jsì—ì„œ ê°ì²´ë¥¼ ì¸ìë¡œ ë„˜ê¸° ë“¯)\n\n```dart:.dart\n  void myFunction({required int myNum}) {\n    ...\n  }\n  ...\n  myFunction(myNum: 1);\n```\n\nì´ë ‡ê²Œ í•˜ë©´ í•¨ìˆ˜ í˜¸ì¶œì´ë‚˜, í´ë˜ìŠ¤ ìƒì„±ì í˜¸ì¶œì‹œ ì–´ëŠ ì¸ìì— ì–´ëŠ ë°ì´í„°ë¥¼ ë„˜ê²¨ì•¼ í•˜ëŠ”ì§€ ëª…í™•í•´ì§‘ë‹ˆë‹¤.\n\në¬¼ë¡ , ìœ„ ë‘ ë°©ì‹ì„ `í˜¼í•©`í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n```dart:.dart\n  void myFunction(String str, {required int val}) {\n    ...\n  }\n  ...\n  myFunction(\"string\", myNum: 1);\n```\n\n---\n\n## class\n\n### constructor\n\n```dart:.dart\nclass Car {\n  final String color;\n  int wheels;\n  String? name;\n\n  Car({\n    required this.color,\n    required this.wheels,\n    this.name,\n  });\n}\n```\n\nê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±ìëŠ” ìœ„ì™€ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n`named parameter` í˜•ì‹ìœ¼ë¡œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ëŒ€ë¶€ë¶„ì˜ flutter ìœ„ì ¯ì€ ìœ„ì™€ ê°™ì´ ì •ì˜í•©ë‹ˆë‹¤)\n\n### named constructor\n\n```dart:.dart\nCar {\n  final String color;\n  late int wheels;\n  String? name;\n\n  Car.fourWheels({required this.color, this.name}) {\n    this.wheels = 4;\n  }\n}\n```\n\ní´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ íŠ¹ë³„í•œ ê¸°ëŠ¥ì„ ë¶™ì¸ì±„ë¡œ ì¸ìŠ¤í„´ìŠ¤í™” í•  ìˆ˜ ìˆë„ë¡ `named constructor`ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\në³´í†µ ì´ˆê¸°ìƒíƒœë¥¼ ìœ„í•œ `.init`, ëª¨ë¸ë§ì„ ìœ„í•œ `.fromJson`ì™€ ê°™ì´ ì“°ì´ê³¤ í•©ë‹ˆë‹¤.\n(ì°¸ê³ ë¡œ ì´ ë•Œ factory í‚¤ì›Œë“œë¥¼ ì´ìš©í•´ì„œ ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ë§ì´ êµ¬í˜„í•˜ëŠ”ë° ì´ëŠ” ë‹¤ìŒì— ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤)\n\n### initializer list\n\nìœ„ì— `wheels`ì„ ë³„ë„ë¡œ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•´ late í•œì •ìë¥¼ ì‚¬ìš©í–ˆëŠ”ë°ìš”, ë³´ê¸°ê°€ ì•ˆì¢‹ìŠµë‹ˆë‹¤.\n`final` ë©¤ë²„ë³€ìˆ˜ëŠ” ìƒì„±ì bodyì—ì„œ ê°’ì„ ì§€ì •í•  ìˆ˜ ì—†ê¸°ì— ì €ëŸ°ì‹ìœ¼ë¡œ í‘œí˜„í–ˆëŠ”ë°ìš”,\n`initializer list`ë¥¼ ì´ìš©í•˜ë©´ final ë©¤ë²„ë³€ìˆ˜ë„ ìƒì„±ì í˜¸ì¶œì‹œ ë³„ë„ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```dart:.dart\nclass Car {\n  final String color;\n  final int wheels;\n  String? name;\n\n  Car.prototype({required this.color}) : wheels = 4 {\n    this.name = 'proto';\n  }\n}\n```\n\n`:`ë¥¼ ë¶™ì—¬ `: wheels = 4`ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në˜í•œ, ë’¤ì— bodyë¥¼ ë¶™ì—¬ ì¶”ê°€ì‘ì—… ë˜í•œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ninitializer **list**ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ `wheels = 4` ì™€ ê°™ì€ initializerë¥¼ `,`ë¥¼ ì´ìš©í•´ì„œ ì—¬ë ¤ê°œ ì—°ë‹¬ì•„ ì´ˆê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### redirecting constructor\n\n```dart:.dart\nclass Car {\n  final String color;\n  final int wheels;\n  String? name;\n\n  Car({\n    required this.color,\n    required this.wheels,\n    this.name,\n  });\n\n  Car.fourWheels({required String color, String? name})\n      : this(\n          color: color,\n          wheels: 4,\n          name: name,\n        );\n}\n```\n\nê¸°ì¡´ì˜ ìƒì„±ìë¥¼ `this`ë¡œ í˜¸ì¶œí•˜ì—¬ named constructorë¥¼ êµ¬í˜„í•œ ë°©ì‹ì…ë‹ˆë‹¤.\në‹¤ë§Œ, ì´ ê²½ìš°ì—ëŠ” ìƒì„±ìì˜ bodyë¥¼ êµ¬í˜„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n","slug":"flutter/003_dart_basic","readingMinutes":9,"wordCount":703},{"title":"í”ŒëŸ¬í„° í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°","description":"í”ŒëŸ¬í„° í”„ë¡œì íŠ¸ ìƒì„± ê°€ì´ë“œ ì…ë‹ˆë‹¤.","icon":"","image":"","tags":["Flutter","Getting started"],"draft":false,"date":"2023-09-14 / 16:37","content":"\n## ì‹œì‘ ì „ ì£¼ì˜ì‚¬í•­\n\n\u003cnotice\u003e\n  ì´ í¬ìŠ¤íŠ¸ì—ì„  í”ŒëŸ¬í„° í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë¤„ë´…ë‹ˆë‹¤.\n  ë”°ë¼ì„œ í”ŒëŸ¬í„° SDK ì„¤ì¹˜ë‚˜, ê´€ë ¨ í™˜ê²½ì„¤ì •ì´ ì•ˆë˜ì‹  ë¶„ì€ [**`í”ŒëŸ¬í„° ì‹œì‘í•˜ê¸°`**](https://wjlee611.github.io/blog/flutter/001_installation)ë¥¼ ê¼­ ì½ì–´ë³´ì‹œê³  ë‹¤ì‹œ ì™€ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\u003c/notice\u003e\n\n\u003cnotice\u003e\n  ë³¸ ë¸”ë¡œê·¸ì˜ í”ŒëŸ¬í„° ê°œë°œí™˜ê²½ì€ `VSCode`ì™€ `í„°ë¯¸ë„`ë¡œ ê³ ì •ë©ë‹ˆë‹¤.\n  ë”°ë¼ì„œ ë‹¤ë¥¸ ê°œë°œí™˜ê²½ì— ëŒ€í•œ ì •ë³´ëŠ” ì—†ìœ¼ë¯€ë¡œ ì´ ì  ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n\u003c/notice\u003e\n\n## í”„ë¡œì íŠ¸ ìƒì„±\n\ní”„ë¡œì íŠ¸ ìƒì„±ì„ ìœ„í•´ ìš°ì„  ë³¸ì¸ì´ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•  í´ë”ë¡œ ì´ë™í•´ì£¼ì„¸ìš”.\nì œ ê²½ìš°ì—ëŠ” ê¹ƒí—ˆë¸Œë¡œ ë²„ì „ê´€ë¦¬ë¥¼ í•˜ëŠ” í”„ë¡œì íŠ¸ì˜ ê²½ìš° `~/Documents/GitHub` í´ë”ì—ì„œ ì¼ê´„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” í¸ì…ë‹ˆë‹¤.\n\n```bash:Terminal\ncd ~/Documents/GitHub\n```\n\nì´í›„ì—ëŠ” ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ í”ŒëŸ¬í„° í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n```bash:Terminal\nflutter create \u003cproj_name\u003e\n```\n\nì´ ë•Œ, í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ë•Œ ì•Œì•„ë‘ë©´ ìœ ìš©í•œ (ê±°ì˜ í•„ìˆ˜) ëª‡ ê°€ì§€ ì˜µì…˜ì„ ì†Œê°œë“œë¦½ë‹ˆë‹¤.\n\n### --org\n\nì´ ì˜µì…˜ì„ ì§€ì •í•˜ë©´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ë•Œ íŒ¨í‚¤ì§€ëª…ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```bash:Terminal\nflutter create \u003cproj_name\u003e --org \u003cpackage_name\u003e\n```\n\n\u003cnotice\u003e\n  \\\u003cpackage_name\\\u003eì´ 100% ë™ì¼í•˜ê²Œ íŒ¨í‚¤ì§€ ì´ë¦„ì´ ë˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.\n  ì˜µì…˜ëª…ì—ì„œ ìœ ì¶”í•  ìˆ˜ ìˆë“¯ ê¸°ê´€ì˜ ì´ë¦„ì„ ì ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n  ë”°ë¼ì„œ ì§„ì§œ íŒ¨í‚¤ì§€ ì´ë¦„ì€ `\u003cpackage_name\u003e.\u003cproj_name\u003e` í˜•ì‹ì´ ë©ë‹ˆë‹¤.\n\u003c/notice\u003e\n\nì˜ˆë¡œë“¤ì–´ ì•„ë˜ì™€ ê°™ì´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í–ˆë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.\n\n![230914-164837](/posts/002_project_initalize/230914-164837.png)\n\nì´ ê²½ìš°ì—ëŠ” í”„ë¡œì íŠ¸ëª… - `gdsc_study` / íŒ¨í‚¤ì§€ëª… - `com.gmail.wjlee611` ì…ë‹ˆë‹¤.\në”°ë¼ì„œ í”„ë¡œì íŠ¸ì—ì„œ ì‹¤ì œë¡œ ì ìš©ë˜ëŠ” íŒ¨í‚¤ì§€ëª…ì€ ì•„ë˜ì™€ ê°™ì•„ì§‘ë‹ˆë‹¤.\n\n![230914-165226](/posts/002_project_initalize/230914-165226.png)\n\n\u003e Android - `com.gmail.wjlee611.gdsc_study`\n\u003e iOS - `com.gmail.wjlee611.gdscStudy`\n\nê°™ì€ ëª…ë ¹ì–´ë¼ë„ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ëª…ì´ ìƒì„±ë˜ë‹ˆ ë‚˜ì¤‘ì— ì•±ì„ ë°°í¬í•  ë•Œ ë°˜ë“œì‹œ íŒ¨í‚¤ì§€ëª…ì„ í™•ì¸í•˜ë„ë¡ í•©ì‹œë‹¤.\n\n### -i swift\n\nê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” iOS ì½”ë“œëŠ” `Objective-C` ì…ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì´ ì˜µì…˜ì„ ì¶”ê°€í•˜ë©´ `Swift`ë¡œ ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤.\n\n### -a kotlin\n\nê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” Android ì½”ë“œëŠ” `Java` ì…ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì´ ì˜µì…˜ì„ ì¶”ê°€í•˜ë©´ `Kotlin`ìœ¼ë¡œ ìƒì„±ë˜ê²Œ ë©ë‹ˆë‹¤.\n\n\n","slug":"flutter/002_project_initalize","readingMinutes":3,"wordCount":223},{"title":"í”ŒëŸ¬í„° ì‹œì‘í•˜ê¸°","description":"í”ŒëŸ¬í„° ì„¤ì¹˜ ë° VSCode ì„¸íŒ… ê°€ì´ë“œì…ë‹ˆë‹¤.","icon":"","image":"","tags":["Flutter","VSCode","Package manager"],"draft":false,"date":"2023-09-13 / 21:12","content":"\n## ë“¤ì–´ê°€ë©°...\n\nì´ í¬ìŠ¤íŠ¸ì—ì„  í”ŒëŸ¬í„°(Flutter) ê°œë°œì„ ì‹œì‘í•  ë•Œ ì„¸íŒ…í•´ì•¼í•  ì „ ê³¼ì •ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.\nFlutter SDK ì„¤ì¹˜ë¶€í„° ì—ë®¬ë ˆì´í„° ì„¸íŒ…, VSCode ì„¸íŒ…, ì¶”ê°€ë¡œ ìœ ìš©í•œ ë‹¨ì¶•í‚¤ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤.\në‹¤ë§Œ, ë‹¨ì¶•í‚¤ëŠ” ìš´ì˜ì²´ì œ, ì—ë””í„° í™˜ê²½, ì„¤ì •ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì´ì  ì°¸ê³  ë°”ëë‹ˆë‹¤.\n\n\u003cnotice\u003e\n  **ì´ë¯¸ ì„¤ì¹˜ë¥¼ ì™„ë£Œí•˜ì‹  ë¶„ë“¤ë„ ì‹œê°„ ë‚´ì…”ì„œ [**`VSCode ì„¸íŒ…`**](https://wjlee611.github.io/blog/flutter/001_installation#vscode-%EC%84%B8%ED%8C%85)ë¶€í„° ì½ì–´ë³´ì‹œëŠ” ê²ƒì„ ê°•ë ¥ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.**\n\u003c/notice\u003e\n\në¸”ë¡œê·¸ ì£¼ì¸ì¥ì€ M1 Mac í™˜ê²½ì—ì„œ ì„¸íŒ…í•˜ì˜€ê¸°ì— ë¦¬ëˆ…ìŠ¤ ê³„ì—´ ì„¸íŒ…ë°©ë²•ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ë¤„ë´…ë‹ˆë‹¤ë§Œ,\nìœˆë„ìš° ë¨¸ì‹ ì—ì„œì˜ ì„¸íŒ…ë„ ë‹¤ë¤„ë³¼ ê²ë‹ˆë‹¤. (ë‹¤ë§Œ, ì‹¤ì œ í…ŒìŠ¤íŠ¸ëŠ” í•˜ì§€ ì•Šì•˜ê¸°ì— ì˜¤ë¥˜ê°€ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤)\n\nì°¸ê³ ë¡œ ì•„ë˜ì˜ ëª¨ë“  ì„¤ì¹˜ê³¼ì •ì€ [**ë…¸ë§ˆë“œì½”ë”**](https://nomadcoders.co/flutter-for-beginners)ì˜ ê°•ì¢Œë¥¼ ì •ë¦¬í•œ ìë£Œì…ë‹ˆë‹¤.\n\n- https://nomadcoders.co/flutter-for-beginners/lectures/4133\n- https://nomadcoders.co/flutter-for-beginners/lectures/4142\n\n---\n\n## Flutter SDK ì„¤ì¹˜\n\nFlutter SDKë¥¼ ì„¤ì¹˜í•  ë•Œ ë°©ë²•ì´ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.\nì²« ë²ˆì§¸ëŠ” Flutter ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë°©ì‹ì„ ë”°ë¼ê°€ëŠ” ë°©ë²•\në‘ ë²ˆì§¸ëŠ” íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì´ìš©í•´ì„œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•\n\nì œ ê°œì¸ì ì¸ ìƒê°ì—ëŠ” íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ë” ê°„ë‹¨í•´ ë³´ì…ë‹ˆë‹¤.\nì²« ë²ˆì§¸ ë°©ë²•ì„ ë”°ë¼í•˜ë ¤ë©´ í™˜ê²½ PATHë„ ì„¤ì •í•´ì•¼ í•˜ê¸°ì— ì¢€ ë¬´ì„œì›Œ ë³´ì´ê¸° ë•Œë¬¸ì´ì£ ...\n~_(ê·¸ë¦¬ê³  ì œê°€ ì´ ë°©ë²•ë°–ì— ì•ˆí•´ë³´ê¸°ë„ í–ˆêµ¬ìš”...)_~\n\nê·¸ë˜ë„ ì¼ë‹¨ì€ ë‘ ë°©ë²• ëª¨ë‘ ì†Œê°œí•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n### ê³µì‹ ì‚¬ì´íŠ¸\n\n1. [**í”ŒëŸ¬í„° ê³µì‹ í˜ì´ì§€**](https://flutter.dev)ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.\n\n2. `Get started`ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.\n   ![230913-211858](/posts/001_installation/230913-211858.png)\n\n3. ë³¸ì¸ ìš´ì˜ì²´ì œì— ë§ëŠ” Flutter SDKë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n   ![230913-212121](/posts/001_installation/230913-212121.png)\n\n   ì´í›„ì—ëŠ” ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë¬¸ì„œë¥¼ ì²œì²œíˆ ë”°ë¼í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\n---\n\n### íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € (MacOS)\n\n1. [**Homebrew**](https://brew.sh/)ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.\n   ![230913-214251](/posts/001_installation/230913-214251.png)\n\n\u003cnotice\u003e\n  _ì°¸ê³ ë¡œ HomebrewëŠ” MacOSì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” **ëŒ€ë¶€ë¶„ì˜ ê°œë°œìë„êµ¬ë¥¼ í„°ë¯¸ë„ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë„êµ¬**ì…ë‹ˆë‹¤._\n  _Flutterê°€ ì•„ë‹ˆë”ë¼ë„ **ë°˜ë“œì‹œ** ì„¤ì¹˜í•˜ëŠ”ê²Œ ì •ì‹ ê±´ê°•ì— ì´ë¡­ìŠµë‹ˆë‹¤._\n\u003c/notice\u003e\n\n2. `í„°ë¯¸ë„`ì„ ì—´ì–´ì¤ë‹ˆë‹¤.\n\n3. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ Homebrewë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n   (ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ë³µì‚¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤)\n\n```bash:Terminal\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n```\n\n4. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ Flutter SDKë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n\n```bash:Terminal\nbrew install --cask flutter\n```\n\n---\n\n### íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € (Windows)\n\n1. [**Chocolatey - individual**](https://chocolatey.org/install#individual)ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.\n   ![230913-213419](/posts/001_installation/230913-213419.png)\n\n2. `PowerShell`ì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.\n\n3. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ Chocolateyë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n\n```shell:PowerShell\nGet-ExecutionPolicy\n```\n\në§Œì•½ `Restricted` ë¼ê³  ëœ¬ë‹¤ë©´ ì•„ë˜ì˜ ëª…ë ¹ì–´ ì¤‘ í•˜ë‚˜ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.\n\n```shell:PowerShell\nSet-ExecutionPolicy AllSigned\në˜ëŠ”\nSet-ExecutionPolicy Bypass -Scope Process\n```\n\nê·¸ ì´í›„ì— ì•„ë˜ì˜ ê¸´- ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.\n(ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ë³µì‚¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤)\n\n```shell:PowerShell\nSet-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))\n```\n\n`Chocolatey` ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ `choco` ë¼ëŠ” ëª…ë ¹ì–´ê°€ ì‹¤í–‰ ê°€ëŠ¥í•  ê²ë‹ˆë‹¤.\n\n4. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ Flutter SDKë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.\n\n```shell:PowerShell\nchoco install flutter\n```\n\n### ì„¤ì¹˜ í™•ì¸ ë°©ë²• (1)\n\ní„°ë¯¸ë„ ì°½ì— `flutter` ë¥¼ ì…ë ¥í•´ë´…ì‹œë‹¤.\n`Command not found` ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ì œì™¸í•˜ê³  ë­ë¼ë„ ëœ¬ë‹¤ë©´ ì„¤ì¹˜ê°€ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤.\n\n---\n\n## ì• ë®¬ë ˆì´í„° ì„¤ì¹˜\n\nì•„ë˜ì˜ ê³µì‹ ë¬¸ì„œë¥¼ í†µí•´ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ê°€ì¥ ë°”ëŒì§í•©ë‹ˆë‹¤.\nì„¤ëª…ë„ ì¹œì ˆí•´ì„œ ì™ ë§Œí•˜ë©´ ì„¤ì¹˜í•˜ëŠ”ë° ë¬¸ì œê°€ ì—†ì„ê²ë‹ˆë‹¤. (ì•„ì˜ˆ ì—†ì§„ ì•ŠìŒ...)\nê´€ë ¨ ë§í¬ë¥¼ ì•„ë˜ì— ì •ë¦¬í•©ë‹ˆë‹¤.\n\nğŸ«§[**MacOS - ios setup**](https://docs.flutter.dev/get-started/install/macos#ios-setup)\nğŸ«§[**MacOS - android setup**](https://docs.flutter.dev/get-started/install/macos#android-setup)\n\nğŸ«§[**Windows - android setup**](https://docs.flutter.dev/get-started/install/windows#android-setup)\n\n### ì„¤ì¹˜ í™•ì¸ ë°©ë²• (2)\n\ní„°ë¯¸ë„ ì°½ì— `flutter doctor` ë¥¼ ì…ë ¥í•´ë´…ì‹œë‹¤.\n![230913-220216](/posts/001_installation/230913-220216.png)\n\nSDK, ì• ë®¬ë ˆì´í„°, ì—ë””í„°ê¹Œì§€ ë°œìƒí•˜ëŠ” ë¬¸ì œì‚¬í•­ì„ í•œ ëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003ctip\u003e\n  ì°¸ê³ ë¡œ ìµœì´ˆ ì‹¤í–‰ì‹œ ì•ˆë“œë¡œì´ë“œ ë¼ì´ì„¼ìŠ¤ì— ë™ì˜í•˜ë¼ëŠ” ì—ëŸ¬ í˜¹ì€ ê²½ê³ ê°€ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n  ê·¸ëŸ´ ë• ë‹¹í™©í•˜ì§€ ë§ˆì‹œê³  ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.\n  (_ì„¤ì¹˜í•  ë•Œ ê¼¼ê¼¼íˆ ì½ì–´ë³´ë©´ ì´ëŸ° ë‚´ìš©ë„ ìˆë‹¤ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆì£ ..._)\n\n  \u003cbr /\u003e\n\n  ```bash:Terminal\n  flutter doctor --android-licenses\n  ```\n\u003c/tip\u003e\n\n### Troubleshooting\n\nê°„í˜¹ê°€ë‹¤ Xcode `command line tools`ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\nëª…ë ¹ì–´ ë¼ì¸ ë„êµ¬ëŠ” Xcodeë¥¼ ì„¤ì¹˜í•  ë•Œ ìë™ì ìœ¼ë¡œ ì„¤ì¹˜ë©ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ì œ ê²½ìš°ì—ëŠ” Xcodeë¥¼ ì„¤ì¹˜í•˜ê¸° ì „ì— ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ ë¯¸ë¦¬ ì„¤ì¹˜í•œ ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n```bash:Terminal\nxcode-select --install\n```\n\nëª…ë ¹ì–´ ë¼ì¸ ë„êµ¬ë¥¼ ë¨¼ì € ì„¤ì¹˜í•˜ê³  Xcodeë¥¼ ì„¤ì¹˜í•˜ë©´ ê°€ë” ì •ìƒë™ì‘í•˜ì§€ ì•ŠëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê±° ê°™ìŠµë‹ˆë‹¤.\nì´ëŸ° ê²½ìš°ì—ëŠ” ëª…ë ¹ì–´ ë¼ì¸ ë„êµ¬ë¥¼ ì œê±°í•˜ê³  ë‹¤ì‹œ ì„¤ì¹˜í•˜ë©´ í•´ê²°ë©ë‹ˆë‹¤.\n\n---\n\n## VSCode ì„¸íŒ…\n\nì‚¬ì‹¤ ë§ˆì¼“í”Œë ˆì´ìŠ¤ì—ì„œ `Flutter`, `Dart` í™•ì¥ì„ ì„¤ì¹˜í•˜ê¸°ë§Œ í•˜ë©´ ê°œë°œí•  ì¤€ë¹„ê°€ ëë‚˜ê¸´ í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ê°œë°œ í¸ì˜ì„±ê³¼ ì½”ë“œ í†µì¼ì„ ìœ„í•´ì„œ í•„ìš”í•œ, í˜¹ì€ ìœ ìš©í•œ `í™•ì¥`ê³¼ `setting.json`ì„ ê³µìœ í• ê¹Œ í•©ë‹ˆë‹¤.\n\n### setting.json\n\nì•„ë˜ì™€ ê°™ì€ í‚¤ê°’ì„ ì¶”ê°€í•˜ë©´ ê°œë°œì— ìˆì–´ í¸ì˜ì„±ì´ ì¦ì§„ë©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ì„¤ì •ì„ ê±´ë“œë¦´ ë•, ë³¸ì¸ì˜ ì„¤ì •ê³¼ ì¶©ëŒì´ ìƒê¸°ëŠ”ì§€ ë°˜ë“œì‹œ í™•ì¸í•œ í›„ì— ì¶”ê°€í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\n\nì°¸ê³ ë¡œ, setting.jsonì€ `ëª…ë ¹ íŒ”ë ˆíŠ¸`ë¥¼ ì—´ê³  `settings.json`ì„ ê²€ìƒ‰í•˜ë©´ ë°”ë¡œ ë‚˜ì˜µë‹ˆë‹¤.\në˜ ì°¸ê³ ë¡œ, ëª…ë ¹ íŒ”ë ˆíŠ¸ëŠ” `Command(Window) + Shift + P` ëª…ë ¹ì–´ ì¡°í•©ìœ¼ë¡œ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```json:settings.json showLineNumbers\n{\n  ...\n  \"editor.codeActionsOnSave\": {\n    \"source.fixAll\": true\n  },\n  \"dart.previewFlutterUiGuides\": true,\n}\n```\n\n`Line 3-5`ì˜ ì„¤ì •ì€ ìë™ìœ¼ë¡œ í•„ìš”í•œ ëª¨ë“  ê³³ì— `const` í‚¤ì›Œë“œë¥¼ ì‚½ì…í•´ì£¼ëŠ” ì„¤ì •ì…ë‹ˆë‹¤.\nflutterì—ì„œ constë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì¤‘ìš”í•œë° ê·¸ ì´ìœ ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒì— ì„¤ëª…í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\nì¼ë‹¨ì€ ê°€ëŠ¥í•˜ë‹¤ë©´ ë°˜ë“œì‹œ constë¥¼ ë¶™ì´ëŠ”ê²Œ ì¢‹ê³ , ì´ë¥¼ ìë™ìœ¼ë¡œ ë¶™ì—¬ì¤„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒë§Œ ê¸°ì–µí•©ë‹ˆë‹¤.\n\n`Line 6`ì˜ ì„¤ì •ì€ flutter ìœ„ì ¯ì„ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ì„ ìœ¼ë¡œ ì—°ê²°í•´ì£¼ëŠ” ì„¤ì •ì…ë‹ˆë‹¤.\n![230913-222546](/posts/001_installation/230913-222546.png)\n\nflutterì€ ìœ„ì ¯ì˜ depthê°€ ê¹Šì–´ì§€ëŠ” ë‹¨ì ì´ ìˆëŠ”ë° ì´ë¥¼ ì–´ëŠì •ë„ ê·¹ë³µí•˜ê²Œ í•´ì£¼ëŠ” ìœ ìš©í•œ ì„¤ì •ì…ë‹ˆë‹¤.\n\n### Error Lens\n\n![230913-223129](/posts/001_installation/230913-223129.png)\n\nError LensëŠ” ì½”ë“œ ë¬¸ì œì˜ ì›ì¸ì„ ì—ë””í„°ìƒì— ë°”ë¡œ ë„ì›Œì£¼ëŠ” í™•ì¥ì…ë‹ˆë‹¤.\nì‹¤ì‹œê°„ìœ¼ë¡œ ë¬´ìŠ¨ ì—ëŸ¬ê°€ ìˆëŠ”ì§€ í•œ ëˆˆì— í™•ì¸í•  ìˆ˜ ìˆëŠ”ê²Œ ê°œì¸ì ìœ¼ë¡œ ë§¤ìš° ë§Œì¡±í•˜ë©´ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n![230913-223528](/posts/001_installation/230913-223528.png)\n\nê°œì¸ì ìœ¼ë¡œ ëˆˆë½•(?) ë°©ì§€ë¥¼ ìœ„í•´ `line` ì´ ì•„ë‹Œ, `message` ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n\n![230913-224036](/posts/001_installation/230913-224036.png)\n\në˜í•œ, ë¶„ì„ ë ˆë²¨ì—ì„œ `info` ëŠ” ì œê±°í•´ì£¼ì‹œëŠ” ê²ƒì„ ì¶”ì²œ ë“œë¦½ë‹ˆë‹¤.\n\nflutterì˜ ê²½ìš° infoê°€ ì¤‘ì²©ë˜ì„œ ëœ¨ëŠ” ê²½ìš°ê°€ ë§ê¸°ì— ìœ„ ë‘ ì„¸íŒ…ì„ ë°”ê¾¸ì§€ ì•Šìœ¼ë©´ ì•„ë˜ì™€ ê°™ì€ ëˆˆë½•(?)ì„ ìì£¼ ê²ªê²Œ ë  ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤...\n![230913-223954](/posts/001_installation/230913-223954.png)\n\n### Image preview\n\n![230913-224456](/posts/001_installation/230913-224456.png)\n\nImage previewëŠ” ë¡œì»¬, ë„¤íŠ¸ì›Œí¬ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ë³´ê¸° í˜•ì‹ìœ¼ë¡œ ë„ì›Œì£¼ëŠ” í™•ì¥ì…ë‹ˆë‹¤.\nFE ê°œë°œ ì…ì¥ì—ì„œ ì´ë¯¸ì§€ë‚˜ svg, iconì„ ì‚¬ìš©í•  ì¼ì´ ë§ì€ë°, ì´ë¥¼ ë¯¸ë¦¬ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ ë§Œìœ¼ë¡œë„ ë§ì€ ì‹œê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\n## VSCode ë‹¨ì¶•í‚¤\n\nê°œë°œ ì‹œê°„ì„ ì¤„ì—¬ì£¼ëŠ” ìœ ìš©í•œ ë‹¨ì¶•í‚¤ ë° snippets ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.\n\n### Code Action\n\n![230913-224956](/posts/001_installation/230913-224956.png)\n\nflutter ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ì¤‘ê°„ì— ìœ„ì ¯ì„ ë‹¤ë¥¸ ìœ„ì ¯ìœ¼ë¡œ ê°ì‹¸ê±°ë‚˜, ë¶€ëª¨ ìœ„ì ¯ì„ í†µì§¸ë¡œ ë“œëŸ¬ë‚´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì¦ì€ë°,\nì´ë¥¼ ì¼ì¼ì´ ì½”ë“œë¥¼ ì˜ë¼ë‚´ê³  ë¶™ì—¬ë„£ê¸° í•˜ëŠ”ê±´ ë§¤ìš° ê·€ì°®ì€ ì‘ì—…ì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ì´ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ”ë° ìˆì–´ Code Actionì€ ë§¤ìš° ìœ ìš©í•œ ë„êµ¬ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.\n\nê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ìœ„ì ¯ì˜ ì¢Œì¸¡ì— `ğŸ’¡(ì „êµ¬) ëª¨ì–‘ ì•„ì´ì½˜`ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ìœ„ì ¯ì—ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê¸°ëŠ¥ë“¤ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\n\në˜ëŠ” `Command(Window) + .` ë‹¨ì¶•í‚¤ë¡œ ë¹ ë¥´ê²Œ Code Actionì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në§¤ìš°ë§¤ìš° ìì£¼ì“°ëŠ” ê¸°ëŠ¥ì´ë‹ˆ ë³¸ì¸ ì—ë””í„° í™˜ê²½ì— ë§ëŠ” ë‹¨ì¶•í‚¤ë¥¼ ì™¸ìš°ë„ë¡ í•©ì‹œë‹¤.\n~_(ì‚¬ì‹¤ ì™¸ìš¸ í•„ìš”ë„ ì—†ì´ ì“°ë‹¤ë³´ë©´ ì†ê°€ë½ì´ ì•Œì•„ì„œ ì›€ì§ì´ê²Œ ëœë‹¤ëŠ”...)_~\n\n### Intellisense\n\nì‰½ê²Œ ë§í•˜ë©´ `ì½”ë“œ ì¶”ì²œ + ìë™ì™„ì„±` ê¸°ëŠ¥ì…ë‹ˆë‹¤.\n\nì½”ë“œë¥¼ ì…ë ¥í•˜ë‹¤ ë³´ë©´ ìë™ìœ¼ë¡œ ì½”ë“œë¥¼ ì¶”ì²œí•´ì¤„í…ë°, ì‹¤ìˆ˜ë¡œ ì´ë¥¼ êº¼ë²„ë¦¬ëŠ” ì¼ì´ ë°œìƒí•©ë‹ˆë‹¤.\nì´ ê²½ìš° ì½”ë“œë¥¼ ì§€ì› ë‹¤ê°€ ë‹¤ì‹œ ì¹˜ëŠ” ê²ƒ ë³´ë‹¨, `Option(Alt) + Space`ë¡œ ë‹¤ì‹œ í™œì„±í™” ì‹œí‚¤ëŠ” ê²ƒì´ ë” ìœ ìš©í•©ë‹ˆë‹¤.\n\n### st + (intellisense)\n\n![230913-230035](/posts/001_installation/230913-230035.png)\n\ní”ŒëŸ¬í„°ì˜ ìœ„ì ¯ì˜ ëŒ€ë¶€ë¶„ì€ Stateful, Stateless ìœ„ì ¯ì„ ìƒì† ë°›ìŠµë‹ˆë‹¤.\nê·¸ì— ë”°ë¼ ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ overrideí•´ì„œ ì‚¬ìš©í•´ì•¼ë§Œ í•˜ëŠ”ë°ìš”,\nì´ ëª¨ë“  ì½”ë“œë¥¼ ì¼ì¼ì´ ì…ë ¥í•˜ëŠ” ê²ƒë„, ê¸°ì–µí•˜ëŠ” ê²ƒë„ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\nì´ ê²½ìš°ì—ëŠ” `st`ë¥¼ ì…ë ¥í•˜ê³  intellisense ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ VSCodeê°€ ì•Œì•„ì„œ\nStateful, Stateless ìœ„ì ¯ì˜ í•„ìˆ˜ ë¶€ë¶„ì„ ì•Œì•„ì„œ ì™„ì„±í•´ì£¼ê³ ,\ní´ë˜ìŠ¤ ì´ë¦„ê³¼ ê´€ë ¨í•œ ë¶€ë¶„ ëª¨ë‘ë¥¼ ì„ íƒí•œ ìƒíƒœë¡œ ì‚¬ìš©ìì˜ ì…ë ¥ì„ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤.\n\në”°ë¼ì„œ ì‚¬ìš©ìëŠ” ì•„ë˜ì˜ ì ˆì°¨ë¥¼ ë°Ÿìœ¼ë©´ ê°„ë‹¨í•˜ê²Œ ìœ„ì ¯ í•˜ë‚˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\n\n1. st + (intellisense)\n2. ì›í•˜ëŠ” ë¶€ëª¨ìœ„ì ¯(Stateful, Stateless) ì„ íƒ\n3. ì›í•˜ëŠ” í´ë˜ìŠ¤ ì´ë¦„ ì…ë ¥\n\n## ë§ˆë¬´ë¦¬\n\nì§€ê¸ˆê¹Œì§€ Flutter SDK ì„¤ì¹˜ë¶€í„° VSCode ë‹¨ì¶•í‚¤ê¹Œì§€ ê°œë°œì— ì•ì„œ í•„ìš”í•œ ëª¨ë“  ì¤€ë¹„ë‹¨ê³„ë¥¼ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.\nì¶”ê°€ë¡œ í•„ìš”í•œ ì„¤ì •ì´ë‚˜ ê¸°ëŠ¥ì€ ì•Œì•„ë³´ì‹œê³  ì¶”ê°€í•˜ì—¬ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´, ê°œë°œì´ ì¡°ê¸ˆì´ë¼ë„ ë” ì¦ê±°ì›Œì§€ë¦¬ë¼ ìƒê°ë©ë‹ˆë‹¤.\n\nê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬ë“œë¦¬ê³ , ëª¨ë‘ ì•Œì°¬ `Flutt-er` ìƒí™œ ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤!\n","slug":"flutter/001_installation","readingMinutes":14,"wordCount":1023},{"title":"Flutter \u0026 Dart","description":"ìŠ¤ìŠ¤ë¡œ ë°°ìš°ë©° ê¹¨ë‹¬ì€ í”ŒëŸ¬í„° ì§€ì‹ì˜ ì‚°ì‹¤ì…ë‹ˆë‹¤.","icon":"","image":"","tags":[],"draft":false,"date":"2023-09-13 / 21:09","content":"","slug":"flutter/index","readingMinutes":0,"wordCount":1}],"mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    br: \"br\",\n    h2: \"h2\",\n    a: \"a\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    hr: \"hr\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"FCMì„ êµ¬í˜„í•˜ëŠ”ë° ìˆì–´, FCM ì„¸íŒ…ì´ë‚˜ ìˆ˜ì‹ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê¸€ì€ ë§ì´ ë´¤ëŠ”ë°,\", _jsx(_components.br, {}), \"\\n\", \"ì´ë¥¼ ìƒíƒœê´€ë¦¬ì™€ ì—®ì–´ì„œ ì†Œê°œí•˜ëŠ” ê¸€ì€ ëª»ë´¤ë˜ê±° ê°™ìŠµë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì œ ê²½ìš°ì—ëŠ” ì½”ë“œ ìŠ¤íƒ€ì¼ì„ í†µì¼í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê¸° ë•Œë¬¸ì—, FCM ì—­ì‹œ ìƒíƒœê´€ë¦¬ë¥¼ ì´ìš©í•´ì„œ ê´€ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ë˜í•œ, ì €ëŠ” Blocì„ ì• ìš©í•˜ê¸° ë•Œë¬¸ì—, ì´ë²ˆì—ëŠ” FCMì´ ìˆ˜ì‹ ë˜ë©´ Blocì„ í†µí•´ í•´ë‹¹ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.\", _jsx(_components.br, {}), \"\\n\", \"(ì •í™•íˆëŠ” Cubitì„ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤)\"]\n    }), \"\\n\", _jsx(\"notice\", {\n      children: _jsx(_components.p, {\n        children: \"í•´ë‹¹ ë°©ì‹ì€ ë¶€ì¡±í•œ ì œ ì§€ì‹ìœ¼ë¡œ ìì²´ êµ¬í˜„í•œ ë°©ë²•ì´ê¸° ë•Œë¬¸ì— ë‹¤ì†Œ ì–´ì„¤í”„ê²Œ ë³´ì¼ ìˆ˜ ìˆìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\"\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"firebasemessaging\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#firebasemessaging\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"FirebaseMessaging\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ìš°ì„  FCMì„ ì‚¬ìš©í•˜ê¸° ì•ì„œ, FirebaseMessaging ê°ì²´ë¥¼ ì¡°ê¸ˆë§Œ ì‚´í´ë´…ì‹œë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì•±ì˜ ìƒíƒœ(fore/background, terminate)ì— ë”°ë¼ FCM ìˆ˜ì‹  ë°©ë²•ì´ ë‹¬ë¼ì§€ëŠ”ë°, ê° ìƒíƒœì— ë”°ë¥¸ ìˆ˜ì‹  ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: _jsx(_components.strong, {\n            children: \"foreground\"\n          })\n        }), \"\\n\", _jsx(_components.p, {\n          children: \"ì•±ì´ í™”ë©´ìœ„ì—ì„œ ì‹¤í–‰ì¤‘ì¸ ê²½ìš°ì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\"\n        }), \"\\n\", _jsx(_components.div, {\n          className: \"rehype-code-title\",\n          children: \".dart\"\n        }), _jsx(_components.pre, {\n          className: \"language-dart\",\n          children: _jsxs(_components.code, {\n            className: \"language-dart code-highlight\",\n            children: [_jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"FirebaseMessaging\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), \"onMessage\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token function\",\n                children: \"listen\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"listenFCM\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \"\\n\"]\n            }), _jsx(_components.span, {\n              className: \"code-line\",\n              children: \"\\n\"\n            }), _jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"void\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"listenFCM\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"RemoteMessage\"\n              }), _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"?\"\n              }), \" message\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              }), \"\\n\"]\n            })]\n          })\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: _jsx(_components.strong, {\n            children: \"background\"\n          })\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [\"ì•±ì´ ì£½ì§€ëŠ” ì•Šì•˜ì§€ë§Œ í™”ë©´ìœ„ì— ì—†ëŠ” ê²½ìš°.\", _jsx(_components.br, {}), \"\\n\", \"ì¦‰, íƒœìŠ¤í¬ë§¤ë‹ˆì ¸ ìƒì—ë§Œ ì¡´ì¬í•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\"]\n        }), \"\\n\", _jsx(_components.div, {\n          className: \"rehype-code-title\",\n          children: \".dart\"\n        }), _jsx(_components.pre, {\n          className: \"language-dart\",\n          children: _jsxs(_components.code, {\n            className: \"language-dart code-highlight\",\n            children: [_jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"FirebaseMessaging\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), \"onMessageOpenedApp\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token function\",\n                children: \"listen\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"listenFCM\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \"\\n\"]\n            }), _jsx(_components.span, {\n              className: \"code-line\",\n              children: \"\\n\"\n            }), _jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"void\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"listenFCM\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"RemoteMessage\"\n              }), _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"?\"\n              }), \" message\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              }), \"\\n\"]\n            })]\n          })\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: _jsx(_components.strong, {\n            children: \"terminate\"\n          })\n        }), \"\\n\", _jsx(_components.p, {\n          children: \"ì•±ì´ ì™„ì „íˆ ì¢…ë£Œëœ ìƒíƒœì— í•´ë‹¹í•˜ë©°, ìˆ˜ì‹  ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\"\n        }), \"\\n\", _jsx(_components.div, {\n          className: \"rehype-code-title\",\n          children: \".dart\"\n        }), _jsx(_components.pre, {\n          className: \"language-dart\",\n          children: _jsxs(_components.code, {\n            className: \"language-dart code-highlight\",\n            children: [_jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"FirebaseMessaging\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token function\",\n                children: \"onBackgroundMessage\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), \"onBackgroundMessage\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \";\"\n              }), \"\\n\"]\n            }), _jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), \"\\n\"]\n            }), _jsxs(_components.span, {\n              className: \"code-line\",\n              children: [\"  \", _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"Future\"\n              }), _jsxs(_components.span, {\n                className: \"token generics\",\n                children: [_jsx(_components.span, {\n                  className: \"token punctuation\",\n                  children: \"\u003c\"\n                }), _jsx(_components.span, {\n                  className: \"token keyword\",\n                  children: \"void\"\n                }), _jsx(_components.span, {\n                  className: \"token punctuation\",\n                  children: \"\u003e\"\n                })]\n              }), \" \", _jsx(_components.span, {\n                className: \"token function\",\n                children: \"onBackgroundMessage\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"(\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"RemoteMessage\"\n              }), \" message\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \")\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"async\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \".\"\n              }), \" \", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              }), \"\\n\"]\n            })]\n          })\n        }), \"\\n\", _jsx(\"notice\", {\n          children: _jsx(_components.p, {\n            children: \"fore/background ì™€ ë‹¤ë¥´ê²Œ, terminateì˜ ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ëŠ” static í˜•ì‹, ë˜ëŠ” ì „ì—­ìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.\"\n          })\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(\"tip\", {\n      children: [_jsxs(_components.p, {\n        children: [\"fore/backgroundì˜ ê²½ìš°ì—ëŠ” onBlah getterë¥¼ ì´ìš©í•´ì„œ streamì„ ë°˜í™˜í•˜ê³ , streamì˜ listenì„ ì´ìš©í•´ì„œ streamì„ êµ¬ë…í•©ë‹ˆë‹¤.\", _jsx(_components.br, {}), \"\\n\", \"ì¦‰, ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”í•œ, ìŠ¤íŠ¸ë¦¼ í˜•ì‹ìœ¼ë¡œ ì§€ì†í•´ì„œ FCMê³¼ ê°™ì€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]\n      }), _jsx(\"br\", {}), _jsx(_components.p, {\n        children: \"ë°˜ë©´ì— terminateì˜ ê²½ìš°ì—ëŠ” ì•±ì´ ì£½ì€ ìƒíƒœì—ì„œì˜ FCM ìˆ˜ì‹ ì„ ë‹´ë‹¹í•˜ê¸° ë•Œë¬¸ì—, stream í˜•ì‹ìœ¼ë¡œ ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì‹ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\"\n      })]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.h2, {\n      id: \"êµ¬í˜„\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#êµ¬í˜„\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"êµ¬í˜„\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"state\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#state\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"State\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Cubitì—ì„œ ê´€ë¦¬í•  ìƒíƒœ í´ë˜ìŠ¤ë¥¼ ìš°ì„  ì •ì˜í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"rehype-code-title\",\n      children: \"fcm_cubit.dart\"\n    }), _jsx(_components.pre, {\n      className: \"language-dart\",\n      children: _jsxs(_components.code, {\n        className: \"language-dart code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Equatable\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"final\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMEvent\"\n          }), \" state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"final\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"final\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMDataModel\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"state \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMEvent\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"none\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"factory\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"fromBgMessage\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"RemoteMessage\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"message \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"null\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"notification \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"null\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMEvent\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"notification\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMDataModel\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"fromJson\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token metadata function\",\n            children: \"@override\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"List\"\n          }), _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"Object\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"?\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"get\"\n          }), \" props \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u003e\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"FCMEvent\"\n      }), \"ëŠ” ìì²´ ì •ì˜í•œ í•´ë‹¹ fcmì˜ íƒ€ì…ì„ ê´€ë¦¬í•˜ëŠ” enum íƒ€ì…ì…ë‹ˆë‹¤. (option)\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"body\"\n      }), \"ëŠ” ì•±ì˜ í‘¸ì‰¬ ì•Œë¦¼ì—ì„œ ë³´ì—¬ì§€ëŠ” ë¬¸ìì—´ì„ ë³´ê´€í•˜ëŠ” ë©¤ë²„ ë³€ìˆ˜ì…ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsxs(\"tip\", {\n      children: [_jsx(_components.p, {\n        children: \"ê¸°ë³¸ firebase_messaging ì—ì„œ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œ, í‘¸ì‰¬ì•Œë¦¼ì€ background, terminate ìƒíƒœì—ì„œë§Œ í‘œì‹œë˜ê³ , foreground ìƒíƒœì—ì„œëŠ” í‘¸ì‰¬ì•Œë¦¼ì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (FCM ìì²´ëŠ” ìˆ˜ì‹ ë¨).\"\n      }), _jsx(\"br\", {}), _jsx(_components.p, {\n        children: \"ë”°ë¼ì„œ, bodyì— ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³ , ìƒíƒœê°€ ë³€í™”í–ˆì„ ë•Œ Snackbar ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"FCMDataModel\"\n      }), \"ì€ FCMì˜ data ê°ì²´ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ìì²´ ëª¨ë¸ì…ë‹ˆë‹¤.\", _jsx(_components.br, {}), \"\\n\", \"ì´ ëª¨ë¸ì€ int \", _jsx(_components.code, {\n        children: \"code\"\n      }), \", String \", _jsx(_components.code, {\n        children: \"data\"\n      }), \"ì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.\", _jsx(_components.br, {}), \"\\n\", _jsx(_components.code, {\n        children: \"code\"\n      }), \"ëŠ” ì¼ì¢…ì˜ ì‘ë‹µì½”ë“œë¡œ, codeì— ë”°ë¼ FCMì´ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œì˜ ì•±ì˜ ë™ì‘ì´ ë‹¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.\", _jsx(_components.br, {}), \"\\n\", _jsx(_components.code, {\n        children: \"data\"\n      }), \"ëŠ” ì§ë ¬í™”ëœ ê°ì²´ì˜ json ë¬¸ìì—´ìœ¼ë¡œ, codeì— ë”°ë¼ íŒŒì‹± ë°©ë²•ì´ ë‹¬ë¼ì§€ë©°, í•„ìš”í•œ ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ëª¨ë“  FCM ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” \", _jsx(_components.code, {\n        children: \"RemoteMessage\"\n      }), \" ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ë°›ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ê°ì²´ë¥¼ ì´ìš©í•œ ìƒì„±ìë¥¼ êµ¬í˜„í•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"cubit\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#cubit\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"Cubit\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‹¤ìŒìœ¼ë¡œ ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë˜ fore/backgroundëŠ” Cubit ìƒì„±ìì—ì„œ ìŠ¤íŠ¸ë¦¼ì„ êµ¬ë…ë°›ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"rehype-code-title\",\n      children: \"fcm_cubit.dart\"\n    }), _jsx(_components.pre, {\n      className: \"language-dart\",\n      children: _jsxs(_components.code, {\n        className: \"language-dart code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMCubit\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Cubit\"\n          }), _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"FCMState\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"final\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" _fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMCubit\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"_fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"RemoteMessage\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"fromBgMessage\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// fcm listening\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// at foground\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FirebaseMessaging\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"onMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"listen\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"listenFCM\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// at background\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FirebaseMessaging\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"onMessageOpenedApp\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"listen\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"listenFCM\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// token getter\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"get\"\n          }), \" token \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u003e\"\n          }), \" _fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  \\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"listenFCM\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"RemoteMessage\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"message \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"null\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"emit\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMEvent\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"notification\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"body\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMDataModel\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"fromJson\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"emit\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ì´ë ‡ê²Œ í•˜ë©´ fore/background ì—ì„œ FCMì´ ìˆ˜ì‹ ë  ë•Œ ë§ˆë‹¤ listenFCM ë¦¬ìŠ¤ë„ˆê°€ ì‹¤í–‰ì´ ë˜ê³ ,\", _jsx(_components.br, {}), \"\\n\", \"í•´ë‹¹ ë¦¬ìŠ¤ë„ˆ ì•ˆì—ì„œ emitì„ 2íšŒ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ì²« ë²ˆì§¸ emitì—ì„œëŠ” ìœ„ì—ì„œ ì •ì˜í•œ, RemoteMessageì˜ ë°ì´í„°ë¥¼ í™œìš©í•´ ì´ˆê¸°í™”ëœ FCMState ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ë˜ê³ ,\", _jsx(_components.br, {}), \"\\n\", \"ë‘ ë²ˆì§¸ emitì—ì„œëŠ” init ìƒíƒœì˜ FCMState ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‘ ë²ˆì§¸ emitì´ í•„ìš”í•œ ì´ìœ ëŠ”, ë™ì¼í•œ FCMì´ 2ë²ˆ ì—°ì† ìˆ˜ì‹ ë˜ëŠ” ì¼ë„ ì¡´ì¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ì´ˆê¸°í™” ì‹œì¼œ 2ë²ˆ ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì‹ ì‹œì¼œ ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"main\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#main\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"main\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ì œ mainì—ì„œ FCM Tokenê³¼ ê¶Œí•œ ìš”ì²­, terminateì˜ ë™ì‘ì„ ì •ì˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"rehype-code-title\",\n      children: \"main.dart\"\n    }), _jsx(_components.pre, {\n      className: \"language-dart\",\n      children: _jsxs(_components.code, {\n        className: \"language-dart code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"RemoteMessage\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"main\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"async\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// flutter ensure initialized\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"WidgetsFlutterBinding\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"ensureInitialized\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// request FCM permission\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FirebaseMessaging\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"instance\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"requestPermission\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    badge\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"true\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    alert\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"true\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    sound\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"true\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// listening fcm from background\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FirebaseMessaging\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"onBackgroundMessage\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"_onBackgroundMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// get fcm token\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" fcmToken \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"await\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FirebaseMessaging\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"instance\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getToken\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"debugPrint\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsxs(_components.span, {\n            className: \"token string-literal\",\n            children: [_jsx(_components.span, {\n              className: \"token string\",\n              children: \"'FCM Token: \"\n            }), _jsxs(_components.span, {\n              className: \"token interpolation\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"$\"\n              }), _jsx(_components.span, {\n                className: \"token expression\",\n                children: \"fcmToken\"\n              })]\n            }), _jsx(_components.span, {\n              className: \"token string\",\n              children: \"'\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"runApp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"MyApp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" fcmToken \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string-literal\",\n            children: _jsx(_components.span, {\n              className: \"token string\",\n              children: \"''\"\n            })\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Future\"\n          }), _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token keyword\",\n              children: \"void\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"_onBackgroundMessage\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"RemoteMessage\"\n          }), \" message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"async\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  bgMessage \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" message\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì œê°€ êµ¬í˜„í–ˆì„ ë•ŒëŠ”, terminate ì—ì„œì˜ FCM ìˆ˜ì‹ ì€ ì•±ì˜ ìµœì´ˆ í™”ë©´ì„ ì œì–´í•˜ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ë”°ë¼ì„œ, bgMessageì— ì„ì‹œ ë³´ê´€í•˜ì—¬ runAppìœ¼ë¡œ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.\", _jsx(_components.br, {}), \"\\n\", \"ì´í›„ì— ë³„ë„ ì²˜ë¦¬ë¥¼ í†µí•´ go_routerì˜ initialRouteë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"blocprovider\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#blocprovider\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"BlocProvider\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ì œ FCMCubitì„ BuildContextì— ë“±ë¡ì„ ì‹œí‚µì‹œë‹¤.\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"rehype-code-title\",\n      children: \"main.dart\"\n    }), _jsx(_components.pre, {\n      className: \"language-dart\",\n      children: _jsxs(_components.code, {\n        className: \"language-dart code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"MyApp\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"StatelessWidget\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"final\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"String\"\n          }), \" fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"final\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"RemoteMessage\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"MyApp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"key\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    required \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token metadata function\",\n            children: \"@override\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Widget\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"build\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"BuildContext\"\n          }), \" context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"MultiRepositoryProvider\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      providers\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      child\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"MultiBlocProvider\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        providers\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"BlocProvider\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"            create\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u003e\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"FCMCubit\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"              fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"              bgMessage\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"            \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"            lazy\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token boolean\",\n            children: \"false\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        child\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"App\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ë ‡ê²Œ í•˜ë©´ Blocì„ í†µí•´ FCMì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•  ì¤€ë¹„ê°€ ëª¨ë‘ ëë‚©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsxs(_components.h3, {\n      id: \"ê²°ê³¼ë¬¼\",\n      children: [_jsx(_components.a, {\n        className: \"anchor\",\n        href: \"#ê²°ê³¼ë¬¼\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"ê²°ê³¼ë¬¼\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"rehype-code-title\",\n      children: \".dart\"\n    }), _jsx(_components.pre, {\n      className: \"language-dart\",\n      children: _jsxs(_components.code, {\n        className: \"language-dart code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [_jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"BlocListener\"\n          }), _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"FCMCubit\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"FCMState\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  listener\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"code \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"==\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string-literal\",\n            children: _jsx(_components.span, {\n              className: \"token string\",\n              children: \"\\\"10000\\\"\"\n            })\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// action for res code 10000\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"code \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"==\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string-literal\",\n            children: _jsx(_components.span, {\n              className: \"token string\",\n              children: \"'10001'\"\n            })\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// action for res code 10001\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"code \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"==\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string-literal\",\n            children: _jsx(_components.span, {\n              className: \"token string\",\n              children: \"'10002'\"\n            })\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// action for res code 10002\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"FCMì´ ìˆ˜ì‹ ë  ê²½ìš°, \", _jsx(_components.code, {\n        children: \"BlocListener\u003cFCMCubit, FCMState\u003e\"\n      }), \"ë¥¼ í†µí•´ FCMì— ì˜í•œ stateì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ ,\"]\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"rehype-code-title\",\n      children: \".dart\"\n    }), _jsx(_components.pre, {\n      className: \"language-dart\",\n      children: _jsxs(_components.code, {\n        className: \"language-dart code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"BlocProvider\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  create\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u003e\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"SignalStateBloc\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    homeSignalBoxRepository\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"read\", _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"HomeSignalBoxRepository\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    myIdx\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"read\", _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"UserCubit\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"user\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"userIdx\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    jwt\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"read\", _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"UserCubit\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"user\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"jwt\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"    fcmToken\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \":\"\n          }), \" context\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"read\", _jsxs(_components.span, {\n            className: \"token generics\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              className: \"token class-name\",\n              children: \"FCMCubit\"\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"\u003e\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"token\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ì„œë²„ì—ì„œ FCM Tokenì´ í•„ìš”í•œ ê²½ìš° \", _jsx(_components.code, {\n        children: \"FCMCubit.token\"\n      }), \"ì„ í†µí•´ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì˜ FCM Tokenì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Blocìœ¼ë¡œ FCMê¹Œì§€ ê´€ë¦¬ ì™„ë£Œ!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"toc":[{"slug":"firebasemessaging","text":"FirebaseMessaging","subSections":[]},{"slug":"êµ¬í˜„","text":"êµ¬í˜„","subSections":[{"slug":"state","text":"State"},{"slug":"cubit","text":"Cubit"},{"slug":"main","text":"main"},{"slug":"blocprovider","text":"BlocProvider"},{"slug":"ê²°ê³¼ë¬¼","text":"ê²°ê³¼ë¬¼"}]}]},"__N_SSG":true},"page":"/blog/[...slugs]","query":{"slugs":["flutter","fcm_with_bloc"]},"buildId":"mSip3wpvRTnWXKuxxjBQ7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>